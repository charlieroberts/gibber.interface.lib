!function(t){if("object"==typeof exports)module.exports=t();else if("function"==typeof define&&define.amd)define(t);else{var e;"undefined"!=typeof window?e=window:"undefined"!=typeof global?e=global:"undefined"!=typeof self&&(e=self),e.Gibber=t()}}(function(){var define,module,exports;return function t(e,i,n){function s(r,a){if(!i[r]){if(!e[r]){var h="function"==typeof require&&require;if(!a&&h)return h(r,!0);if(o)return o(r,!0);throw new Error("Cannot find module '"+r+"'")}var u=i[r]={exports:{}};e[r][0].call(u.exports,function(t){var i=e[r][1][t];return s(i?i:t)},u,u.exports,t,e,i,n)}return i[r].exports}for(var o="function"==typeof require&&require,r=0;r<n.length;r++)s(n[r]);return s}({1:[function(t,e){(function(t){!function(){"use strict";function i(t,e,n){for(var s in e)n&&(c(e[s])||h(e[s]))?(c(e[s])&&!c(t[s])&&(t[s]={}),h(e[s])&&!h(t[s])&&(t[s]=[]),i(t[s],e[s],n)):void 0!==e[s]&&(t[s]=e[s])}var n="function"==typeof Zepto,s="function"==typeof jQuery,o="object"==typeof t.$||"function"==typeof t.$,r=null,a=n||s||o,h=Array.isArray,u=function(t){return"object"==typeof t},c=function(t){return u(t)&&Object.getPrototypeOf(t)==Object.prototype};r=a?s?jQuery:n?Zepto:o?t.$:{}:{},a||(r.extend=function(t){var e,n=Array.prototype.slice.call(arguments,1);return"boolean"==typeof t&&(e=t,t=n.shift()),n.forEach(function(n){i(t,n,e)}),t},r.isArray=Array.isArray,r.isPlainObject=c,r.type=function(t){return typeof t});var l={};r.subscribe=function(t,e){"undefined"==typeof l[t]&&(l[t]=[]),l[t].push(e)},r.unsubscribe=function(t,e){if("undefined"!=typeof l[t]){var i=l[t];i.splice(i.indexOf(e),1)}},r.publish=function(t,e){if("undefined"!=typeof l[t])for(var i=l[t],n=0;n<i.length;n++)i[n](e)},e.exports=r}()}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],2:[function(_dereq_,module,exports){!function(){var $=_dereq_("./dollar"),Gibber={dollar:$,Presets:{},GraphicsLib:{},Binops:{},scale:null,minNoteFrequency:50,started:!1,outputCurves:{LINEAR:0,LOGARITHMIC:1},"export":function(t){Gibber.Utilities.export(t),Gibber.Audio&&Gibber.Audio.export(t),Gibber.Graphics&&Gibber.Graphics.export(t),Gibber.Interface&&Gibber.Interface.export(t)},init:function(t){"undefined"==typeof window?(window=GLOBAL,document=GLOBAL.document=!1):"undefined"!=typeof GLOBAL&&(GLOBAL.document||(document=GLOBAL.document=!1));var e={globalize:!0,canvas:null,target:window,graphicsMode:"3d"};"object"==typeof t&&$.extend(e,t),Gibber.Audio&&(Gibber.Audio.init(),e.globalize?e.target.Master=Gibber.Audio.Master:$.extend(Gibber,Gibber.Audio)),Gibber.Graphics,Gibber.Interface,e.globalize&&Gibber.export(e.target),e.target.$=$,Gibber.Utilities.init()},Modules:{},"import":function(t,e){var i=null;if(console.log("Loading module "+t+"..."),-1===t.indexOf("http:"))console.log("loading via post",t),$.post(Gibber.Environment.SERVER_URL+"/gibber/"+t,{},function(n){n=JSON.parse(n);var s=new Function("return "+n.text);return Gibber.Modules[t]=s(),e&&Gibber.Modules[t]&&$.extend(e,Gibber.Modules[t]),Gibber.Modules[t]?("function"==typeof Gibber.Modules[t].init&&Gibber.Modules[t].init(),console.log("Module "+t+" is now loaded.")):console.log("Publication "+t+" is loaded. It may not be a valid module."),null!==i&&i(Gibber.Modules[t]),!1});else{var n=document.createElement("script");n.src=t,n.onload=function(){console.log("Module "+t+" is now loaded."),null!==i&&i()},document.head.appendChild(n)}return{done:function(t){i=t}}},scriptCallbacks:[],run:function(script,pos,cm){var _start=pos.start?pos.start.line:pos.line,tree;try{tree=Gibber.Esprima.parse(script,{loc:!0,range:!0})}catch(e){return console.error("Parse error on line "+(_start+e.lineNumber)+" : "+e.message.split(":")[1]),void 0}for(var __i__=0;__i__<tree.body.length;__i__++){var obj=tree.body[__i__],start={line:_start+obj.loc.start.line-1,ch:obj.loc.start.column},end={line:_start+obj.loc.end.line-1,ch:obj.loc.end.column},src=cm.getRange(start,end),result=null;try{result=eval(src),"function"!=typeof result?log(result):log("Function")}catch(e){console.error("Error evaluating expression beginning on line "+(start.line+1)+"\n"+e.message)}if(this.scriptCallbacks.length>0)for(var ___i___=0;___i___<this.scriptCallbacks.length;___i___++)this.scriptCallbacks[___i___](obj,cm,pos,start,end,src,_start)}},processArguments:function(t,e){var i;return t.length?"string"==typeof t[0]&&"Drums"!==e&&"XOX"!==e?(i=Gibber.getPreset(t[0],e),"object"==typeof t[1]&&$.extend(i,t[1]),i):Array.prototype.slice.call(t,0):i},processArguments2:function(t,e,i){if(e.length){var n=e[0];if("string"==typeof n&&"Drums"!==i&&"XOX"!==i&&"Shader"!==i)preset=Gibber.getPreset(e[0],i),"object"==typeof e[1]&&$.extend(preset,e[1]),$.extend(t,preset),t.presetInit&&t.presetInit();else if($.isPlainObject(n)&&"undefined"==typeof n.type)$.extend(t,n);else{var s=Object.keys(t.properties);if("FX"===t.type)for(var o=0;o<e.length;o++)t[s[o+1]]=e[o];else for(var o=0;o<e.length;o++)t[s[o]]=e[o]}}},getPreset:function(t,e){var i={};return Gibber.Presets[e]?Gibber.Presets[e][t]?i=Gibber.Presets[e][t]:Gibber.log(e+" does not have a preset named "+t+"."):Gibber.log(e+" does not have a preset named "+t+"."),i},clear:function(){Gibber.Audio&&Gibber.Audio.clear(),Gibber.Graphics&&Gibber.Graphics.clear(),Gibber.proxy(window),$.publish("/gibber/clear",{}),console.log("Gibber has been cleared.")},proxy:function(t){for(var e="abcdefghijklmnopqrstuvwxyz",i=0;i<e.length;i++){var n=e.charAt(i);"undefined"!=typeof window[n]&&(delete window[n],delete window["___"+n]),function(){var e=n;Object.defineProperty(t,e,{configurable:!0,get:function(){return t["___"+e]},set:function(i){if(i)t["___"+e]&&"function"==typeof t["___"+e].replaceWith&&(t["___"+e].replaceWith(i),console.log(t["___"+e].name+" was replaced with "+i.name)),t["___"+e]=i;else if(t["___"+e]){var n=t["___"+e];n&&"function"==typeof n.kill&&n.kill()}}})}()}},construct:function(t,e){function i(){return t.apply(this,e)}return i.prototype=t.prototype,new i},createMappingObject:function(t,e){var i="function"==typeof t.min?t.min():t.min,n="function"==typeof t.max?t.max():t.max,s="function"==typeof e.min?e.min():e.min,o="function"==typeof e.max?e.max():e.max;if("undefined"==typeof e.object&&e.Value&&(e=e.Value),"undefined"!=typeof t.object[t.Name].mapping)return t.object[t.Name].mapping.replace(e.object,e.name,e.Name),void 0;"undefined"!=typeof e.targets&&-1===e.targets.indexOf(t)&&e.targets.push([t,t.Name]);var r="Out"!==e.Name?e.timescale:"audioOut";return mapping=Gibber.mappings[t.timescale][r](t,e),Object.defineProperties(t.object[t.Name],{min:{configurable:!0,get:function(){return i},set:function(e){i=e,t.object[t.Name].mapping.outputMin=i}},max:{configurable:!0,get:function(){return n},set:function(e){n=e,t.object[t.Name].mapping.outputMax=n}}}),t.object[t.Name].mappingObjects=[],Gibber.createProxyProperty(t.object[t.Name],"min",1,0,{min:i,max:n,output:t.output,timescale:t.timescale,dimensions:1}),Gibber.createProxyProperty(t.object[t.Name],"max",1,0,{min:i,max:n,output:t.output,timescale:t.timescale,dimensions:1}),Object.defineProperties(e.object[e.Name],{min:{configurable:!0,get:function(){return s},set:function(e){s=e,t.object[t.Name].mapping.inputMin=s}},max:{configurable:!0,get:function(){return o},set:function(e){o=e,t.object[t.Name].mapping.inputMax=o}}}),t.object[t.Name].invert=function(){t.object[t.Name].mapping.invert()},"undefined"==typeof t.object.mappings&&(t.object.mappings=[]),t.object.mappings.push(mapping),"undefined"==typeof e.object.mappings&&(e.object.mappings=[]),e.object.mappings.push(mapping),Gibber.defineSequencedProperty(t.object[t.Name],"invert"),mapping},defineSequencedProperty:function(t,e,i){var n,s,o=t[e];!t.seq&&Gibber.Audio&&(t.seq=Gibber.Audio.Seqs.Seq({doNotStart:!0,scale:t.scale,priority:i,target:t})),o.seq=function(r,a){var h={key:e,values:$.isArray(r)||null!==r&&"function"!=typeof r&&"number"==typeof r.length?r:[r],durations:$.isArray(a)?a:"undefined"!=typeof a?[a]:null,target:t,priority:i};return"undefined"!=typeof n&&(n.shouldStop=!0,t.seq.seqs.splice(s,1)),t.seq.add(h),s=t.seq.seqs.length-1,n=t.seq.seqs[s],null===h.durations&&t.seq.autofire.push(n),Object.defineProperties(o.seq,{values:{configurable:!0,get:function(){return t.seq.seqs[s].values},set:function(i){Array.isArray(i)||(i=[i]),"note"===e&&t.seq.scale&&(i=makeNoteFunction(i,t.seq)),t.seq.seqs[s].values=i}},durations:{configurable:!0,get:function(){return t.seq.seqs[s].durations},set:function(e){Array.isArray(e)||(e=[e]),t.seq.seqs[s].durations=e}}}),t.seq.isRunning||(t.seq.offset=Gibber.Clock.time(t.offset),t.seq.start(!0,i)),t},o.seq.stop=function(){n.shouldStop=!0},o.seq.start=function(){n.shouldStop=!1,t.seq.timeline[0]=[n],t.seq.nextTime=0,t.seq.isRunning||t.seq.start(!1,i)}},defineRampedProperty:function(t,e){var i,n=t[e],s=e.slice(1);n.ramp=function(e,n,o){return arguments.length<2?(console.err("ramp requires at least two arguments: target and time."),void 0):("undefined"==typeof o&&(o=n,n=e,e=t[s]()),i&&i(),"object"!=typeof e?t[s]=Line(e,n,o):e.retrigger(n,Gibber.Clock.time(o)),i=future(function(){t[s]=n},o),t)}},createProxyMethods:function(t,e){for(var i=0;i<e.length;i++)Gibber.defineSequencedProperty(t,e[i])},defineProperty:function(t,e,i,n,s,o,r){var a="object"==typeof t[e]?t[e].valueOf():t[e],h=e.charAt(0).toUpperCase()+e.slice(1),u=function(i){var n=u;return i&&(t[e]=i,n=t),n};s=o?s||t.mappingProperties[e]:null,$.extend(u,s),$.extend(u,{propertyName:e,Name:h,value:a,type:"property",object:t,targets:[],valueOf:function(){return u.value},toString:function(){return u.value.toString()},oldSetter:t.__lookupSetter__(e),oldGetter:t.__lookupGetter__(e),oldMappingObjectGetter:t.__lookupGetter__(h),oldMappingObjectSetter:t.__lookupSetter__(h)}),Object.defineProperty(t,e,{configurable:!0,get:function(){return u},set:function(e){if("function"!=typeof e&&("object"!=typeof e||"mapping"!==e.type)||"property"!==e.type&&"mapping"!==e.type){o&&t[u.Name]&&"undefined"!=typeof t[u.Name].mapping&&t[u.Name].mapping.remove&&t[u.Name].mapping.remove(!0);var i=e;if(u.oldSetter){var n=u.oldSetter.call(t,e);"undefined"!=typeof n&&(i=n)}u.value=i}else Gibber.createMappingObject(u,e);return t}}),i&&Gibber.defineSequencedProperty(t,e,r),n&&Gibber.defineRampedProperty(t,e),o&&Object.defineProperty(t,u.Name,{configurable:!0,get:function(){return"function"==typeof u.oldMappingObjectGetter&&u.oldMappingObjectGetter(),u},set:function(e){t[u.Name]=e,"function"==typeof mapping.oldMappingObjectSetter&&mapping.oldMappingObjectSetter(e)}})},createProxyProperty:function(t,e,i,n,s,o,r){o=o===!1?!1:!0,Gibber.defineProperty(t,e,i,n,s,o,r)},createProxyProperties:function(t,e,i,n){var s="undefined"==typeof i?!0:i,o="undefined"==typeof n?!0:n;t.gibber=!0,t.mappingProperties=e,t.mappingObjects=[];for(var r in e)e[r].doNotProxy||Gibber.createProxyProperty(t,r,s,o,e[r])}};Gibber.Utilities=_dereq_("./utilities")(Gibber),Gibber.mappings=_dereq_("./mappings")(Gibber),module.exports=Gibber}()},{"./dollar":1,"./mappings":3,"./utilities":4}],3:[function(t,e){e.exports=function(t){var e={audio:{graphics:function(e,i){"undefined"==typeof i.object.track&&(i.object.track={});var n,s="undefined"!=typeof i.object.track[i.propertyName]?i.object.track[i.propertyName]:new t.Audio.Core.Proxy2(i.object,i.propertyName),o=new t.Audio.Core.OnePole({a0:.005,b1:.995});return i.object.track=s,n=e.object[e.Name].mapping=t.Audio.Core.Binops.Map(s,e.min,e.max,i.min,i.max,e.output,i.wrap),o.input=n,e.object[e.propertyName]=o,n.proxy=s,n.op=o,n.remove=function(t){t||(e.object[e.propertyName]=e.object[e.Name].mapping.getValue()),delete e.object[e.Name].mapping},n},"interface":function(e,i){var n,s="undefined"!=typeof i.track?i.track:new t.Audio.Core.Proxy2(i.object,i.name),o=new t.Audio.Core.OnePole({a0:.005,b1:.995}),r=e.max-e.min,a=(e.object[e.propertyName]-e.min)/r,h=i.min+(i.max-i.min)*a;if(i.object.setValue&&i.object.setValue(h),i.track=s,n=e.object[e.Name].mapping=t.Audio.Core.Binops.Map(s,e.min,e.max,i.min,i.max,e.output,i.wrap),o.input=n,e.object[e.propertyName]=o,n.proxy=s,n.op=o,n.remove=function(t){t||(e.object[e.propertyName]=n.getValue()),delete n},"undefined"!=typeof i.object.label){for(var u="",c=0;c<i.targets.length;c++){var l=i.targets[c];u+=l[0].object.name+"."+l[1],c!==i.targets.length-1&&(u+=" & ")}i.object.label=u}return n.replace=function(t,i,n){s.setInput(t),-1===t[n].targets.indexOf(e)&&t[n].targets.push([e,e.Name])},n},audio:function(e,i){var n,s;return"undefined"!=typeof i.object.track?(n=i.object.track,n.count++):(n=new t.Audio.Core.Proxy2(i.object,i.propertyName),n.count=1),i.object.track=n,e.object[e.propertyName]=t.Audio.Core.Binops.Map(n,e.min,e.max,i.min,i.max),s=e.object[e.Name].mapping=e.object[e.propertyName],s.remove=function(t){t||(e.object[e.propertyName]=s.getValue()),s.op&&s.op.remove(),delete e.object[e.Name].mapping},s.replace=function(i,n,o){var r=new t.Audio.Core.Proxy2(i,n);s.input=r,i[o].targets&&-1===i[o].targets.indexOf(e)&&i[o].targets.push([e,e.Name])},s},audioOut:function(e,i){var n;n=t.Audio.Core.Binops.Map(null,e.min,e.max,0,1,0),e.object[e.propertyName]=e.object[e.Name].mapping=n,"undefined"!=typeof i.object.track?(n.follow=i.object.track,n.follow.count++):(n.follow=new t.Audio.Analysis.Follow({input:i.object,useAbsoluteValue:!0}),n.follow.count=1),i.object.track=n.input=n.follow,n.remove=function(t){t||(e.object[e.propertyName]=e.object[e.Name].mapping.getValue()),n.bus&&n.bus.disconnect(),n.follow&&(n.follow.count--,0===n.follow.count&&(delete i.object.track,n.follow.remove())),delete e.object[e.Name].mapping},n.replace=function(t,i,s){n.follow.input=t,-1===t[s].targets.indexOf(e)&&t[s].targets.push([e,e.Name])};var s=n.follow.bufferSize;return Object.defineProperty(e.object[e.Name],"env",{configurable:!0,get:function(){return s},set:function(e){s=t.Clock.time(e),n.follow.bufferSize=s}}),n}},graphics:{graphics:function(e,i){var n,s=t.Audio.Core.Binops.Map(i.object[i.propertyName],e.min,e.max,i.min,i.max,e.output,i.wrap),o=s.getValue.bind(s);return s.getValue=function(){return s.callback(i.object[i.propertyName],e.min,e.max,i.min,i.max,e.output,i.wrap),o()},n=e.object[e.Name].mapping=s,e.object.mod?e.object.mod(e.propertyName,n,"="):e.modObject.mod(e.modName,n,"="),n.remove=function(){e.object.mod?e.object.removeMod(e.propertyName):e.modObject.removeMod(e.modName),e.object[e.propertyName]=e.object[e.Name].mapping.getValue(),delete e.object[e.Name].mapping},n.replace=function(t){n.input=t},n},"interface":function(e,i){var n,s=t.Audio.Core.Binops.Map(i.object[i.name],e.min,e.max,i.min,i.max,e.output,i.wrap);"undefined"==typeof i.object.functions&&(i.object.functions={},i.object.onvaluechange=function(){for(var t in i.object.functions)i.object.functions[t]()}),n=e.object[e.Name].mapping=s,e.mapping.from=i;var o=e.propertyName+" <- "+i.object.propertyName+"."+i.Name;if(i.object.functions[o]=function(){var t=n.callback(i.object[i.name],e.min,e.max,i.min,i.max,e.output,i.wrap);e.object[e.Name].oldSetter.call(e.object[e.Name],t)},n.replace=function(){},n.remove=function(){console.log("mapping removed"),delete i.object.functions[o]},i.object.setValue&&i.object.setValue(e.object[e.propertyName]),"undefined"!=typeof i.object.label){for(var r="",a=0;a<i.targets.length;a++){var h=i.targets[a];r+=h[0].object.propertyName+"."+h[1],a!==i.targets.length-1&&(r+=" & ")}i.object.label=r}return n},audio:function(e,i){var n;n=e.object[e.Name].mapping=t.Audio.Core.Binops.Map(null,e.min,e.max,i.min,i.max,e.output,i.wrap),n.follow="undefined"!=typeof i.object.track?i.object.track:new t.Audio.Core.Follow({input:i.object[i.propertyName],useAbsoluteValue:!1}),i.object.track=e.object[e.Name].mapping.follow,n.input=n.follow,n.bus=new t.Audio.Core.Bus2({amp:0}).connect(),n.connect(n.bus),n.replace=function(t,i,s){n.follow.input=t,-1===t[s].targets.indexOf(e)&&t[s].targets.push([e,e.Name])};var s=n.follow.bufferSize;return Object.defineProperty(e.object[e.Name],"env",{get:function(){return s},set:function(e){s=t.Clock.time(e),n.follow.bufferSize=s}}),e.object.mod?e.object.mod(e.propertyName,n,"="):e.modObject.mod(e.modName,n,"="),n.remove=function(){this.bus.disconnect(),this.follow&&(this.follow.count--,0===this.follow.count&&(delete i.object.track,this.follow.remove())),e.object.mod?e.object.removeMod(e.propertyName):e.modObject.removeMod(e.modName),delete e.object[e.Name].mapping},n},audioOut:function(i,n){if("undefined"!=typeof i.object[i.Name].mapping)return console.log("REPLACING MAPPING"),s.replace(n.object,n.propertyName,n.Name),s;var s=i.object[i.Name].mapping=t.Audio.Core.Binops.Map(null,i.min,i.max,0,1,0);"undefined"!=typeof n.object.track?(s.follow=n.object.track,s.follow.count++):(s.follow=new t.Audio.Core.Follow({input:n.object}),s.follow.count=1),n.object.track=s.follow;var o=s.follow.bufferSize;return Object.defineProperty(i.object[i.Name],"env",{configurable:!0,get:function(){return o},set:function(e){o=t.Clock.time(e),s.follow.bufferSize=o}}),s.input=s.follow,s.bus=new t.Audio.Core.Bus2({amp:0}).connect(),s.connect(s.bus),s.replace=function(e,o,r){if(e[r].timescale===n.timescale){var a=s.follow.input[n.Name].targets.indexOf(i);a>=-1&&s.follow.input[n.Name].targets.splice(a,1),s.follow.input=e,-1===e[r].targets.indexOf(i)&&e[r].targets.push([i,i.Name])}else s.bus.disconnect(),s.follow.remove(),t.createMappingObject(i,e)},i.object.mod?i.object.mod(i.propertyName,s,"="):i.modObject?i.modObject.mod(i.modName,s,"="):!function(){var t=s;i.object.update=function(){i.object[i.propertyName](t.getValue())}}(),s.remove=function(){this.bus.disconnect(),this.follow&&(this.follow.count--,0===this.follow.count&&(delete n.object.track,this.follow.remove())),i.object.mod?i.object.removeMod(i.propertyName):i.modObject?i.modObject.removeMod(i.modName):console.log("removing update "),i.object.mappings.splice(i.object.mappings.indexOf(s),1),n.object.mappings.splice(n.object.mappings.indexOf(s),1);var t=i.object[i.Name].targets,o=t.indexOf(e);-1!==o&&t.splice(o,1),delete i.object[i.Name].mapping},s}},notation:{graphics:function(e,i){var n,s=t.Audio.Core.Binops.Map(i.object[i.propertyName],e.min,e.max,i.min,i.max,e.output,i.wrap),o=s.getValue.bind(s);return s.getValue=function(){return s.callback(i.object[i.propertyName],e.min,e.max,i.min,i.max,e.output,i.wrap),o()},n=e.object[e.Name].mapping=s,e.object.mod?e.object.mod(e.propertyName,n,"="):e.modObject.mod(e.modName,n,"="),n.remove=function(){e.object.mod?e.object.removeMod(e.propertyName):e.modObject.removeMod(e.modName),e.object[e.propertyName]=e.object[e.Name].mapping.getValue(),delete e.object[e.Name].mapping},n.replace=function(t){n.input=t},n},"interface":function(e,i){var n,s=t.Audio.Core.Binops.Map(i.object[i.propertyName],e.min,e.max,i.min,i.max,e.output,i.wrap);"undefined"==typeof i.object.functions&&(i.object.functions={},i.object.onvaluechange=function(){for(var t in i.object.functions)i.object.functions[t]()}),n=e.object[e.Name].mapping=s,e.mapping.from=i;var o=e.propertyName+" <- "+i.object.propertyName+"."+i.Name;if(i.object.functions[o]=function(){var t=n.callback(i.object[i.propertyName],e.min,e.max,i.min,i.max,e.output,i.wrap);e.object[e.Name].oldSetter.call(e.object[e.Name],t)},n.replace=function(){},n.remove=function(){console.log("mapping removed"),delete i.object.functions[o]},i.object.setValue&&i.object.setValue(e.object[e.propertyName]),"undefined"!=typeof i.object.label){for(var r="",a=0;a<i.targets.length;a++){var h=i.targets[a];r+=h[0].object.propertyName+"."+h[1],a!==i.targets.length-1&&(r+=" & ")}i.object.label=r}return n},audio:function(e,i){var n;n=e.object[e.Name].mapping=t.Audio.Core.Binops.Map(null,e.min,e.max,i.min,i.max,e.output,i.wrap),"undefined"!=typeof i.object.track&&i.object.track.input===i.object.properties[i.propertyName]?(n.follow=i.object.track,n.follow.count++):(n.follow=new t.Audio.Core.Follow({input:i.object.properties[i.propertyName],useAbsoluteValue:!1}),n.follow.count=1),i.object.track=e.object[e.Name].mapping.follow,n.input=n.follow,n.bus=new t.Audio.Core.Bus2({amp:0}).connect(),n.connect(n.bus),n.replace=function(t,i,s){n.follow.input=t,-1===t[s].targets.indexOf(e)&&t[s].targets.push([e,e.Name])};var s=n.follow.bufferSize;return Object.defineProperty(e.object[e.Name],"env",{get:function(){return s},set:function(e){s=t.Clock.time(e),n.follow.bufferSize=s}}),n.update=function(){e.object[e.propertyName](n.getValue())},n.text=e.object,t.Environment.Notation.add(n),n.remove=function(){this.bus.disconnect(),this.follow&&(this.follow.count--,0===this.follow.count&&(delete i.object.track,this.follow.remove())),t.Environment.Notation.remove(n),delete e.object[e.Name].mapping},n},audioOut:function(e,i){if("undefined"!=typeof e.object[e.Name].mapping)return n.replace(i.object,i.propertyName,i.Name),n;var n=e.object[e.Name].mapping=t.Audio.Core.Binops.Map(null,e.min,e.max,0,1,0);console.log("MAPPING",i),"undefined"!=typeof i.object.track&&i.object.track.input===i.object.properties[i.propertyName]?(n.follow=i.object.track,n.follow.count++):(n.follow=new t.Audio.Core.Follow({input:i.object,useAbsoluteValue:!0}),n.follow.count=1),i.object.track=n.follow;var s=n.follow.bufferSize;return Object.defineProperty(e.object[e.Name],"env",{configurable:!0,get:function(){return s},set:function(e){s=t.Clock.time(e),n.follow.bufferSize=s}}),n.input=n.follow,n.bus=new t.Audio.Core.Bus2({amp:0}).connect(),n.connect(n.bus),n.replace=function(s,o,r){if(s[r].timescale===i.timescale){var a=n.follow.input[i.Name].targets.indexOf(e);a>=-1&&n.follow.input[i.Name].targets.splice(a,1),n.follow.input=s,-1===s[r].targets.indexOf(e)&&s[r].targets.push([e,e.Name])}else n.bus.disconnect(),n.follow.remove(),t.createMappingObject(e,s)},n.update=function(){e.object[e.propertyName](n.getValue())},n.text=e.object,t.Environment.Notation.add(n),n.remove=function(){this.bus.disconnect(),this.follow&&(this.follow.count--,0===this.follow.count&&(delete i.object.track,this.follow.remove())),t.Environment.Notation.remove(n),delete e.object[e.Name].mapping},n}}};return e},e.exports.outputCurves={LINEAR:0,LOGARITHMIC:1}},{}],4:[function(t,e){e.exports=function(t){"use strict";var e=[],i=!1,n=(t.dollar,t.Audio?t.Audio.Core:null,t.Clock,Math.random,{seq:function(){var t=arguments[0],e=typeof t,i=null;return"object"===e&&Array.isArray(t)&&(e="array"),i},random:function(){for(var t={},e=null,i=0;i<arguments.length;i+=2)t[""+arguments[i]]={repeat:arguments[i+1],count:0};return this.pick=function(){var i,s,o=0;return this[e]&&(s=this[e]),null!==e&&t[s].count++<=t[s].repeat?(i=e,t[s].count>=t[s].repeat&&(t[s].count=0,e=null)):(i=n.rndi(0,this.length-1),o=this[i],"undefined"!=typeof t[""+o]?(t[""+o].count=1,e=i):e=null),i},this},random2:function(){for(var t={},e=null,i=this,s=0;s<arguments.length;s+=2)t[""+arguments[s]]={repeat:arguments[s+1],count:0};return this.pick=function(){var s,o,r=0;return i[e]&&(o=i[e]),null!==e&&t[o].count++<=t[o].repeat?(s=e,t[o].count>=t[o].repeat&&(t[o].count=0,e=null)):(s=n.rndi(0,i.length-1),r=i[s],"undefined"!=typeof t[""+r]?(t[""+r].count=1,e=s):e=null),i[s]},this.pick},choose:function(t){var e=null;if(isNaN(t)&&(t=1),1!==t){for(var i=[],s=0;t>s;s++)i[s]=this[n.rndi(0,this.length-1)];e=i}else e=this[n.rndi(0,this.length-1)];return e},future:function(e,i){var n=0,s=t.Audio.Seqs.Seq(function(){1===n&&(e(),s.stop(),s.disconnect()),n++},t.Audio.Clock.time(i));return function(){s.stop(),s.disconnect()}},shuffle:function(t){for(var e,i,n=t.length;n;e=parseInt(Math.random()*n),i=t[--n],t[n]=t[e],t[e]=i);},solo:function(t){var s=Array.prototype.slice.call(arguments,0);if(t){i&&n.solo();for(var o=0;o<s.length;o++){var r=s[o];r.fx.length>0&&(s[o]=r.fx[r.fx.length-1])}for(var a=0;a<Master.inputs.length;a++){var h=s.indexOf(Master.inputs[a].value),u=Master.inputs[a].value,c=u.name;-1===h&&"polyseq"!==c&&"Seq"!==c&&(Master.inputs[a]._amp=Master.inputs[a].amp,Master.inputs[a].amp=0,e.push(Master.inputs[a]))}i=!0}else{for(var a=0;a<e.length;a++)e[a].amp=e[a]._amp;e.length=0,i=!1}},fill:function(t,e){isNaN(t)&&(t=16),"function"!=typeof e&&(e=Rndf()),e=e.bind(this);for(var i=0;t>i;i++)this[i]=e();return this},merge:function(){for(var t=[],e=0;e<this.length;e++){var i=this[e];if(Array.isArray(i))for(var n=0;n<i.length;n++)t.push(i[n]);else t.push(i)}return t},weight:function(){var t=Array.prototype.slice.call(arguments,0);return this.pick=function(){for(var e=this[0],i=0,s=n.rndf(),o=0;o<t.length;o++)if(i+=t[o],i>s){e=o;break}return e},this},gibberArray:function(){},rndf:function(t,e,i,s){if(s="undefined"==typeof s?!0:s,"undefined"==typeof i&&"object"!=typeof t){1==arguments.length?(e=arguments[0],t=0):2==arguments.length?(t=arguments[0],e=arguments[1]):(t=0,e=1);var o=e-t,r=Math.random(),a=o*r;return t+a}var h=[],u=[];"undefined"==typeof i&&(i=e||t.length);for(var c=0;i>c;c++){var l;if("object"==typeof arguments[0])l=arguments[0][rndi(0,arguments[0].length-1)];else if(s)l=n.rndf(t,e);else{for(l=n.rndf(t,e);u.indexOf(l)>-1;)l=n.rndf(t,e);u.push(l)}h.push(l)}return h},Rndf:function(){{var t,e,i,s;Math.random}return 0===arguments.length?(t=0,e=1):1===arguments.length?(e=arguments[0],t=0):2===arguments.length?(t=arguments[0],e=arguments[1]):3===arguments.length?(t=arguments[0],e=arguments[1],i=arguments[2]):(t=arguments[0],e=arguments[1],i=arguments[2],s=arguments[3]),function(){var o,r,a;return r="function"==typeof t?t():t,a="function"==typeof e?e():e,o="undefined"==typeof i?n.rndf(r,a):n.rndf(r,a,i,s)}},rndi:function(t,e,i,s){var o;if(0===arguments.length?(t=0,e=1):1===arguments.length?(e=arguments[0],t=0):2===arguments.length?(t=arguments[0],e=arguments[1]):(t=arguments[0],e=arguments[1],i=arguments[2],s=arguments[3]),o=e-t,i>o&&(s=!0),"undefined"==typeof i)return o=e-t,Math.round(t+Math.random()*o);for(var r=[],a=[],h=0;i>h;h++){var u;if(s)u=n.rndi(t,e);else{for(u=n.rndi(t,e);a.indexOf(u)>-1;)u=n.rndi(t,e);a.push(u)}r.push(u)}return r},Rndi:function(){{var t,e,i,s,o;Math.random,Math.round}return 0===arguments.length?(t=0,e=1):1===arguments.length?(e=arguments[0],t=0):2===arguments.length?(t=arguments[0],e=arguments[1]):3===arguments.length?(t=arguments[0],e=arguments[1],i=arguments[2]):(t=arguments[0],e=arguments[1],i=arguments[2],s=arguments[3]),o=e-t,"number"==typeof i&&i>o&&(s=!0),function(){var o,r,a;return r="function"==typeof t?t():t,a="function"==typeof e?e():e,o="undefined"==typeof i?n.rndi(r,a):n.rndi(r,a,i,s)}},"export":function(t){t.rndi=n.rndi,t.rndf=n.rndf,t.Rndi=n.Rndi,t.Rndf=n.Rndf,t.future=n.future,t.solo=n.solo},init:function(){Array.prototype.random=Array.prototype.rnd=n.random,Array.prototype.weight=n.weight,Array.prototype.fill=n.fill,Array.prototype.choose=n.choose,Array.prototype.merge=n.merge}});return n}},{}],5:[function(t,e){!function(){function i(t){return 0>t?-1:1}var n=t("jquery"),s={extend:function(t,e){for(var i in e){{i.split(".")}t[i]=e[i]instanceof Array&&e[i].length<100?e[i].slice(0):e[i]}return t},isAndroid:function(){var t=navigator.userAgent.toLowerCase();return t.indexOf("android")>-1}(),keyCodeToChar:{8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause/Break",20:"Caps Lock",27:"Esc",32:"Space",33:"Page Up",34:"Page Down",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",45:"Insert",46:"Delete",48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",65:"A",66:"B",67:"C",68:"D",69:"E",70:"F",71:"G",72:"H",73:"I",74:"J",75:"K",76:"L",77:"M",78:"N",79:"O",80:"P",81:"Q",82:"R",83:"S",84:"T",85:"U",86:"V",87:"W",88:"X",89:"Y",90:"Z",91:"Windows",93:"Right Click",96:"Numpad 0",97:"Numpad 1",98:"Numpad 2",99:"Numpad 3",100:"Numpad 4",101:"Numpad 5",102:"Numpad 6",103:"Numpad 7",104:"Numpad 8",105:"Numpad 9",106:"Numpad *",107:"Numpad +",109:"Numpad -",110:"Numpad .",111:"Numpad /",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"Num Lock",145:"Scroll Lock",182:"My Computer",183:"My Calculator",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},panels:[],mouseDown:!1,useTouch:"ontouchstart"in document.documentElement,widgets:[]};s.Presets={dictionary:"undefined"==typeof localStorage.interfacejs?{}:JSON.parse(localStorage.interfacejs),save:function(t){for(var e=[],i=0;i<s.panels.length;i++){var n=s.panels[i];e[i]=[];for(var o=0;o<n.children.length;o++){var r=n.children[o];if("object"==typeof r.children){for(var a=[],h=0;h<r.children.length;h++)a[h]=r.children[h].value;e[i][o]=a}else e[i][o]=r.value}this.dictionary[t]=e,localStorage.interfacejs=JSON.stringify(this.dictionary)}},load:function(t){for(var e=this.dictionary[t],i=0;i<s.panels.length;i++)for(var n=s.panels[i],o=0;o<n.children.length;o++){var r=n.children[o];if("object"==typeof r.children)for(var a=0;a<r.children.length;a++)r.children[a].setValue(e[i][o][a]);else r.setValue(e[i][o])}},list:function(){return Object.keys(this.dictionary)}},s.Panel=function(){var t=this,e=arguments.length>=1?arguments[0].container:void 0;s.extend(this,{type:"Panel",active:!0,children:[],shouldDraw:[],fps:30,useRelativeSizesAndPositions:!0,labelSize:"12px",font:"normal 12px Helvetica",serializeMe:["fps","useRelativeSizesAndPositions","labelSize","font","background","fill","stroke","backgroundColor"],container:function(){if("undefined"==typeof e){n("body").css({margin:0,padding:0});var t=n('<div id="container">');return t.css({width:n(window).width(),height:n(window).height(),display:"block",margin:0,padding:0,position:"absolute",left:0,top:0}),n("body").append(t),t}return e}(),canvas:document.createElement("canvas"),touchEvent:function(e){if(t.active){"undefined"==typeof e.changedTouches&&e.originalEvent&&(e.changedTouches=e.originalEvent.changedTouches);for(var i=0;i<e.changedTouches.length;i++)for(var n=e.changedTouches.item(i),s=0;s<t.children.length;s++)n.x=n.pageX-t.x,n.y=n.pageY-t.y,n.type=e.type,t.children[s].touchEvent(n);e.preventDefault()}},mouseEvent:function(e){if(t.active){"mousedown"===e.type?s.mouseDown=!0:"mouseup"===e.type&&(s.mouseDown=!1);for(var i={x:e.offsetX||e.pageX-t.x,y:e.offsetY||e.pageY-t.y,type:e.type},n=0;n<t.children.length;n++)t.children[n].mouseEvent(i)}},init:function(){var t=n(this.container).offset();this.width=n(this.container).width(),this.height=n(this.container).height(),this.x=t.left,this.y=t.top,isNaN(this.x)&&(this.x=0),isNaN(this.y)&&(this.y=0),n(this.canvas).attr({width:this.width,height:this.height}),n(this.container).css({"user-select":"none","-webkit-user-select":"none"}),n(this.container).append(this.canvas),this.ctx=this.canvas.getContext("2d"),this.ctx.translate(.5,.5),this.ctx.lineWidth=1,s.useTouch?(n(this.container).on("touchstart",this.touchEvent),n(this.container).on("touchmove",this.touchEvent),n(this.container).on("touchend",this.touchEvent)):(n(this.container).on("mousedown",this.mouseEvent),n(this.container).on("mousemove",this.mouseEvent),n(this.container).on("mouseup",this.mouseEvent)),n(this.container).css({outline:"none"}),n(this.container).attr("tabindex",5),n(this.container).on("keydown",this.keydown.bind(this)),n(this.container).on("keyup",this.keyup.bind(this))},keydown:function(t){for(var e=0;e<this.children.length;e++)this.children[e].onkeydown&&this.children[e].onkeydown(t)},keyup:function(t){for(var e=0;e<this.children.length;e++)this.children[e].onkeyup&&this.children[e].onkeyup(t)},draw:function(){if(this.active){for(var t=0;t<this.shouldDraw.length;t++)this.shouldDraw[t].draw();this.shouldDraw.length=0}n.publish("/draw")},getWidgetWithName:function(t){for(var e=0;e<this.children.length;e++)if(this.children[e].name===t)return this.children[e]},redoBoundaries:function(){var t=n(this.container).offset();this.width=n(this.container).width(),this.height=n(this.container).height(),this.x=t.left,this.y=t.top,isNaN(this.x)&&(this.x=0),isNaN(this.y)&&(this.y=0),n(this.canvas).attr({width:this.width,height:this.height}),this.ctx.translate(.5,.5),this.ctx.lineWidth=1,this.refresh()},refresh:function(){if(this.active){this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height);for(var t=0;t<this.children.length;t++)this.children[t].draw()
}},add:function(){for(var t=0;t<arguments.length;t++){var e=arguments[t];e.panel=this,e.canvas=this.canvas,e.container=this.container,e.ctx=this.ctx,this.children.push(e),e._init&&!e.added&&e._init(),e.oninit&&!e.added&&e.oninit(),e.draw(),e.added=!0,"function"==typeof e.add&&e.add()}},clear:function(){this.ctx.clearRect(0,0,this.width,this.height),this.children.length=0},remove:function(t){if(this.ctx.clearRect(t._x(),t._y(),t._width(),t._height()),"undefined"!=typeof t.children&&"XY"!==t.type)for(var e=0;e<t.children.length;e++)this.children.splice(this.children.indexOf(t.children[e]),1),s.widgets.splice(s.widgets.indexOf(t.children[e]),1);else this.children.indexOf(t)>-1&&(this.children.splice(this.children.indexOf(t),1),s.widgets.splice(s.widgets.indexOf(t),1),"function"==typeof t.remove&&t.remove())}}),"undefined"!=typeof arguments[0]&&s.extend(this,arguments[0]),this.backgroundColor&&this.setBackgroundColor(this.backgroundColor),this.init(),this.timer=setInterval(function(){t.draw()},Math.round(1e3/this.fps));var i="#000",o="#666",r="#999",a="transparent",t=this,h=this.useRelativeSizesAndPositions;Object.defineProperties(this,{useRelativeSizesAndPositions:{get:function(){return h},set:function(t){if(t!==h)if(h=t,t===!1)for(var e=0;e<this.children.length;e++){var i=this.children[e];i.bounds=[Math.round(i.x*this.width),Math.round(i.y*this.height),Math.round(i.width*this.width),Math.round(i.height*this.height)]}else for(var e=0;e<this.children.length;e++){var i=this.children[e];i.bounds=[i.x/this.width,i.y/this.height,i.width/this.width,i.height/this.height]}this.refresh()}},background:{get:function(){return a},set:function(t){a=t,n(this.container).css({backgroundColor:a})}},childBackground:{get:function(){return i},set:function(e){i=e,t.refresh()}},childStroke:{get:function(){return r},set:function(e){r=e,t.refresh()}},childFill:{get:function(){return o},set:function(e){o=e,t.refresh()}}}),arguments[0]&&(arguments[0].childBackground&&(this.childBackground=arguments[0].childBackground),arguments[0].childFill&&(this.childFill=arguments[0].childFill),arguments[0].childStroke&&(this.childStroke=arguments[0].childStroke)),s.panels.push(this)};var o=function(t){switch(t){case"mousedown":return"touchmousedown";case"mousemove":return"touchmousemove";case"mouseup":return"touchmouseup";default:return t}},r=function(t){switch(t){case"touchstart":return"touchmousedown";case"touchmove":return"touchmousemove";case"touchend":return"touchmouseup";default:return t}},a=0,h={hasFocus:!1,requiresFocus:!0,min:0,max:1,value:0,lastValue:null,name:null,events:{ontouchstart:null,ontouchmove:null,ontouchend:null,onmousedown:null,onmousemove:null,onmouseup:null,ontouchmousedown:null,ontouchmousemove:null,ontouchmouseup:null,onvaluechange:null,onboundschange:null}};s.Widget={init:function(t){this.added=!1,s.extend(this,h),"undefined"==typeof t&&(t={}),this.name=t.name||this.type+"_"+a++,this.target="OSC",this.key="/"+this.name,s.extend(this,t),this.bounds&&(this.x=t.bounds[0],this.y=t.bounds[1],this.width=t.bounds[2],this.height=t.bounds[3]),this.colors&&(this.background=t.colors[0],this.fill=t.colors[1],this.stroke=t.colors[2]),this.focusedTouches=[],this.value&&this.setValue(this.value,!0);{var e=this.bounds||[this.x,this.y,this.width,this.height],i=this.x,n=this.y,o=this.width,r=this.height;this.value}Object.defineProperties(this,{bounds:{configurable:!0,get:function(){return e},set:function(t){e=t,this.x=e[0],this.y=e[1],this.width=e[2],this.height=e[3],this.onboundschange&&this.onboundschange()}},x:{configurable:!0,get:function(){return i},set:function(t){this.clear(),i=t,this.onboundschange&&this.onboundschange(),this.refresh()}},y:{configurable:!0,get:function(){return n},set:function(t){this.clear(),n=t,this.onboundschange&&this.onboundschange(),this.refresh()}},width:{configurable:!0,get:function(){return o},set:function(t){this.clear(),o=t,this.onboundschange&&this.onboundschange(),this.refresh()}},height:{configurable:!0,get:function(){return r},set:function(t){this.clear(),r=t,this.onboundschange&&this.onboundschange(),this.refresh()}}}),s.widgets.push(this)},clear:function(){this.panel&&this.panel.ctx.clearRect(this._x(),this._y(),this._width(),this._height())},refresh:function(){this.panel&&-1===this.panel.shouldDraw.indexOf(this)&&this.panel.shouldDraw.push(this)},setValue:function(t,e){var i=this.max-this.min,n=t;this.value=t,0!==this.min||1!==this.max?(n-=this.min,this._value=n/i):this._value=this.value,e||this.refresh()},hitTest:function(t){return t.x>=this._x()&&t.x<=this._x()+this._width()&&t.y>=this._y()&&t.y<=this._y()+this._height()?!0:!1},mouseEvent:function(t){var e=this.hitTest(t),i=o(t.type);(e||this.hasFocus||!this.requiresFocus)&&("mousedown"===t.type&&(this.hasFocus=!0),this[t.type]&&this[t.type](t,e),this["on"+t.type]&&this["on"+t.type](t,e),this["on"+i]&&this["on"+i](t,e)),"mouseup"===t.type&&(this.hasFocus=!1)},touchEvent:function(t){var e=this.hitTest(t),i=r(t.type);if((e||this.hasFocus||!this.requiresFocus)&&("touchstart"===t.type&&(this.focusedTouches.push(t),this.hasFocus=!0),this[t.type]&&this[t.type](t,e),this["on"+t.type]&&this["on"+t.type](t,e),this["on"+i]&&this["on"+i](t,e)),"touchend"===t.type)for(var n=0;n<this.focusedTouches.length;n++)if(this.focusedTouches[n].id===t.id){this.focusedTouches.splice(n,1),0===this.focusedTouches.length&&(this.hasFocus=!1);break}},draw:function(){},sendTargetMessage:function(){if(this.target&&this.key)if("OSC"===this.target){if(s.OSC)if("undefined"==typeof this.values){var t="string"==typeof this.value?"s":"f";s.OSC.send(this.key,t,[this.value])}else if("undefined"==typeof this.sendValues){for(var t="",e=0;e<this.values.length;e++)t+="string"==typeof this.value?"s":"f";s.OSC.send(this.key,t,this.values)}else this.sendValues()}else"MIDI"===this.target?s.MIDI&&"undefined"==typeof this.values&&s.MIDI.send(this.key[0],this.key[1],this.key[2],this.value):"function"==typeof this.target[this.key]?this.target[this.key](this.values||this.value):this.target[this.key]=this.values||this.value},_background:function(){return this.background||this.panel.childBackground},_stroke:function(){return this.stroke||this.panel.childStroke},_fill:function(){return this.fill||this.panel.childFill},_x:function(){return this.panel.useRelativeSizesAndPositions?Math.floor(this.x*this.panel.width):this.x},_y:function(){return this.panel.useRelativeSizesAndPositions?Math.floor(this.y*this.panel.height):this.y},_width:function(){return this.panel.useRelativeSizesAndPositions?Math.floor(this.width*this.panel.width):this.width},_height:function(){return this.panel.useRelativeSizesAndPositions?Math.floor(this.height*this.panel.height):this.height},_font:function(){var t=this.font||this.panel.font;return t},label:null,_serializeMe:["background","stroke","fill","x","y","width","height","value","label","onmousedown","onmousemove","onmouseup","ontouchmousedown","ontouchmousemove","ontouchmouseup","ontouchstart","ontouchmove","ontouchend","onvaluechange","name","type","target","key"]},s.HBox=function(){s.extend(this,{type:"HBox",children:[],proxyPanel:{active:!0,x:0,y:0,width:1,height:1,shouldDraw:[],useRelativeSizesAndPositions:!0},add:function(){for(var t=0;t<arguments.length;t++){var e=arguments[t];-1===this.children.indexOf(e)&&this.children.push(e),e.panel=this.proxyPanel,e.ctx=this.panel.ctx}this.layout(),this.draw()},layout:function(){for(var t=this.width/this.children.length/this.width,e=0,i=0;i<this.children.length;i++){var n=this.children[i];n.x=e+this.x,n.y=this.y*(1/this.height),n.width=t,n.height=1,e+=t}return this},draw:function(){this.proxyPanel.width=this._width(),this.proxyPanel.height=this._height();for(var t=0;t<this.children.length;t++)this.children[t].draw()},refresh:function(){for(var t=0;t<this.proxyPanel.shouldDraw.length;t++)this.proxyPanel.shouldDraw[t].draw();this.proxyPanel.shouldDraw.length=0},mouseEvent:function(t){for(var e=0;e<this.children.length;e++){{this.children[e]}this.children[e].mouseEvent(t)}},touchEvent:function(t){for(var e=0;e<this.children.length;e++){{this.children[e]}this.children[e].touchEvent(t)}},_init:function(){this.useRelativeSizesAndPositions=this.panel.useRelativeSizesAndPositions,this.proxyPanel.width=this._width(),this.proxyPanel.height=this._height(),this.proxyPanel.__proto__=this.panel,n.subscribe("/draw",this.refresh.bind(this)),Object.defineProperties(this,{bounds:{configurable:!0,get:function(){return bounds},set:function(t){bounds=t,this.x=bounds[0],this.y=bounds[1],this.width=bounds[2],this.height=bounds[3],this.layout(),this.draw()}}})}}).init(arguments[0])},s.HBox.prototype=s.Widget,s.VBox=function(){s.extend(this,{type:"VBox",children:[],proxyPanel:{active:!0,x:0,y:0,width:1,height:1,shouldDraw:[],useRelativeSizesAndPositions:!0},add:function(){for(var t=0;t<arguments.length;t++){var e=arguments[t];this.children.push(e),e.panel=this.proxyPanel,e.ctx=this.panel.ctx}this.layout(),this.draw()},layout:function(){for(var t=this.height/this.children.length,e=0,i=0;i<this.children.length;i++){var n=this.children[i];n.x=this.x,n.y=(this.y+e)*(1/this.height),n.width=1,n.height=t*(1/this.height),e+=t}return this},draw:function(){this.proxyPanel.width=this._width(),this.proxyPanel.height=this._height();for(var t=0;t<this.children.length;t++)this.children[t].draw()},refresh:function(){for(var t=0;t<this.proxyPanel.shouldDraw.length;t++)this.proxyPanel.shouldDraw[t].draw();this.proxyPanel.shouldDraw.length=0},mouseEvent:function(t){for(var e=0;e<this.children.length;e++){{this.children[e]}this.children[e].mouseEvent(t)}},touchEvent:function(t){t.x-=this._x(),t.y-=this._y();for(var e=0;e<this.children.length;e++){{this.children[e]}this.children[e].touchEvent(t)}},_init:function(){this.useRelativeSizesAndPositions=this.panel.useRelativeSizesAndPositions,this.proxyPanel.width=this._width(),this.proxyPanel.height=this._height(),this.proxyPanel.__proto__=this.panel,n.subscribe("/draw",this.refresh.bind(this)),Object.defineProperties(this,{bounds:{configurable:!0,get:function(){return bounds},set:function(t){bounds=t,this.x=bounds[0],this.y=bounds[1],this.width=bounds[2],this.height=bounds[3],this.layout(),this.draw()}}})}}).init(arguments[0])},s.VBox.prototype=s.Widget,s.Slider=function(){s.extend(this,{type:"Slider",isVertical:!0,serializeMe:["isVertical"],draw:function(){var t=this._x(),e=this._y(),i=this._width(),n=this._height();this.ctx.fillStyle=this._background(),this.ctx.fillRect(t,e,i,n),this.ctx.fillStyle=this._fill(),this.isVertical?this.ctx.fillRect(t,e+n-this._value*n,i,this._value*n):this.ctx.fillRect(t,e,i*this._value,n),this.label&&(this.ctx.fillStyle=this._stroke(),this.ctx.textBaseline="middle",this.ctx.textAlign="center",this.ctx.font=this._font(),this.ctx.fillText(this.label,t+i/2,e+n/2)),this.ctx.strokeStyle=this._stroke(),this.ctx.strokeRect(t,e,i,n)},changeValue:function(t,e){(this.hasFocus||!this.requiresFocus)&&(this._value=this.isVertical?1-e/this._height():t/this._width(),this._value<0?this._value=0:this._value>1&&(this._value=1),this.value=this.min+(this.max-this.min)*this._value,this.value!==this.lastValue&&(this.sendTargetMessage(),this.onvaluechange&&this.onvaluechange(),this.refresh(),this.lastValue=this.value))},mousedown:function(t,e){e&&s.mouseDown&&this.changeValue(t.x-this._x(),t.y-this._y())},mousemove:function(t,e){e&&s.mouseDown&&this.changeValue(t.x-this._x(),t.y-this._y())},mouseup:function(t,e){e&&s.mouseDown&&this.changeValue(t.x-this._x(),t.y-this._y())},touchstart:function(t,e){e&&this.changeValue(t.x-this._x(),t.y-this._y())},touchmove:function(t,e){e&&this.changeValue(t.x-this._x(),t.y-this._y())},touchend:function(t,e){e&&this.changeValue(t.x-this._x(),t.y-this._y())}}).init(arguments[0])},s.Slider.prototype=s.Widget,s.Crossfader=function(){s.extend(this,{type:"Crossfader",crossfaderWidth:30,serializeMe:["crossfaderWidth"],_value:.5,draw:function(){var t=this._x(),e=this._y(),i=this._width(),n=this._height();this.ctx.fillStyle=this._background(),this.ctx.fillRect(t,e,i,n),this.ctx.fillStyle=this._fill(),this.ctx.fillRect(t+(i-this.crossfaderWidth)*this._value,e,this.crossfaderWidth,n),this.ctx.strokeStyle=this._stroke(),this.ctx.strokeRect(t,e,i,n)},changeValue:function(t){(this.hasFocus||!this.requiresFocus)&&(this._value=t/this._width(),this._value<0?this._value=0:this._value>1&&(this._value=1),this.value=this.min+(this.max-this.min)*this._value,this.value!==this.lastValue&&(this.sendTargetMessage(),this.onvaluechange&&this.onvaluechange(),this.refresh(),this.lastValue=this.value))},mousedown:function(t){this.changeValue(t.x-this._x(),t.y-this._y())},mousemove:function(t){this.changeValue(t.x-this._x(),t.y-this._y())},mouseup:function(t){this.changeValue(t.x-this._x(),t.y-this._y())},touchstart:function(t,e){e&&this.changeValue(t.x-this._x(),t.y-this._y())},touchmove:function(t,e){e&&this.changeValue(t.x-this._x(),t.y-this._y())},touchend:function(t,e){e&&this.changeValue(t.x-this._x(),t.y-this._y())}}).init(arguments[0])},s.Crossfader.prototype=s.Widget,s.Button=function(){s.extend(this,{type:"Button",_value:0,serializeMe:["mode","label"],mode:"toggle",isMouseOver:!1,isTouchOver:!1,label:null,requiresFocus:!1,draw:function(){var t=this._x(),e=this._y(),i=this._width(),n=this._height();this.ctx.fillStyle=this._value?this._fill():this._background(),this.ctx.fillRect(t,e,i,n),null!==this.label&&(this.ctx.fillStyle=this._stroke(),this.ctx.textBaseline="middle",this.ctx.textAlign="center",this.ctx.font=this._font(),this.ctx.fillText(this.label,t+i/2,e+n/2)),this.ctx.strokeStyle=this._stroke(),this.ctx.strokeRect(t,e,i,n)},changeValue:function(){(this.hasFocus||!this.requiresFocus)&&(this._value=!this._value,this.value=this._value?this.max:this.min,(this.value!==this.lastValue||"contact"===this.mode)&&(this.sendTargetMessage(),this.onvaluechange&&this.onvaluechange(),this.draw(),this.lastValue=this.value))},setValue:function(t,e){var i=this.max-this.min,n=t;this.value=t,0!==this.min||1!==this.max?(n-=this.min,this._value=n/i):this._value=this.value,this.lastValue=this.value,e||"contact"===this.mode||this.refresh()},mousedown:function(t,e){if(e&&s.mouseDown&&(this.isMouseOver=!0,this.changeValue(),"contact"===this.mode)){var i=this;setTimeout(function(){i._value=0,i.draw()},75)}},mousemove:function(t,e){if(!this.requiresFocus&&e&&s.mouseDown&&!this.isMouseOver)if(this.isMouseOver=!0,"contact"!==this.mode)this.changeValue();else{this._value=1,this.draw();var i=this;setTimeout(function(){i._value=0,i.draw()},75)}else!e&&this.isMouseOver&&(console.log("moved off!"),this.isMouseOver=!1)},mouseup:function(){"momentary"===this.mode&&(this.changeValue(),this.isMouseOver=!1)},touchstart:function(t,e){if(e&&(this.isTouchOver=!0,this.changeValue(),"contact"===this.mode)){var i=this;setTimeout(function(){i._value=0,i.draw()},75)}},touchmove:function(t,e){if(this.requiresFocus||!e||this.isTouchOver)!e&&this.isTouchOver&&(this.isTouchOver=!1);else if(this.isTouchOver=!0,"contact"!==this.mode)this.changeValue();else{this._value=1,this.draw();var i=this;setTimeout(function(){i._value=0,i.draw()},75)}},touchend:function(){this.isTouchOver=!1,"momentary"===this.mode&&this.changeValue()}}).init(arguments[0])},s.Button.prototype=s.Widget,s.ButtonV=function(){s.extend(this,{type:"ButtonV",_value:0,serializeMe:["mode","label"],mode:"toggle",isMouseOver:!1,isTouchOver:!1,label:null,points:[{x:0,y:0},{x:0,y:1},{x:1,y:1},{x:1,y:0},{x:0,y:0}],textLocation:{x:.5,y:.5},draw:function(){var t=this._x(),e=this._y(),i=0,n=this._width(),s=this._height();for(this.ctx.fillStyle=this._value?this._fill():this._background(),this.ctx.beginPath(),this.ctx.strokeStyle=this._stroke(),i;i<this.points.length;i++)0===i?this.ctx.moveTo(t+this.points[i].x*n,e+this.points[i].y*s):this.ctx.lineTo(t+this.points[i].x*n,e+this.points[i].y*s);this.ctx.lineTo(t+this.points[0].x*n,e+this.points[0].y*s),this.ctx.closePath(),this.ctx.fill(),this.ctx.stroke(),null!==this.label&&(this.ctx.fillStyle=this._stroke(),this.ctx.textBaseline="middle",this.ctx.textAlign="center",this.ctx.font=this._font(),this.ctx.fillText(this.label,t+n*this.textLocation.x,e+s*this.textLocation.y))},changeValue:function(){(this.hasFocus||!this.requiresFocus)&&(this._value=!this._value,this.value=this._value?this.max:this.min,(this.value!==this.lastValue||"contact"===this.mode)&&(this.sendTargetMessage(),this.onvaluechange&&this.onvaluechange(),this.draw(),this.lastValue=this.value))},hitTest:function(t){var e=this._width(),i=this._height(),n=this._x(),s=this._y();if(t.x>=n&&t.x<=n+e&&t.y>=s&&t.y<=s+i){var o=0,r=this.points,a=0;for(o;o<r.length-1;o++)if(r[o+1].x>r[o].x){if(r[o].x*e+n<=t.x&&t.x<r[o+1].x*e+n){var h=(r[o+1].y-r[o].y)/(r[o+1].x-r[o].x)*i/e*(t.x-r[o].x*e+n)+r[o].y*i+s;h-t.y<0&&a++}}else if(r[o+1].x<r[o].x&&r[o].x*e+n>=t.x&&t.x>r[o+1].x*e+n){var h=(r[o+1].y-r[o].y)/(r[o+1].x-r[o].x)*i/e*(t.x-r[o].x*e+n)+r[o].y*i+s;h-t.y<0&&a++}if(a%2==1)return!0}return!1},setValue:function(t,e){var i=this.max-this.min,n=t;this.value=t,0!==this.min||1!==this.max?(n-=this.min,this._value=n/i):this._value=this.value,this.lastValue=this.value,e||"contact"===this.mode||this.refresh()},mousedown:function(t,e){if(e&&s.mouseDown&&(this.isMouseOver=!0,this.changeValue(),"contact"===this.mode)){var i=this;setTimeout(function(){i._value=0,i.draw()},75)}},mousemove:function(t,e){if(!this.requiresFocus&&e&&s.mouseDown&&!this.isMouseOver)if(this.isMouseOver=!0,"contact"!==this.mode)this.changeValue();else{this._value=1,this.draw();var i=this;setTimeout(function(){i._value=0,i.draw()},75)}else if(!e&&this.isMouseOver)if(this.isMouseOver=!1,"contact"!==this.mode)this.changeValue();else{this._value=1,this.draw();var i=this;setTimeout(function(){i._value=0,i.draw()},75)}},mouseup:function(){"momentary"===this.mode&&(this.requiresFocus||!this.requiresFocus&&this.isMouseOver)&&(this.isMouseOver=!1,this.changeValue())},touchstart:function(t,e){if(e&&(this.isTouchOver=!0,this.changeValue(),"contact"===this.mode)){var i=this;setTimeout(function(){i._value=0,i.draw()},75)}},touchmove:function(t,e){if(this.requiresFocus||!e||this.isTouchOver)if(!e&&this.isTouchOver)if(this.isTouchOver=!1,"contact"!==this.mode)this.changeValue();else{this._value=1,this.draw();var i=this;setTimeout(function(){i._value=0,i.draw()},75)}else!e&&this.isTouchOver&&(this.isTouchOver=!1);else if(this.isTouchOver=!0,"contact"!==this.mode)this.changeValue();else{this._value=1,this.draw();var i=this;setTimeout(function(){i._value=0,i.draw()},75)}},touchend:function(){(this.momentary&&this.requiresFocus||!this.requiresFocus&&this.isTouchOver)&&this.changeValue(),this.isTouchOver=!1}}).init(arguments[0])},s.ButtonV.prototype=s.Widget,s.Piano=function(){s.extend(this,{type:"Piano",_value:0,serializeMe:["mode","label"],mode:"toggle",isMouseOver:!1,isTouchOver:!1,label:null,startletter:"C",startoctave:3,endletter:"C",endoctave:5,target:null,noteLabels:!1,_initialized:!1,keyMap:["Z","S","X","D","C","V","G","B","H","N","J","M",","],children:[],play:function(t,e){isNaN(e)&&(e=4410),"undefined"!=typeof Gibber&&(e=Gibber.Clock.time(e));var i=this.children[t];i&&(i.changeValue(),future(function(){1==i._value&&i.changeValue()},e))},onkeyup:function(t){var e=s.keyCodeToChar[t.keyCode],i=this.keyMap.indexOf(e),n=this.children[i];"undefined"!=typeof n&&1==n._value&&n.changeValue()},onkeydown:function(t){var e=s.keyCodeToChar[t.keyCode],i=this.keyMap.indexOf(e),n=this.children[i];"undefined"!=typeof n&&0==n._value&&n.changeValue()},onvaluechange:function(){this.values=[this.frequency,this.value]},onboundschange:function(){this._initialized&&this.placeKeys()},draw:function(){for(var t=0;t<this.children.length;t++)this.children[t].refresh();return this},placeKeys:function(){var t=(this._x(),this._y(),this._width(),this._height(),this.startoctave),e=0,i=0,n=["0","C","C#/Db","D","D#/Eb","E","F","F#/Gb","G","G#/Ab","A","A#/Bb","B"],o=["0","C","C#","D","D#","E","F","F#","G","G#","A","A#","B"],r=[0,1,2,2,3,3,4,5,5,6,6,7,7],a=i+12*this.endoctave-(e+12*this.startoctave)+1,h=r[i]+7*this.endoctave-(r[e]+7*this.startoctave)+1,u=0;if(this._initialized){this.clear();for(var c=this.children.length-1;c>=0;c--){var l=this.children.pop();this.panel.remove(l)}}for(var c=1;13>c;c++)this.startletter===o[c]&&(e=c),this.endletter===o[c]&&(i=c);[2,4,7,9,11].indexOf(i)>-1&&h--;for(var c=0;a-1>c;c++){var f,d,p,g,m,v;switch(e){case 1:f=[{x:0,y:0},{x:.6,y:0},{x:.6,y:.625},{x:1,y:.625},{x:1,y:1},{x:0,y:1},{x:0,y:0}],p=this._fill(),d={x:.5,y:.75},g=this._background(),m=[u/h*this.width+this.x,this.y,this.width/h,this.height],v=this.noteLabels?n[e]+t:null;break;case 2:f=[{x:.1,y:0},{x:.7,y:0},{x:.7,y:1},{x:.1,y:1},{x:.1,y:0}],d={x:.3925,y:.5},p=this._background(),g=this._fill(),m=[(u-.5)/h*this.width+this.x,this.y,this.width/h,.625*this.height],v=this.noteLabels?n[e]:null;break;case 3:f=[{x:.2,y:0},{x:.8,y:0},{x:.8,y:.625},{x:1,y:.625},{x:1,y:1},{x:0,y:1},{x:0,y:.625},{x:.2,y:.625},{x:.2,y:0}],d={x:.5,y:.75},p=this._fill(),g=this._background(),m=[u/h*this.width+this.x,this.y,this.width/h,this.height],v=this.noteLabels?n[e]:null;break;case 4:f=[{x:.3,y:0},{x:.9,y:0},{x:.9,y:1},{x:.3,y:1},{x:.3,y:0}],d={x:.6075,y:.5},p=this._background(),g=this._fill(),m=[(u-.5)/h*this.width+this.x,this.y,this.width/h,.625*this.height],v=this.noteLabels?n[e]:null;break;case 5:f=[{x:1,y:0},{x:.4,y:0},{x:.4,y:.625},{x:0,y:.625},{x:0,y:1},{x:1,y:1},{x:1,y:0}],d={x:.5,y:.75},p=this._fill(),g=this._background(),m=[u/h*this.width+this.x,this.y,this.width/h,this.height],v=this.noteLabels?n[e]:null;break;case 6:f=[{x:0,y:0},{x:.57142857,y:0},{x:.57142857,y:.625},{x:1,y:.625},{x:1,y:1},{x:0,y:1},{x:0,y:0}],d={x:.5,y:.75},p=this._fill(),g=this._background(),m=[u/h*this.width+this.x,this.y,this.width/h,this.height],v=this.noteLabels?n[e]:null;break;case 7:f=[{x:.07142857,y:0},{x:.64285714,y:0},{x:.64285714,y:1},{x:.07142857,y:1},{x:.07142857,y:0}],d={x:.3925,y:.5},p=this._background(),g=this._fill(),m=[(u-.5)/h*this.width+this.x,this.y,this.width/h,.625*this.height],v=this.noteLabels?n[e]:null;break;case 8:f=[{x:.14285714,y:0},{x:.71428571,y:0},{x:.71428571,y:.625},{x:1,y:.625},{x:1,y:1},{x:0,y:1},{x:0,y:.625},{x:.14285714,y:.625},{x:.14285714,y:0}],d={x:.5,y:.75},p=this._fill(),g=this._background(),m=[u/h*this.width+this.x,this.y,this.width/h,this.height],v=this.noteLabels?n[e]:null;break;case 9:f=[{x:.21428571,y:0},{x:.78571428,y:0},{x:.78571428,y:1},{x:.21428571,y:1},{x:.21428571,y:0}],p=this._background(),g=this._fill(),m=[(u-.5)/h*this.width+this.x,this.y,this.width/h,.625*this.height],v=this.noteLabels?n[e]:null;break;case 10:f=[{x:.28571428,y:0},{x:.85714285,y:0},{x:.85714285,y:.625},{x:1,y:.625},{x:1,y:1},{x:0,y:1},{x:0,y:.625},{x:.28571428,y:.625},{x:.28571428,y:0}],p=this._fill(),g=this._background(),d={x:.5,y:.75},m=[u/h*this.width+this.x,this.y,this.width/h,this.height],v=this.noteLabels?n[e]:null;break;case 11:f=[{x:.35714285,y:0},{x:.92857142,y:0},{x:.92857142,y:1},{x:.35714285,y:1},{x:.35714285,y:0}],p=this._background(),g=this._fill(),d={x:.6075,y:.5},m=[(u-.5)/h*this.width+this.x,this.y,this.width/h,.625*this.height],v=this.noteLabels?n[e]:null;break;case 12:f=[{x:1,y:0},{x:.42857142,y:0},{x:.42857142,y:.625},{x:0,y:.625},{x:0,y:1},{x:1,y:1},{x:1,y:0}],p=this._fill(),g=this._background(),d={x:.5,y:.75},m=[u/h*this.width+this.x,this.y,this.width/h,this.height],v=this.noteLabels?n[e]:null}var y=new s.ButtonV({points:f,textLocation:d,target:this.target,onvaluechange:this.onvaluechange,frequency:261.626*Math.pow(2,(e+12*t-49)/12),background:p,fill:g,stroke:this._stroke(),bounds:m,label:v,requiresFocus:!1,mode:"momentary"});-1===[2,4,7,9,11].indexOf(e)&&u++,this.children.push(y),this.panel.add(y),e++,e>12&&(e=1,t++)}if(2==e||4==e||7==e||9==e||11==e)var x=new s.ButtonV({points:[{x:.166,y:0},{x:.5,y:0},{x:.5,y:1},{x:.166,y:1},{x:.166,y:0}],target:this.target,onvaluechange:this.onvaluechange,background:this._background(),frequency:261.626*Math.pow(2,(e+12*t-49)/12),bounds:[(u-.5)/h*this.width+this.x,this.y,this.width/h,.625*this.height],label:this.noteLabels?n[e]:null,stroke:this._stroke(),requiresFocus:!1,mode:"momentary"});else if(1==e)var x=new s.ButtonV({textLocation:{x:.5,y:.75},target:this.target,onvaluechange:this.onvaluechange,frequency:261.626*Math.pow(2,(e+12*t-49)/12),background:this._fill(),fill:this._background(),stroke:this._stroke(),bounds:[u/h*this.width+this.x,this.y,this.width/h,this.height],label:this.noteLabels?n[e]+t:null,requiresFocus:!1,mode:"momentary"});else if(4==e)var x=new s.ButtonV({textLocation:{x:.5,y:.75},target:this.target,onvaluechange:this.onvaluechange,frequency:261.626*Math.pow(2,(e+12*t-49)/12),background:this._fill(),fill:this._background(),stroke:this._stroke(),bounds:[u/h*this.width+this.x,this.y,this.width/h,this.height],label:this.noteLabels?n[e]:null,requiresFocus:!1,mode:"momentary"});else var x=new s.ButtonV({points:[{x:1,y:0},{x:.33,y:0},{x:.33,y:.625},{x:0,y:.625},{x:0,y:1},{x:1,y:1},{x:1,y:0}],textLocation:{x:.5,y:.75},target:this.target,onvaluechange:this.onvaluechange,frequency:261.626*Math.pow(2,(e+12*t-49)/12),background:this._fill(),fill:this._background(),stroke:this._stroke(),bounds:[u/h*this.width+this.x,this.y,this.width/h,this.height],label:this.noteLabels?n[e]:null,requiresFocus:!1,mode:"momentary"});this.children.push(x),this.panel.add(x),this._initialized=!0},_init:function(){this.placeKeys()}}).init(arguments[0])},s.Piano.prototype=s.Widget,s.Knob=function(){s.extend(this,{type:"Knob",_value:0,serializeMe:["usesRotation","knobBuffer"],knobBuffer:3,lastPosition:0,usesRotation:!0,draw:function(){var t=this._x(),e=this._y(),i=this._width(),n=(this._height(),i/2);this.ctx.clearRect(t,e,2*n,2*n),this.ctx.strokeStyle=this._stroke(),this.ctx.fillStyle=this._background();var s=.6*Math.PI,o=.4*Math.PI;if(this.ctx.beginPath(),this.ctx.arc(t+n,e+n,n-this.knobBuffer,s,o,!1),this.ctx.arc(t+n,e+n,.3*(n-this.knobBuffer),o,s,!0),this.ctx.closePath(),this.ctx.fill(),this.ctx.fillStyle=this._fill(),this.centerZero){var r,a=1.5*Math.PI;r=this._value>=.5?Math.PI*(1.5+1.8*(this._value-.5)):Math.PI*(1.5-.9*(1-2*this._value)),this._value>1.8*Math.PI&&(this._value-=1.8*Math.PI),this.ctx.beginPath(),this.ctx.arc(t+n,e+n,n-this.knobBuffer,a,r,this._value<.5),this.ctx.arc(t+n,e+n,.3*(n-this.knobBuffer),r,a,this._value>.5),this.ctx.closePath(),this.ctx.fill()}else{if(this.isInverted)var h=Math.PI*(.4-1.8*this._value);else{var h=.6*Math.PI+1.8*this._value*Math.PI;h>2*Math.PI&&(h-=2*Math.PI)}this.ctx.beginPath(),this.isInverted?(this.ctx.arc(t+n,e+n,n-this.knobBuffer,o,h,!0),this.ctx.arc(t+n,e+n,.3*(n-this.knobBuffer),h,o,!1)):(this.ctx.arc(t+n,e+n,n-this.knobBuffer,s,h,!1),this.ctx.arc(t+n,e+n,.3*(n-this.knobBuffer),h,s,!0)),this.ctx.closePath(),this.ctx.fill()}this.ctx.beginPath(),this.ctx.arc(t+n,e+n,n-this.knobBuffer,s,o,!1),this.ctx.arc(t+n,e+n,.3*(n-this.knobBuffer),o,s,!0),this.ctx.closePath(),this.ctx.stroke(),null!==this.label&&(this.ctx.fillStyle=this._stroke(),this.ctx.textBaseline="middle",this.ctx.textAlign="center",this.ctx.font=this._font(),this.ctx.fillText(this.label,t+n,e+2.25*n))},setValue:function(t,e){var i=this.max-this.min,n=t;this.lastValue=this.value,this.value=t,0!==this.min||1!==this.max?(n-=this.min,this._value=n/i):this._value=this.value,this.value!==this.lastValue&&(this.sendTargetMessage(),this.onvaluechange&&this.onvaluechange(),this.refresh(),this.lastValue=this.value),e||this.refresh()},changeValue:function(t,e){if(this.hasFocus||!this.requiresFocus){var i=this._width()/2;if(this.lastValue=this.value,this.usesRotation){var n=i-t,s=i-e,o=Math.PI+Math.atan2(s,n);this._value=(o+1.5*Math.PI)%(2*Math.PI)/(2*Math.PI),this.lastRotationValue>.8&&this._value<.2?this._value=1:this.lastRotationValue<.2&&this._value>.8&&(this._value=0)}else-1!=this.lastPosition&&(this._value-=(e-this.lastPosition)/(2*i));this._value>1&&(this._value=1),this._value<0&&(this._value=0),this.lastRotationValue=this._value,this.lastPosition=e;var r=this.max-this.min;this.value=this.min+this._value*r,this.value!==this.lastValue&&(this.sendTargetMessage(),this.onvaluechange&&this.onvaluechange(),this.refresh(),this.lastValue=this.value)}},hitTest:function(t){return t.x>=this._x()&&t.x<this._x()+this._width()&&t.y>=this._y()&&t.y<this._y()+this._width()?!0:!1},mousedown:function(t){this.lastPosition=t.y-this._y(),this.changeValue(t.x-this._x(),t.y-this._y())},mousemove:function(t){this.changeValue(t.x-this._x(),t.y-this._y())},mouseup:function(){},touchstart:function(t){this.lastPosition=t.y-this._y(),this.changeValue(t.x-this._x(),t.y-this._y())},touchmove:function(t){this.changeValue(t.x-this._x(),t.y-this._y())},touchend:function(){},_init:function(){var t=this.width,e=this.height;Object.defineProperty(this,"width",{configurable:!0,get:function(){return t},set:function(i){this.clear(),t=e=i,this.refresh()}}),Object.defineProperty(this,"height",{configurable:!0,get:function(){return e},set:function(t){e=t}})}}).init(arguments[0])},s.Knob.prototype=s.Widget,s.XY=function(){var t=this,e={x:0,y:0},n={x:0,y:0},o={x:0,y:0},a=0;s.extend(this,{type:"XY",_value:0,serializeMe:["childWidth","childHeight","numChildren","usePhysics","values","friction","maxVelocity","detectCollisions","fps"],childWidth:25,childHeight:25,children:[],values:[],_values:[],numChildren:1,usePhysics:!0,friction:.9,activeTouch:null,maxVelocity:10,detectCollisions:!0,touchCount:0,timer:null,fps:30,outputInitialValues:!0,rainbow:function(){for(var t=0;t<this.children.length;t++){var e=this.children[t];e.fill=s.XY.colors[t%s.XY.colors.length]}},remove:function(){this.stopAnimation(),s.widgets.splice(s.widgets.indexOf(this),1)},add:function(){this.usePhysics&&this.startAnimation()},startAnimation:function(){null===this.timer&&(this.timer=setInterval(function(){t.refresh()},1/this.fps*1e3))},stopAnimation:function(){clearInterval(this.timer),this.timer=null},animate:function(){for(var t=(this._x(),this._y(),this._width()),e=this._height(),n=!1,s=0;s<this.children.length;s++){var o=(moveY=!1,this.children[s]);o.x+o.vx<t&&o.x+o.vx>0?o.x+=o.vx:o.x+o.vx>=t&&o.vx>0?o.vx*=-1:o.x+o.vx<=0&&o.vx<0?o.vx*=-1:o.x+=o.vx,o.y+o.vy<e&&o.y+o.vy>0?o.y+=o.vy:o.y+o.vy>=e&&o.vy>0?o.vy*=-1:o.y+o.vy<=0&&o.vy<0?o.vy*=-1:o.y+=o.vy,o.vx*=this.friction,o.vy*=this.friction;var r=o.x/t,a=o.y/e,h=this.max-this.min;(this.values[o.id].x!==r||this.values[o.id].y!==a)&&(this.values[o.id].x=this.min+h*r,this.values[o.id].y=this.min+h*a,n=!0),this.detectCollisions&&(o.collideFlag?o.collideFlag=!1:this.collisionTest(o)),o.vx=Math.abs(o.vx)>this.maxVelocity?this.maxVelocity*i(o.vx):o.vx,o.vy=Math.abs(o.vy)>this.maxVelocity?this.maxVelocity*i(o.vy):o.vy}n&&(this.sendTargetMessage(),this.onvaluechange&&this.onvaluechange())},sendValues:function(){var t="";this._values.length=0;for(var e=0;e<this.values.length;e++)t+="ff",this._values.push(this.values[e].x),this._values.push(this.values[e].y);"OSC"===this.target&&s.OSC&&s.OSC.send(this.key,t,this._values)},collisionTest:function(t){for(var e=2*this.childWidth*2*this.childWidth,i=0;i<this.children.length;i++){var n=this.children[i];if(t.id!==n.id){var s=Math.pow(t.x-n.x,2)+Math.pow(t.y-n.y,2);e>s&&this.collide(t,n)}}},collide:function(t,s){e.x=t.x-s.x,e.y=t.y-s.y,n.x=t.vx-s.vx,n.y=t.vy-s.vy,a=Math.sqrt(Math.pow(e.x,2)+Math.pow(e.y,2)),o.x=e.x/a,o.y=e.y/a;var r=o.x*n.x+o.y*n.y;s.vx=t.vx+r*o.x,s.vy=t.vy+r*o.y,t.vx=s.vx-r*o.x,t.vy=s.vy-r*o.y,s.x-=o.x,s.y-=o.y,t.x+=o.x,t.y+=o.y,t.vx=Math.abs(t.vx)>this.maxVelocity?this.maxVelocity*i(t.vx):t.vx,t.vy=Math.abs(t.vy)>this.maxVelocity?this.maxVelocity*i(t.vy):t.vy,s.vx=Math.abs(s.vx)>this.maxVelocity?this.maxVelocity*i(s.vx):s.vx,s.vy=Math.abs(s.vy)>this.maxVelocity?this.maxVelocity*i(s.vy):s.vy,t.collideFlag=!0,s.collideFlag=!0},draw:function(){var t=this._x(),e=this._y(),i=this._width(),n=this._height();this.usePhysics&&this.animate(),this.ctx.fillStyle=this._background(),this.ctx.strokeStyle=this._stroke(),this.ctx.save(),this.ctx.beginPath(),this.ctx.moveTo(t,e),this.ctx.lineTo(t+i,e),this.ctx.lineTo(t+i,e+n),this.ctx.lineTo(t,e+n),this.ctx.lineTo(t,e),this.ctx.fill(),this.ctx.stroke(),this.ctx.clip(),this.ctx.fillStyle=this._fill();
for(var s=0;s<this.children.length;s++){var o=this.children[s];this.ctx.lineWidth=2,this.ctx.fillStyle=o.fill||this._fill(),this.ctx.beginPath(),this.ctx.arc(t+o.x,e+o.y,this.childWidth,0,2*Math.PI,!0),this.ctx.closePath(),this.ctx.fill(),this.ctx.stroke(),this.ctx.textBaseline="middle",this.ctx.textAlign="center",this.ctx.fillStyle=this._stroke(),this.ctx.font=this._font(),this.ctx.fillText(o.id,t+o.x,e+o.y)}this.ctx.closePath(),this.ctx.restore()},changeValue:function(t,e,i){(this.hasFocus||!this.requiresFocus)&&(t.x=e,t.x<0&&(t.x=0),t.x>this._width()&&(t.x=this._width()),t.y=i,t.y<0&&(t.y=0),t.y>this._height()&&(t.y=this._height()),this.values[t.id].x=e/this._width(),this.values[t.id].y=i/this._height(),this.onvaluechange&&this.onvaluechange(),this.usePhysics||(this.sendTargetMessage(),this.refresh()))},makeChildren:function(){for(var t=0;t<this.numChildren;t++){var e=Math.random()*this._width(),i=Math.random()*this._height();this.children.push({id:t,x:e,y:i,vx:0,vy:0,collideFlag:!1,isActive:!1,lastPosition:null}),this.values.push({x:null,y:null})}},touchEvent:function(t){var e=this.hitTest(t),i=r(t.type);e?("touchstart"===t.type?(this.hasFocus=!0,this.touchCount++,this.trackTouch(t.x-this._x(),t.y-this._y(),t)):this[t.type]&&this[t.type](t,e,t.childID),this["on"+t.type]&&this["on"+t.type](t,e,t.childId),this["on"+i]&&this["on"+i](t,e)):"touchend"===t.type&&(this.touchCount--,0===this.touchCount?this.hasFocus=!1:this.touchCount<0&&(this.touchCount=0),this.touchend(t),this["on"+t.type]&&this["on"+t.type](t,e,t.childId),this["on"+i]&&this["on"+i](t,e))},trackMouse:function(t,e){for(var i=1e4,n=null,s=null,o=0;o<this.children.length;o++){var r=this.children[o],a=Math.abs(r.x-t),h=Math.abs(r.y-e);i>a+h&&(i=a+h,n=r,s=o)}n.isActive=!0,n.vx=0,n.vy=0,null!=n&&this.changeValue(n,t,e),this.activeTouch=n,this.activeTouch.lastTouch=null,this.lastTouched=n},mousedown:function(t){this.hitTest(t)&&this.trackMouse(t.x-this._x(),t.y-this._y())},mousemove:function(t){if(this.hitTest(t)&&null!==this.activeTouch){if(null===this.activeTouch.lastTouch)this.activeTouch.lastTouch={x:t.x-this._x(),y:t.y-this._y()};else{var e={x:t.x-this._x(),y:t.y-this._y()};this.activeTouch.velocity={x:e.x-this.activeTouch.lastTouch.x,y:e.y-this.activeTouch.lastTouch.y},this.activeTouch.lastTouch=e}this.changeValue(this.activeTouch,t.x-this._x(),t.y-this._y())}},mouseup:function(){null!==this.activeTouch&&(this.activeTouch.vx=this.activeTouch.velocity.x,this.activeTouch.vy=this.activeTouch.velocity.y,this.activeTouch.lastTouch=null,this.activeTouch=null);for(var t=0;t<this.children.length;t++)this.children[t].isActive=!1},trackTouch:function(t,e,i){for(var n=1e4,s=null,o=null,r=0;r<this.children.length;r++){var a=this.children[r],h=Math.abs(a.x-t),u=Math.abs(a.y-e);n>h+u&&!a.isActive&&(n=h+u,s=a,o=r)}return s.isActive=!0,s.vx=0,s.vy=0,s.identifier=i.identifier,s.childID=o,null!=s&&this.changeValue(s,t,e),this.lastTouched=s,s.childID},touchstart:function(){},touchmove:function(t){for(var e=0;e<this.children.length;e++)if(_t=this.children[e],t.identifier===_t.identifier){this.changeValue(_t,t.x-this._x(),t.y-this._y());var i={x:t.x-this._x(),y:t.y-this._y()};null!==_t.lastPosition&&(_t.velocity={x:i.x-_t.lastPosition.x,y:i.y-_t.lastPosition.y}),_t.lastPosition=i}},touchend:function(t){for(var e=!1,i=null,n=0;n<this.children.length;n++){var s=this.children[n];t.identifier===s.identifier&&(s.velocity&&(s.vx=s.velocity.x,s.vy=s.velocity.y),s.lastPosition=null,s.isActive=!1,e=!0,i=n.childID)}e&&(this.touchUp=i)},_init:function(){this.makeChildren(),this.outputInitialValues&&this.sendTargetMessage()}}).init(arguments[0]),this.requiresFocus=!1,this.half=this.childWidth/2;var h=this.numChildren;Object.defineProperty(this,"numChildren",{get:function(){return h},set:function(t){for(;t>h;)this.children.push({id:this.children.length,x:Math.random()*this._width(),y:Math.random()*this._height(),vx:0,vy:0,collideFlag:!1,isActive:!1,lastPosition:null}),this.values.push({x:null,y:null}),h++;for(;h>t;)this.chidren.pop(),this.values.pop(),h--;this.refresh(),h=t}})},s.XY.prototype=s.Widget,s.XY.colors=["rgba(255,0,0,.35)","rgba(0,255,0,.35)","rgba(0,0,255,.35)","rgba(0,255,255,.35)","rgba(255,0,255,.35)","rgba(255,255,0,.35)"],s.Menu=function(){s.extend(this,{type:"Menu",_value:0,serializeMe:["options","fontSize"],options:[],fontSize:15,touchEvent:function(t){this.hitTest(t)&&t.stopPropagation()},_init:function(){this.element=n("<select>");for(var t=0;t<this.options.length;t++){var e=n("<option>"+this.options[t]+"</option>");this.element.append(e)}this.element.css({position:"absolute",backgroundColor:this._background(),color:this._stroke(),left:this._x()+this.panel.x,top:this._y()+this.panel.y,width:this._width(),height:this._height(),fontSize:this.fontSize,display:"block",border:"1px solid "+this._stroke()}),this.css&&this.element.css(this.css);var i=this;this.element.change(function(){var t=i.value;i.value=i.element.val(),i.sendTargetMessage(),i.onvaluechange(i.value,t)}),-1!==this.options.indexOf(this.value)?this.element.val(this.value):this.element.val(this.options[0]),n(this.container).append(this.element)}}).init(arguments[0])},s.Menu.prototype=s.Widget,s.Label=function(){s.extend(this,{type:"Label",serializeMe:["size","style","hAlign","vAlign","font"],size:12,style:"normal",hAlign:"center",vAlign:"top",font:"sans-serif",draw:function(){this.ctx.font=this.style+" "+this.size+"px "+this.font,this.ctx.textAlign=this.hAlign,this.ctx.textBaseline=this.vAlign;var t,e,i=this.ctx.measureText(this.lastValue),n={x:0,y:this._y()-this.size/2,width:i.width,height:this.size};switch(this.hAlign){case"center":t=this._x()+this._width()/2,n.x=t-i.width/2;break;case"left":t=this._x(),n.x=t;break;case"right":t=this._x()+this._width(),n.x=t-i.width}switch(this.vAlign){case"middle":e=this._y()+this._height()/2,n.y=e-this.size/2;break;case"top":e=this._y(),n.y=e;break;case"bottom":e=this._y()+this._height(),n.y=e-this.size/2}this.ctx.clearRect(n.x,n.y,n.width,2*n.height),this.ctx.save(),this.ctx.beginPath(),this.ctx.moveTo(this._x(),this._y()),this.ctx.lineTo(this._x()+this._width(),this._y()),this.ctx.lineTo(this._x()+this._width(),this._y()+this._height()),this.ctx.lineTo(this._x(),this._y()+this._height()),this.ctx.lineTo(this._x(),this._y()),this.ctx.closePath(),this.ctx.clip(),this.ctx.fillStyle=this._stroke(),this.ctx.fillText(this.value,t,e),this.ctx.restore(),this.lastValue=this.value}}).init(arguments[0]),this.lastValue=this.value},s.Label.prototype=s.Widget,s.TextField=function(){s.extend(this,{type:"TextField",serializeMe:["fontSize"],fontSize:15,touchEvent:function(t){if(this.hitTest(t)){var e=document.createEvent("TouchEvent");e.initUIEvent("touchstart",!0,!0),e.view=window,e.screenX=t.screenX,e.screenY=t.screenY,e.clientX=t.clientX,e.clientY=t.clientY,e.bubbles=!1,e.view=window,e.altKey=!1,e.ctrlKey=!1,e.shiftKey=!1,e.metaKey=!1,this.element.dispatchEvent(e)}},_init:function(){this.element=n("<input>"),0!==this.value&&this.element.val(this.value),this.element.css({position:"absolute",backgroundColor:this._background(),color:this._fill(),left:this._x()+this.panel.x,top:this._y()+this.panel.y,width:this._width(),height:this._height(),fontSize:this.fontSize,display:"block",border:"1px solid "+this._stroke()}),this.css&&this.element.css(this.css);var t=this;this.element.change(function(){var e=t.value;t.value=t.element.val(),t.sendTargetMessage(),t.onvaluechange(t.value,e)}),n(this.container).append(this.element)}}).init(arguments[0])},s.TextField.prototype=s.Widget,s.MultiSlider=function(){s.extend(this,{type:"MultiSlider",isVertical:!0,serializeMe:["isVertical","count","values"],values:[],_values:[],count:16,draw:function(){var t=this._x(),e=this._y(),i=this._width(),n=this._height(),s=i/this.count;this.ctx.fillStyle=this._background(),this.ctx.fillRect(t,e,i,n),this.ctx.fillStyle=this._fill(),this.ctx.strokeStyle=this._stroke();for(var o=0;o<this.count;o++){var r=o*s+t;this.ctx.fillRect(r,e+n-this._values[o]*n,s,this._values[o]*n),this.ctx.strokeRect(r,e,s,n)}},setValue:function(t,e){this.values[t]=e,this._values[t]=e,this.refresh()},resetValues:function(){for(var t=0;t<this.count;t++)this.values[t]=this.min+(this.max-this.min)*this._values[t],"OSC"!==this.target?this.sendTargetMessage():s.OSC&&s.OSC.send(this.key,"if",[sliderHit,this.values[sliderHit]]),this.onvaluechange&&this.onvaluechange(sliderHit,this.values[sliderHit]);this.refresh()},changeValue:function(t,e){if(this.hasFocus||!this.requiresFocus){var i=this._width(),n=i/this.count,o=Math.floor(t/n);_value=0,_value=1-e/this._height(),0>_value?_value=0:_value>1&&(_value=1),this.values[o]=this.min+(this.max-this.min)*_value,this._values[o]=_value,"OSC"!==this.target?this.sendTargetMessage():s.OSC&&s.OSC.send(this.key,"if",[o,this.values[o]]),this.onvaluechange&&this.onvaluechange(o,this.values[o]),this.refresh()}},mousedown:function(t,e){e&&s.mouseDown&&this.changeValue(t.x-this._x(),t.y-this._y())},mousemove:function(t,e){e&&s.mouseDown&&this.changeValue(t.x-this._x(),t.y-this._y())},mouseup:function(t,e){e&&s.mouseDown&&this.changeValue(t.x-this._x(),t.y-this._y())},touchstart:function(t,e){e&&this.changeValue(t.x-this._x(),t.y-this._y())},touchmove:function(t,e){e&&this.changeValue(t.x-this._x(),t.y-this._y())},touchend:function(t,e){e&&this.changeValue(t.x-this._x(),t.y-this._y())},onvaluechange:function(){}}).init(arguments[0]);var t=this.x,e=this.y,i=this.width,n=this.height,o=[t,e,i,n],r=this.count;delete this.bounds,Object.defineProperties(this,{x:{get:function(){return t},set:function(e){t=e,this.refresh()}},y:{get:function(){return e},set:function(t){e=t,this.refresh()}},width:{get:function(){return i},set:function(t){i=t,this.refresh()}},height:{get:function(){return n},set:function(t){n=t,this.refresh()}},bounds:{get:function(){return o},set:function(s){o=s,t=o[0],e=o[1],i=o[2],n=o[3],this.refresh()}},count:{get:function(){return r},set:function(t){r=t,this.refresh()}}})},s.MultiSlider.prototype=s.Widget,s.MultiButton=function(){s.extend(this,{type:"MultiButton",mode:"toggle",serializeMe:["mode","rows","columns","requiresFocus"],rows:8,values:[],_values:[],lastValues:[],mouseOver:null,columns:8,draw:function(){var t=this._x(),e=this._y(),i=this._width(),n=this._height(),s=i/this.columns,o=n/this.rows;this.ctx.strokeStyle=this._stroke();for(var r=0;r<this.rows;r++)for(var a=0;a<this.columns;a++){var h=t+a*s,u=e+r*o,c=r*this.columns+a;this.ctx.fillStyle=this._values[c]?this._fill():this._background(),this.ctx.fillRect(h,u,s,o),this.ctx.strokeRect(h,u,s,o)}},setValue:function(t,e,i){var n=t*this.columns+e;this._values[n]=this.values[n]=this.lastValues[n]=i,this.draw()},changeValue:function(t,e){if(this.hasFocus||!this.requiresFocus){var i=this._width(),n=this._height(),o=i/this.columns,r=Math.floor(t/o),a=n/this.rows,h=Math.floor(e/a),u=h*this.columns+r;if(u!==this.mouseOver){if(this._values[u]=!this._values[u],this.values[u]=this._values[u]?this.max:this.min,(this.values[u]!==this.lastValues[u]||"contact"===this.mode)&&("OSC"!==this.target?this.sendTargetMessage():s.OSC&&s.OSC.send(this.key,"iif",[h,r,this.values[u]]),this.onvaluechange&&this.onvaluechange(h,r,this.values[u]),this.draw(),this.lastValues[u]=this.values[u],"contact"===this.mode)){var c=this;setTimeout(function(){c._values[u]=0,c.draw()},75)}this.mouseOver=u}}},mousedown:function(t,e){e&&s.mouseDown&&this.changeValue(t.x-this._x(),t.y-this._y())},mousemove:function(t,e){e&&s.mouseDown&&this.changeValue(t.x-this._x(),t.y-this._y())},mouseup:function(t,e){e&&s.mouseDown&&this.changeValue(t.x-this._x(),t.y-this._y()),this.mouseOver=null},touchstart:function(t,e){e&&this.changeValue(t.x-this._x(),t.y-this._y())},touchmove:function(t,e){e&&this.changeValue(t.x-this._x(),t.y-this._y())},touchend:function(t,e){e&&this.changeValue(t.x-this._x(),t.y-this._y())}}).init(arguments[0]),this.requiresFocus=!1;var t=this.x,e=this.y,i=this.width,n=this.height,o=[t,e,i,n];rows=this.rows,columns=this.columns,delete this.bounds,Object.defineProperties(this,{x:{get:function(){return t},set:function(e){t=e,this.refresh()}},y:{get:function(){return e},set:function(t){e=t,this.refresh()}},width:{get:function(){return i},set:function(t){i=t,this.refresh()}},height:{get:function(){return n},set:function(t){n=t,this.refresh()}},bounds:{get:function(){return o},set:function(s){o=s,t=o[0],e=o[1],i=o[2],n=o[3],this.refresh()}},rows:{get:function(){return rows},set:function(t){rows=t,this.refresh()}},columns:{get:function(){return columns},set:function(t){columns=t,this.refresh()}}})},s.MultiButton.prototype=s.Widget,s.Accelerometer=function(){var t=this,e=9.80665;s.extend(this,{type:"Accelerometer",serializeMe:["delay"],delay:100,min:0,max:1,values:[0,0,0],update:function(e){var i=e.acceleration;t.x=t.values[0]=t.min+(0-t.hardwareMin+i.x)/t.hardwareRange*t.max,t.y=t.values[1]=t.min+(0-t.hardwareMin+i.y)/t.hardwareRange*t.max,t.z=t.values[2]=t.min+(0-t.hardwareMin+i.z)/t.hardwareRange*t.max,"undefined"!=typeof t.onvaluechange&&t.onvaluechange(t.x,t.y,t.z),t.sendTargetMessage()},start:function(){return window.addEventListener("devicemotion",this.update,!0),this},stop:function(){return window.removeEventListener("devicemotion",this.update),this}}).init(arguments[0]),s.isAndroid?(this.hardwareMin=e,this.hardwareMax=e):(this.hardwareMin=-2.307*e,this.hardwareMax=2.307*e),this.hardwareRange=this.hardwareMax-this.hardwareMin},s.Accelerometer.prototype=s.Widget,s.Orientation=function(){var t=this;s.extend(this,{type:"Orientation",serializeMe:["delay"],delay:100,values:[0,0,0],update:function(e){t.roll=t.values[0]=t.min+(90+e.gamma)/180*t.max,t.pitch=t.values[1]=t.min+(180+e.beta)/360*t.max,t.yaw=t.values[2]=t.min+e.alpha/360*t.max,isNaN(e.webkitCompassHeading)||(t.heading=t.min+e.webkitCompassHeading/360*t.max),t.sendTargetMessage(),"undefined"!=typeof t.onvaluechange&&t.onvaluechange(t.pitch,t.roll,t.yaw,t.heading)},start:function(){return window.addEventListener("deviceorientation",function(e){t.update(e)},!0),this},stop:function(){window.removeEventListener("deviceorientation")}}).init(arguments[0])},s.Orientation.prototype=s.Widget,s.Range=function(){s.extend(this,{type:"Range",serializeMe:["handleSize"],handleSize:20,values:[0,1],_values:[0,1],draw:function(){var t=this._x(),e=this._y(),i=this._width(),n=this._height();this.ctx.fillStyle=this._background(),this.ctx.clearRect(t,e,i,n);var s=t+this._values[1]*i-this.handleSize,o=t+this._values[0]*i;this.ctx.fillStyle=this._background(),this.ctx.fillRect(t,e,i,n),this.ctx.fillStyle=this._fill(),this.ctx.fillRect(o,e,s-o,n),this.ctx.fillStyle=this._stroke(),this.ctx.fillRect(o,e,this.handleSize,n),this.ctx.fillRect(s,e,this.handleSize,n),this.ctx.strokeStyle=this._stroke(),this.ctx.strokeRect(t,e,i,n)},changeValue:function(t,e){if(this.hasFocus||!this.requiresFocus){var i=this.isVertical?1-e/this._height():t/this._width();0>i?i=0:i>1&&(i=1);var n=this.max-this.min;Math.abs(i-this._values[0])<Math.abs(i-this._values[1])?(this._values[0]=i,this.values[0]=this.min+n*i):(this._values[1]=i,this.values[1]=this.min+n*i),this.refresh(),(this.values[0]!==this.lastLeftValue||this.values[1]!==this.lastRightValue)&&(this.onvaluechange&&this.onvaluechange(this.values[0],this.values[1]),this.refresh(),this.lastLeftValue=this.values[0],this.lastRightValue=this.values[1],this.sendTargetMessage())}},mousedown:function(t,e){e&&s.mouseDown&&this.changeValue(t.x-this._x(),t.y-this._y())},mousemove:function(t,e){e&&s.mouseDown&&this.changeValue(t.x-this._x(),t.y-this._y())},mouseup:function(t,e){e&&s.mouseDown&&this.changeValue(t.x-this._x(),t.y-this._y())},touchstart:function(t,e){e&&this.changeValue(t.x-this._x(),t.y-this._y())},touchmove:function(t,e){e&&this.changeValue(t.x-this._x(),t.y-this._y())},touchend:function(t,e){e&&this.changeValue(t.x-this._x(),t.y-this._y())}}).init(arguments[0])},s.Range.prototype=s.Widget,s.Paint=function(){s.extend(this,{lines:[],startTime:0,isAnimating:!1,animationPoint:0,timer:null,shouldLoop:!0,prevTimestamp:null,values:[0,0],draw:function(){var t=this._x(),e=this._y(),i=this._width(),n=this._height();if(this.ctx.fillStyle=this._background(),this.ctx.strokeStyle=this._stroke(),this.ctx.save(),this.ctx.beginPath(),this.ctx.moveTo(t,e),this.ctx.lineTo(t+i,e),this.ctx.lineTo(t+i,e+n),this.ctx.lineTo(t,e+n),this.ctx.lineTo(t,e),this.ctx.fill(),this.ctx.stroke(),this.ctx.clip(),this.ctx.fillStyle=this._fill(),this.lines.length>=1){this.ctx.lineWidth=8;for(var s=0;s<this.lines.length;s++){var o=this.lines[s];if(o.length>=2){this.ctx.moveTo(o[0].x*i,o[0].y*n),this.ctx.beginPath();for(var r=1;r<o.length-2;r++){var a=(o[r].x+o[r+1].x)/2,h=(o[r].y+o[r+1].y)/2;this.ctx.quadraticCurveTo(o[r].x*i,o[r].y*n,a*i,h*n)}this.ctx.stroke()}}}this.ctx.restore()},animate:function(){var t=this;if(this.isAnimating!==!1){var e=this.lines[0],i=e[this.animationPoint],n=e[this.animationPoint+1];if(this.animationPoint>=e.length-1){if(this.shouldLoop)return this.animationPoint=0,this.draw(),this.timeout=setTimeout(function(){t.animate()},5),void 0;if(this.ctx.fillStyle=this._background(),this.ctx.fillRect(0,0,this._width(),this._height()),0!==this.speedMod)return}this.ctx.save(),this.ctx.strokeStyle="#f00",this.ctx.lineWidth=8,this.ctx.beginPath(),this.ctx.moveTo(i.x*this._width(),i.y*this._height()),this.ctx.lineTo(n.x*this._width(),n.y*this._height()),this.ctx.stroke(),this.ctx.restore(),this.timeout=setTimeout(function(){t.animate()},i.timestamp-this.prevTimestamp),this.prevTimestamp=i.timestamp,this.animationPoint++,this.values=[i.x,i.y],this.sendTargetMessage()}},startAnimation:function(){this.animate()},stopAnimation:function(){this.timer&&clearInterval(this.timer)},mousedown:function(t){this.hitTest(t)&&(this.lines=[],this.animationPoint=0,0===this.lines.length&&(this.startTime=Date.now()),this.lines.push([]),this.isDrawing=!0,this.isAnimating=!1)},mousemove:function(t){if(this.hitTest(t)&&null!==this.activeTouch&&this.isDrawing){var e=this.lines[this.lines.length-1];e&&(e.push({x:t.x/this._width(),y:t.y/this._height(),timestamp:Date.now()-this.startTime}),this.draw())}},mouseup:function(){this.isDrawing=!1,this.lines.length>0&&(this.isAnimating=!0,this.animate())},touchstart:function(t){this.hitTest(t)&&(this.lines=[],this.animationPoint=0,0===this.lines.length&&(this.startTime=Date.now()),this.lines.push([]),this.isDrawing=!0,this.isAnimating=!1),this.activeTouch=t},touchmove:function(t){if(this.hitTest(t)&&null!==this.activeTouch&&this.isDrawing){var e=this.lines[this.lines.length-1];e&&(e.push({x:t.x/this._width(),y:t.y/this._height(),timestamp:Date.now()-this.startTime}),this.draw())}},touchend:function(){this.isDrawing=!1,this.lines.length>0&&(this.isAnimating=!0,this.animate())}}).init(arguments[0])},s.Paint.prototype=s.Widget,s.Patchbay=function(){s.extend(this,{type:"Patchbay",points:[],minWidth:80,cableWidth:5,start:null,over:null,connections:[],rowLength:null,selectedConnection:null,patchOutlineWidth:3,draw:function(){{var t=this._x(),e=this._y(),i=this._width(),n=this._height();this.points.length}this.ctx.fillStyle=this._background(),this.ctx.strokeStyle=this._stroke(),this.ctx.clearRect(t,e,i,n),this.layout(),this.drawSegments(),this.drawPatchPoints(),this.drawConnections()},layout:function(){var t=(this._x(),this._y(),this._width()),e=this._height();this.rows=1,this.patchWidth=t/this.points.length,this.patchWidth<this.minWidth&&(this.patchWidth=this.minWidth),this.rows=Math.ceil(this.patchWidth*this.points.length/t),this.patchHeight=e/this.rows,this.columns=Math.floor(t/this.patchWidth)},drawSegments:function(){{var t=this._x(),e=this._y(),i=this._width();this._height(),this.points.length}this.ctx.fillStyle=this._fill();for(var n=0,s=1,o=0;o<this.points.length;o++)this.start===o?(this.ctx.fillStyle="#777",this.ctx.fillRect(t+n,e+this.patchHeight*(s-1),this.patchWidth,this.patchHeight)):this.over===o&&(this.ctx.fillStyle="#744",this.ctx.fillRect(t+n,e+this.patchHeight*(s-1),this.patchWidth,this.patchHeight)),this.ctx.fillStyle=this._stroke(),this.ctx.textBaseline="middle",this.ctx.textAlign="center",this.ctx.font=this._font(),this.ctx.font="normal 12px Helvetica","undefined"!=typeof this.points[o].name&&this.ctx.fillText(this.points[o].name,n+this.patchWidth/2,e+((s-1)*this.patchHeight+.1*this.patchHeight)),"undefined"!=typeof this.points[o].name2&&this.ctx.fillText(this.points[o].name2,n+this.patchWidth/2,e+((s-1)*this.patchHeight+.9*this.patchHeight)),n+=this.patchWidth,this.points[o].row=s,n+this.patchWidth>i&&(n=0,s++)},drawPatchPoints:function(){{var t=(this._x(),this._y()),e=this._width();this._height(),this.points.length}this.ctx.fillStyle=this._background();for(var i=0,n=1,s=0;s<this.points.length;s++)this.ctx.beginPath(),this.ctx.arc(i+this.patchWidth/2,t+this.patchHeight/2+this.patchHeight*(n-1),this.patchWidth/4,0,2*Math.PI,!0),this.ctx.closePath(),this.ctx.fill(),this.ctx.lineWidth=this.patchOutlineWidth,this.ctx.stroke(),this.points[s].row=n,this.ctx.lineWidth=1,this.ctx.strokeRect(i,t+this.patchHeight*(n-1),this.patchWidth,this.patchHeight),i+=this.patchWidth,i+this.patchWidth>e&&(i=0,n++)},drawConnections:function(){{var t=this._x(),e=this._y();this._width(),this._height()}this.ctx.lineWidth=this.cableWidth;for(var i=0;i<this.connections.length;i++){var n=this.connections[i],s=this.connections[i][0],o=this.connections[i][1],r=t+this.patchWidth*(s%this.columns)+this.patchWidth/2,a=e+this.patchHeight/2+this.patchHeight*Math.floor(s/this.columns),h=t+this.patchWidth*(o%this.columns)+this.patchWidth/2,u=e+this.patchHeight/2+this.patchHeight*Math.floor(o/this.columns),c=r,l=a+.5*this.patchHeight,f=h,d=u+.5*this.patchHeight;if(n.selected)this.ctx.strokeStyle="#0f0";else{var p=this.ctx.createLinearGradient(r,a,h,u);p.addColorStop(0,"rgba(64, 64, 64, 1.000)"),p.addColorStop(1,"rgba(204, 204, 204, 1.000)"),this.ctx.strokeStyle=p}this.ctx.beginPath(),this.ctx.moveTo(r,a),this.ctx.bezierCurveTo(c,l,f,d,h,u),this.ctx.stroke(),n.edge=[r,a,c,l,f,d,h,u]}},_init:function(){var t=(this._x(),this._y(),this._width()),e=this._height();this.patchWidth=t/this.points.length,this.patchHeight=e,this.rows=1},createConnection:function(t){var e=this.points[t[0]],i=this.points[t[1]];i.output!==!1&&(this.connections.push(t),this.onconnection&&this.onconnection(e,i))},changeValue:function(){},hitTestEdges:function(t){for(var e=!1,i=t.x-this._x(),n=t.y-this._y(),s=0;s<this.connections.length;s++){var o=this.connections[s].edge;if(this.ctx.beginPath(),this.ctx.moveTo(o[0],o[1]),this.ctx.bezierCurveTo(o[2],o[3],o[4],o[5],o[6],o[7]),this.ctx.isPointInStroke(i,n)){this.connections.forEach(function(t){t.selected=!1}),this.connections[s].selected=!0,this.selectedConnection=this.connections[s],e=!0;break}}return e},mousedown:function(t,e){if(e&&s.mouseDown){if(!this.hitTestEdges(t)){var i=Math.floor((t.x-this._x()/this._width())/(this._width()/this.columns)),n=Math.floor((t.y-this._y()/this._height())/(this._height()/this.rows));this.start=n*this.columns+i,null!==this.selectedConnection&&(this.selectedConnection.selected=!1,this.selectedConnection=null)}this.draw()}},mousemove:function(t,e){if(e&&s.mouseDown){var i=Math.floor((t.x-this._x()/this._width())/(this._width()/this.columns)),n=Math.floor((t.y-this._y()/this._height())/(this._height()/this.rows)),o=this.over;this.over=n*this.columns+i,this.over!==o&&this.draw()}},mouseup:function(t,e){if(e){var i=Math.floor((t.x-this._x()/this._width())/(this._width()/this.columns)),n=Math.floor((t.y-this._y()/this._height())/(this._height()/this.rows)),s=n*this.columns+i;if(this.start!==s&&null!==this.start){for(var o=[this.start,s],r=!1,a=0;a<this.connections.length;a++)this.connections[a][0]===o[0]&&this.connections[a][1]===o[1]&&(r=!0);r||this.createConnection(o)}}this.over=null,this.start=null,this.draw()},onkeydown:function(t){var e=s.keyCodeToChar[t.keyCode];("Delete"===e||"Backspace"===e)&&null!==this.selectedConnection&&(this.deleteConnection(this.selectedConnection),t.preventDefault())},deleteConnection:function(t){this.connections.splice(this.connections.indexOf(t),1),this.ondisconnection&&this.ondisconnection(this.points[t[0]],this.points[t[1]]),this.draw()},touchstart:function(t,e){e&&this.changeValue(t.x-this._x(),t.y-this._y())},touchmove:function(t,e){e&&this.changeValue(t.x-this._x(),t.y-this._y())},touchend:function(t,e){e&&this.changeValue(t.x-this._x(),t.y-this._y())}}).init(arguments[0])},s.Patchbay.prototype=s.Widget,s.defineChildProperties=function(t,e){for(var i=0;i<e.length;i++)!function(){var n=e[i],s=t[n];Object.defineProperty(t,n,{get:function(){return s},set:function(e){s=e;for(var i=0;i<t.children.length;i++)t.children[i][n]=s}})}()},function(t){var e={};t.publish=function(i,n){"object"==typeof e[i]&&e[i].forEach(function(e){e.apply(t,n||[])})},t.subscribe=function(t,i){return e[t]||(e[t]=[]),e[t].push(i),[t,i]},t.unsubscribe=function(i){var n=i[0];e[n]&&t.each(e[n],function(t){this==i[1]&&e[n].splice(t,1)})}}(n),e.exports=s}()},{jquery:6}],6:[function(t,e){!function(t,i){"object"==typeof e&&"object"==typeof e.exports?e.exports=t.document?i(t,!0):function(t){if(!t.document)throw new Error("jQuery requires a window with a document");return i(t)}:i(t)}("undefined"!=typeof window?window:this,function(t,e){function i(t){var e=t.length,i=Z.type(t);return"function"===i||Z.isWindow(t)?!1:1===t.nodeType&&e?!0:"array"===i||0===e||"number"==typeof e&&e>0&&e-1 in t}function n(t,e,i){if(Z.isFunction(e))return Z.grep(t,function(t,n){return!!e.call(t,n,t)!==i});if(e.nodeType)return Z.grep(t,function(t){return t===e!==i});if("string"==typeof e){if(ae.test(e))return Z.filter(e,t,i);e=Z.filter(e,t)}return Z.grep(t,function(t){return $.call(e,t)>=0!==i})}function s(t,e){for(;(t=t[e])&&1!==t.nodeType;);return t}function o(t){var e=pe[t]={};return Z.each(t.match(de)||[],function(t,i){e[i]=!0}),e}function r(){K.removeEventListener("DOMContentLoaded",r,!1),t.removeEventListener("load",r,!1),Z.ready()}function a(){Object.defineProperty(this.cache={},0,{get:function(){return{}}}),this.expando=Z.expando+Math.random()}function h(t,e,i){var n;if(void 0===i&&1===t.nodeType)if(n="data-"+e.replace(be,"-$1").toLowerCase(),i=t.getAttribute(n),"string"==typeof i){try{i="true"===i?!0:"false"===i?!1:"null"===i?null:+i+""===i?+i:xe.test(i)?Z.parseJSON(i):i}catch(s){}ye.set(t,e,i)}else i=void 0;return i}function u(){return!0}function c(){return!1}function l(){try{return K.activeElement}catch(t){}}function f(t,e){return Z.nodeName(t,"table")&&Z.nodeName(11!==e.nodeType?e:e.firstChild,"tr")?t.getElementsByTagName("tbody")[0]||t.appendChild(t.ownerDocument.createElement("tbody")):t}function d(t){return t.type=(null!==t.getAttribute("type"))+"/"+t.type,t}function p(t){var e=Ve.exec(t.type);return e?t.type=e[1]:t.removeAttribute("type"),t}function g(t,e){for(var i=0,n=t.length;n>i;i++)ve.set(t[i],"globalEval",!e||ve.get(e[i],"globalEval"))}function m(t,e){var i,n,s,o,r,a,h,u;if(1===e.nodeType){if(ve.hasData(t)&&(o=ve.access(t),r=ve.set(e,o),u=o.events)){delete r.handle,r.events={};for(s in u)for(i=0,n=u[s].length;n>i;i++)Z.event.add(e,s,u[s][i])}ye.hasData(t)&&(a=ye.access(t),h=Z.extend({},a),ye.set(e,h))}}function v(t,e){var i=t.getElementsByTagName?t.getElementsByTagName(e||"*"):t.querySelectorAll?t.querySelectorAll(e||"*"):[];return void 0===e||e&&Z.nodeName(t,e)?Z.merge([t],i):i}function y(t,e){var i=e.nodeName.toLowerCase();"input"===i&&je.test(t.type)?e.checked=t.checked:("input"===i||"textarea"===i)&&(e.defaultValue=t.defaultValue)}function x(e,i){var n,s=Z(i.createElement(e)).appendTo(i.body),o=t.getDefaultComputedStyle&&(n=t.getDefaultComputedStyle(s[0]))?n.display:Z.css(s[0],"display");return s.detach(),o}function b(t){var e=K,i=We[t];return i||(i=x(t,e),"none"!==i&&i||(Fe=(Fe||Z("<iframe frameborder='0' width='0' height='0'/>")).appendTo(e.documentElement),e=Fe[0].contentDocument,e.write(),e.close(),i=x(t,e),Fe.detach()),We[t]=i),i}function w(t,e,i){var n,s,o,r,a=t.style;return i=i||Ie(t),i&&(r=i.getPropertyValue(e)||i[e]),i&&(""!==r||Z.contains(t.ownerDocument,t)||(r=Z.style(t,e)),He.test(r)&&Be.test(e)&&(n=a.width,s=a.minWidth,o=a.maxWidth,a.minWidth=a.maxWidth=a.width=r,r=i.width,a.width=n,a.minWidth=s,a.maxWidth=o)),void 0!==r?r+"":r}function _(t,e){return{get:function(){return t()?(delete this.get,void 0):(this.get=e).apply(this,arguments)}}}function k(t,e){if(e in t)return e;for(var i=e[0].toUpperCase()+e.slice(1),n=e,s=Ue.length;s--;)if(e=Ue[s]+i,e in t)return e;return n}function j(t,e,i){var n=Ge.exec(e);return n?Math.max(0,n[1]-(i||0))+(n[2]||"px"):e}function T(t,e,i,n,s){for(var o=i===(n?"border":"content")?4:"width"===e?1:0,r=0;4>o;o+=2)"margin"===i&&(r+=Z.css(t,i+_e[o],!0,s)),n?("content"===i&&(r-=Z.css(t,"padding"+_e[o],!0,s)),"margin"!==i&&(r-=Z.css(t,"border"+_e[o]+"Width",!0,s))):(r+=Z.css(t,"padding"+_e[o],!0,s),"padding"!==i&&(r+=Z.css(t,"border"+_e[o]+"Width",!0,s)));return r}function N(t,e,i){var n=!0,s="width"===e?t.offsetWidth:t.offsetHeight,o=Ie(t),r="border-box"===Z.css(t,"boxSizing",!1,o);if(0>=s||null==s){if(s=w(t,e,o),(0>s||null==s)&&(s=t.style[e]),He.test(s))return s;n=r&&(J.boxSizingReliable()||s===t.style[e]),s=parseFloat(s)||0}return s+T(t,e,i||(r?"border":"content"),n,o)+"px"}function C(t,e){for(var i,n,s,o=[],r=0,a=t.length;a>r;r++)n=t[r],n.style&&(o[r]=ve.get(n,"olddisplay"),i=n.style.display,e?(o[r]||"none"!==i||(n.style.display=""),""===n.style.display&&ke(n)&&(o[r]=ve.access(n,"olddisplay",b(n.nodeName)))):(s=ke(n),"none"===i&&s||ve.set(n,"olddisplay",s?i:Z.css(n,"display"))));for(r=0;a>r;r++)n=t[r],n.style&&(e&&"none"!==n.style.display&&""!==n.style.display||(n.style.display=e?o[r]||"":"none"));return t}function S(t,e,i,n,s){return new S.prototype.init(t,e,i,n,s)}function A(){return setTimeout(function(){Je=void 0}),Je=Z.now()}function P(t,e){var i,n=0,s={height:t};for(e=e?1:0;4>n;n+=2-e)i=_e[n],s["margin"+i]=s["padding"+i]=t;return e&&(s.opacity=s.width=t),s}function M(t,e,i){for(var n,s=(ii[e]||[]).concat(ii["*"]),o=0,r=s.length;r>o;o++)if(n=s[o].call(i,e,t))return n}function O(t,e,i){var n,s,o,r,a,h,u,c,l=this,f={},d=t.style,p=t.nodeType&&ke(t),g=ve.get(t,"fxshow");i.queue||(a=Z._queueHooks(t,"fx"),null==a.unqueued&&(a.unqueued=0,h=a.empty.fire,a.empty.fire=function(){a.unqueued||h()}),a.unqueued++,l.always(function(){l.always(function(){a.unqueued--,Z.queue(t,"fx").length||a.empty.fire()})})),1===t.nodeType&&("height"in e||"width"in e)&&(i.overflow=[d.overflow,d.overflowX,d.overflowY],u=Z.css(t,"display"),c="none"===u?ve.get(t,"olddisplay")||b(t.nodeName):u,"inline"===c&&"none"===Z.css(t,"float")&&(d.display="inline-block")),i.overflow&&(d.overflow="hidden",l.always(function(){d.overflow=i.overflow[0],d.overflowX=i.overflow[1],d.overflowY=i.overflow[2]}));for(n in e)if(s=e[n],Qe.exec(s)){if(delete e[n],o=o||"toggle"===s,s===(p?"hide":"show")){if("show"!==s||!g||void 0===g[n])continue;p=!0}f[n]=g&&g[n]||Z.style(t,n)}else u=void 0;if(Z.isEmptyObject(f))"inline"===("none"===u?b(t.nodeName):u)&&(d.display=u);else{g?"hidden"in g&&(p=g.hidden):g=ve.access(t,"fxshow",{}),o&&(g.hidden=!p),p?Z(t).show():l.done(function(){Z(t).hide()}),l.done(function(){var e;ve.remove(t,"fxshow");for(e in f)Z.style(t,e,f[e])});for(n in f)r=M(p?g[n]:0,n,l),n in g||(g[n]=r.start,p&&(r.end=r.start,r.start="width"===n||"height"===n?1:0))}}function E(t,e){var i,n,s,o,r;for(i in t)if(n=Z.camelCase(i),s=e[n],o=t[i],Z.isArray(o)&&(s=o[1],o=t[i]=o[0]),i!==n&&(t[n]=o,delete t[i]),r=Z.cssHooks[n],r&&"expand"in r){o=r.expand(o),delete t[n];for(i in o)i in t||(t[i]=o[i],e[i]=s)}else e[n]=s}function D(t,e,i){var n,s,o=0,r=ei.length,a=Z.Deferred().always(function(){delete h.elem}),h=function(){if(s)return!1;for(var e=Je||A(),i=Math.max(0,u.startTime+u.duration-e),n=i/u.duration||0,o=1-n,r=0,h=u.tweens.length;h>r;r++)u.tweens[r].run(o);return a.notifyWith(t,[u,o,i]),1>o&&h?i:(a.resolveWith(t,[u]),!1)},u=a.promise({elem:t,props:Z.extend({},e),opts:Z.extend(!0,{specialEasing:{}},i),originalProperties:e,originalOptions:i,startTime:Je||A(),duration:i.duration,tweens:[],createTween:function(e,i){var n=Z.Tween(t,u.opts,e,i,u.opts.specialEasing[e]||u.opts.easing);
return u.tweens.push(n),n},stop:function(e){var i=0,n=e?u.tweens.length:0;if(s)return this;for(s=!0;n>i;i++)u.tweens[i].run(1);return e?a.resolveWith(t,[u,e]):a.rejectWith(t,[u,e]),this}}),c=u.props;for(E(c,u.opts.specialEasing);r>o;o++)if(n=ei[o].call(u,t,c,u.opts))return n;return Z.map(c,M,u),Z.isFunction(u.opts.start)&&u.opts.start.call(t,u),Z.fx.timer(Z.extend(h,{elem:t,anim:u,queue:u.opts.queue})),u.progress(u.opts.progress).done(u.opts.done,u.opts.complete).fail(u.opts.fail).always(u.opts.always)}function L(t){return function(e,i){"string"!=typeof e&&(i=e,e="*");var n,s=0,o=e.toLowerCase().match(de)||[];if(Z.isFunction(i))for(;n=o[s++];)"+"===n[0]?(n=n.slice(1)||"*",(t[n]=t[n]||[]).unshift(i)):(t[n]=t[n]||[]).push(i)}}function V(t,e,i,n){function s(a){var h;return o[a]=!0,Z.each(t[a]||[],function(t,a){var u=a(e,i,n);return"string"!=typeof u||r||o[u]?r?!(h=u):void 0:(e.dataTypes.unshift(u),s(u),!1)}),h}var o={},r=t===wi;return s(e.dataTypes[0])||!o["*"]&&s("*")}function q(t,e){var i,n,s=Z.ajaxSettings.flatOptions||{};for(i in e)void 0!==e[i]&&((s[i]?t:n||(n={}))[i]=e[i]);return n&&Z.extend(!0,t,n),t}function R(t,e,i){for(var n,s,o,r,a=t.contents,h=t.dataTypes;"*"===h[0];)h.shift(),void 0===n&&(n=t.mimeType||e.getResponseHeader("Content-Type"));if(n)for(s in a)if(a[s]&&a[s].test(n)){h.unshift(s);break}if(h[0]in i)o=h[0];else{for(s in i){if(!h[0]||t.converters[s+" "+h[0]]){o=s;break}r||(r=s)}o=o||r}return o?(o!==h[0]&&h.unshift(o),i[o]):void 0}function F(t,e,i,n){var s,o,r,a,h,u={},c=t.dataTypes.slice();if(c[1])for(r in t.converters)u[r.toLowerCase()]=t.converters[r];for(o=c.shift();o;)if(t.responseFields[o]&&(i[t.responseFields[o]]=e),!h&&n&&t.dataFilter&&(e=t.dataFilter(e,t.dataType)),h=o,o=c.shift())if("*"===o)o=h;else if("*"!==h&&h!==o){if(r=u[h+" "+o]||u["* "+o],!r)for(s in u)if(a=s.split(" "),a[1]===o&&(r=u[h+" "+a[0]]||u["* "+a[0]])){r===!0?r=u[s]:u[s]!==!0&&(o=a[0],c.unshift(a[1]));break}if(r!==!0)if(r&&t["throws"])e=r(e);else try{e=r(e)}catch(l){return{state:"parsererror",error:r?l:"No conversion from "+h+" to "+o}}}return{state:"success",data:e}}function W(t,e,i,n){var s;if(Z.isArray(e))Z.each(e,function(e,s){i||Ti.test(t)?n(t,s):W(t+"["+("object"==typeof s?e:"")+"]",s,i,n)});else if(i||"object"!==Z.type(e))n(t,e);else for(s in e)W(t+"["+s+"]",e[s],i,n)}function B(t){return Z.isWindow(t)?t:9===t.nodeType&&t.defaultView}var H=[],I=H.slice,z=H.concat,G=H.push,$=H.indexOf,X={},Y=X.toString,U=X.hasOwnProperty,J={},K=t.document,Q="2.1.1",Z=function(t,e){return new Z.fn.init(t,e)},te=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,ee=/^-ms-/,ie=/-([\da-z])/gi,ne=function(t,e){return e.toUpperCase()};Z.fn=Z.prototype={jquery:Q,constructor:Z,selector:"",length:0,toArray:function(){return I.call(this)},get:function(t){return null!=t?0>t?this[t+this.length]:this[t]:I.call(this)},pushStack:function(t){var e=Z.merge(this.constructor(),t);return e.prevObject=this,e.context=this.context,e},each:function(t,e){return Z.each(this,t,e)},map:function(t){return this.pushStack(Z.map(this,function(e,i){return t.call(e,i,e)}))},slice:function(){return this.pushStack(I.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(t){var e=this.length,i=+t+(0>t?e:0);return this.pushStack(i>=0&&e>i?[this[i]]:[])},end:function(){return this.prevObject||this.constructor(null)},push:G,sort:H.sort,splice:H.splice},Z.extend=Z.fn.extend=function(){var t,e,i,n,s,o,r=arguments[0]||{},a=1,h=arguments.length,u=!1;for("boolean"==typeof r&&(u=r,r=arguments[a]||{},a++),"object"==typeof r||Z.isFunction(r)||(r={}),a===h&&(r=this,a--);h>a;a++)if(null!=(t=arguments[a]))for(e in t)i=r[e],n=t[e],r!==n&&(u&&n&&(Z.isPlainObject(n)||(s=Z.isArray(n)))?(s?(s=!1,o=i&&Z.isArray(i)?i:[]):o=i&&Z.isPlainObject(i)?i:{},r[e]=Z.extend(u,o,n)):void 0!==n&&(r[e]=n));return r},Z.extend({expando:"jQuery"+(Q+Math.random()).replace(/\D/g,""),isReady:!0,error:function(t){throw new Error(t)},noop:function(){},isFunction:function(t){return"function"===Z.type(t)},isArray:Array.isArray,isWindow:function(t){return null!=t&&t===t.window},isNumeric:function(t){return!Z.isArray(t)&&t-parseFloat(t)>=0},isPlainObject:function(t){return"object"!==Z.type(t)||t.nodeType||Z.isWindow(t)?!1:t.constructor&&!U.call(t.constructor.prototype,"isPrototypeOf")?!1:!0},isEmptyObject:function(t){var e;for(e in t)return!1;return!0},type:function(t){return null==t?t+"":"object"==typeof t||"function"==typeof t?X[Y.call(t)]||"object":typeof t},globalEval:function(t){var e,i=eval;t=Z.trim(t),t&&(1===t.indexOf("use strict")?(e=K.createElement("script"),e.text=t,K.head.appendChild(e).parentNode.removeChild(e)):i(t))},camelCase:function(t){return t.replace(ee,"ms-").replace(ie,ne)},nodeName:function(t,e){return t.nodeName&&t.nodeName.toLowerCase()===e.toLowerCase()},each:function(t,e,n){var s,o=0,r=t.length,a=i(t);if(n){if(a)for(;r>o&&(s=e.apply(t[o],n),s!==!1);o++);else for(o in t)if(s=e.apply(t[o],n),s===!1)break}else if(a)for(;r>o&&(s=e.call(t[o],o,t[o]),s!==!1);o++);else for(o in t)if(s=e.call(t[o],o,t[o]),s===!1)break;return t},trim:function(t){return null==t?"":(t+"").replace(te,"")},makeArray:function(t,e){var n=e||[];return null!=t&&(i(Object(t))?Z.merge(n,"string"==typeof t?[t]:t):G.call(n,t)),n},inArray:function(t,e,i){return null==e?-1:$.call(e,t,i)},merge:function(t,e){for(var i=+e.length,n=0,s=t.length;i>n;n++)t[s++]=e[n];return t.length=s,t},grep:function(t,e,i){for(var n,s=[],o=0,r=t.length,a=!i;r>o;o++)n=!e(t[o],o),n!==a&&s.push(t[o]);return s},map:function(t,e,n){var s,o=0,r=t.length,a=i(t),h=[];if(a)for(;r>o;o++)s=e(t[o],o,n),null!=s&&h.push(s);else for(o in t)s=e(t[o],o,n),null!=s&&h.push(s);return z.apply([],h)},guid:1,proxy:function(t,e){var i,n,s;return"string"==typeof e&&(i=t[e],e=t,t=i),Z.isFunction(t)?(n=I.call(arguments,2),s=function(){return t.apply(e||this,n.concat(I.call(arguments)))},s.guid=t.guid=t.guid||Z.guid++,s):void 0},now:Date.now,support:J}),Z.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(t,e){X["[object "+e+"]"]=e.toLowerCase()});var se=function(t){function e(t,e,i,n){var s,o,r,a,h,u,l,d,p,g;if((e?e.ownerDocument||e:W)!==O&&M(e),e=e||O,i=i||[],!t||"string"!=typeof t)return i;if(1!==(a=e.nodeType)&&9!==a)return[];if(D&&!n){if(s=ye.exec(t))if(r=s[1]){if(9===a){if(o=e.getElementById(r),!o||!o.parentNode)return i;if(o.id===r)return i.push(o),i}else if(e.ownerDocument&&(o=e.ownerDocument.getElementById(r))&&R(e,o)&&o.id===r)return i.push(o),i}else{if(s[2])return Z.apply(i,e.getElementsByTagName(t)),i;if((r=s[3])&&w.getElementsByClassName&&e.getElementsByClassName)return Z.apply(i,e.getElementsByClassName(r)),i}if(w.qsa&&(!L||!L.test(t))){if(d=l=F,p=e,g=9===a&&t,1===a&&"object"!==e.nodeName.toLowerCase()){for(u=T(t),(l=e.getAttribute("id"))?d=l.replace(be,"\\$&"):e.setAttribute("id",d),d="[id='"+d+"'] ",h=u.length;h--;)u[h]=d+f(u[h]);p=xe.test(t)&&c(e.parentNode)||e,g=u.join(",")}if(g)try{return Z.apply(i,p.querySelectorAll(g)),i}catch(m){}finally{l||e.removeAttribute("id")}}}return C(t.replace(he,"$1"),e,i,n)}function i(){function t(i,n){return e.push(i+" ")>_.cacheLength&&delete t[e.shift()],t[i+" "]=n}var e=[];return t}function n(t){return t[F]=!0,t}function s(t){var e=O.createElement("div");try{return!!t(e)}catch(i){return!1}finally{e.parentNode&&e.parentNode.removeChild(e),e=null}}function o(t,e){for(var i=t.split("|"),n=t.length;n--;)_.attrHandle[i[n]]=e}function r(t,e){var i=e&&t,n=i&&1===t.nodeType&&1===e.nodeType&&(~e.sourceIndex||Y)-(~t.sourceIndex||Y);if(n)return n;if(i)for(;i=i.nextSibling;)if(i===e)return-1;return t?1:-1}function a(t){return function(e){var i=e.nodeName.toLowerCase();return"input"===i&&e.type===t}}function h(t){return function(e){var i=e.nodeName.toLowerCase();return("input"===i||"button"===i)&&e.type===t}}function u(t){return n(function(e){return e=+e,n(function(i,n){for(var s,o=t([],i.length,e),r=o.length;r--;)i[s=o[r]]&&(i[s]=!(n[s]=i[s]))})})}function c(t){return t&&typeof t.getElementsByTagName!==X&&t}function l(){}function f(t){for(var e=0,i=t.length,n="";i>e;e++)n+=t[e].value;return n}function d(t,e,i){var n=e.dir,s=i&&"parentNode"===n,o=H++;return e.first?function(e,i,o){for(;e=e[n];)if(1===e.nodeType||s)return t(e,i,o)}:function(e,i,r){var a,h,u=[B,o];if(r){for(;e=e[n];)if((1===e.nodeType||s)&&t(e,i,r))return!0}else for(;e=e[n];)if(1===e.nodeType||s){if(h=e[F]||(e[F]={}),(a=h[n])&&a[0]===B&&a[1]===o)return u[2]=a[2];if(h[n]=u,u[2]=t(e,i,r))return!0}}}function p(t){return t.length>1?function(e,i,n){for(var s=t.length;s--;)if(!t[s](e,i,n))return!1;return!0}:t[0]}function g(t,i,n){for(var s=0,o=i.length;o>s;s++)e(t,i[s],n);return n}function m(t,e,i,n,s){for(var o,r=[],a=0,h=t.length,u=null!=e;h>a;a++)(o=t[a])&&(!i||i(o,n,s))&&(r.push(o),u&&e.push(a));return r}function v(t,e,i,s,o,r){return s&&!s[F]&&(s=v(s)),o&&!o[F]&&(o=v(o,r)),n(function(n,r,a,h){var u,c,l,f=[],d=[],p=r.length,v=n||g(e||"*",a.nodeType?[a]:a,[]),y=!t||!n&&e?v:m(v,f,t,a,h),x=i?o||(n?t:p||s)?[]:r:y;if(i&&i(y,x,a,h),s)for(u=m(x,d),s(u,[],a,h),c=u.length;c--;)(l=u[c])&&(x[d[c]]=!(y[d[c]]=l));if(n){if(o||t){if(o){for(u=[],c=x.length;c--;)(l=x[c])&&u.push(y[c]=l);o(null,x=[],u,h)}for(c=x.length;c--;)(l=x[c])&&(u=o?ee.call(n,l):f[c])>-1&&(n[u]=!(r[u]=l))}}else x=m(x===r?x.splice(p,x.length):x),o?o(null,r,x,h):Z.apply(r,x)})}function y(t){for(var e,i,n,s=t.length,o=_.relative[t[0].type],r=o||_.relative[" "],a=o?1:0,h=d(function(t){return t===e},r,!0),u=d(function(t){return ee.call(e,t)>-1},r,!0),c=[function(t,i,n){return!o&&(n||i!==S)||((e=i).nodeType?h(t,i,n):u(t,i,n))}];s>a;a++)if(i=_.relative[t[a].type])c=[d(p(c),i)];else{if(i=_.filter[t[a].type].apply(null,t[a].matches),i[F]){for(n=++a;s>n&&!_.relative[t[n].type];n++);return v(a>1&&p(c),a>1&&f(t.slice(0,a-1).concat({value:" "===t[a-2].type?"*":""})).replace(he,"$1"),i,n>a&&y(t.slice(a,n)),s>n&&y(t=t.slice(n)),s>n&&f(t))}c.push(i)}return p(c)}function x(t,i){var s=i.length>0,o=t.length>0,r=function(n,r,a,h,u){var c,l,f,d=0,p="0",g=n&&[],v=[],y=S,x=n||o&&_.find.TAG("*",u),b=B+=null==y?1:Math.random()||.1,w=x.length;for(u&&(S=r!==O&&r);p!==w&&null!=(c=x[p]);p++){if(o&&c){for(l=0;f=t[l++];)if(f(c,r,a)){h.push(c);break}u&&(B=b)}s&&((c=!f&&c)&&d--,n&&g.push(c))}if(d+=p,s&&p!==d){for(l=0;f=i[l++];)f(g,v,r,a);if(n){if(d>0)for(;p--;)g[p]||v[p]||(v[p]=K.call(h));v=m(v)}Z.apply(h,v),u&&!n&&v.length>0&&d+i.length>1&&e.uniqueSort(h)}return u&&(B=b,S=y),g};return s?n(r):r}var b,w,_,k,j,T,N,C,S,A,P,M,O,E,D,L,V,q,R,F="sizzle"+-new Date,W=t.document,B=0,H=0,I=i(),z=i(),G=i(),$=function(t,e){return t===e&&(P=!0),0},X="undefined",Y=1<<31,U={}.hasOwnProperty,J=[],K=J.pop,Q=J.push,Z=J.push,te=J.slice,ee=J.indexOf||function(t){for(var e=0,i=this.length;i>e;e++)if(this[e]===t)return e;return-1},ie="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",ne="[\\x20\\t\\r\\n\\f]",se="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",oe=se.replace("w","w#"),re="\\["+ne+"*("+se+")(?:"+ne+"*([*^$|!~]?=)"+ne+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+oe+"))|)"+ne+"*\\]",ae=":("+se+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+re+")*)|.*)\\)|)",he=new RegExp("^"+ne+"+|((?:^|[^\\\\])(?:\\\\.)*)"+ne+"+$","g"),ue=new RegExp("^"+ne+"*,"+ne+"*"),ce=new RegExp("^"+ne+"*([>+~]|"+ne+")"+ne+"*"),le=new RegExp("="+ne+"*([^\\]'\"]*?)"+ne+"*\\]","g"),fe=new RegExp(ae),de=new RegExp("^"+oe+"$"),pe={ID:new RegExp("^#("+se+")"),CLASS:new RegExp("^\\.("+se+")"),TAG:new RegExp("^("+se.replace("w","w*")+")"),ATTR:new RegExp("^"+re),PSEUDO:new RegExp("^"+ae),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+ne+"*(even|odd|(([+-]|)(\\d*)n|)"+ne+"*(?:([+-]|)"+ne+"*(\\d+)|))"+ne+"*\\)|)","i"),bool:new RegExp("^(?:"+ie+")$","i"),needsContext:new RegExp("^"+ne+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+ne+"*((?:-\\d)?\\d*)"+ne+"*\\)|)(?=[^-]|$)","i")},ge=/^(?:input|select|textarea|button)$/i,me=/^h\d$/i,ve=/^[^{]+\{\s*\[native \w/,ye=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,xe=/[+~]/,be=/'|\\/g,we=new RegExp("\\\\([\\da-f]{1,6}"+ne+"?|("+ne+")|.)","ig"),_e=function(t,e,i){var n="0x"+e-65536;return n!==n||i?e:0>n?String.fromCharCode(n+65536):String.fromCharCode(n>>10|55296,1023&n|56320)};try{Z.apply(J=te.call(W.childNodes),W.childNodes),J[W.childNodes.length].nodeType}catch(ke){Z={apply:J.length?function(t,e){Q.apply(t,te.call(e))}:function(t,e){for(var i=t.length,n=0;t[i++]=e[n++];);t.length=i-1}}}w=e.support={},j=e.isXML=function(t){var e=t&&(t.ownerDocument||t).documentElement;return e?"HTML"!==e.nodeName:!1},M=e.setDocument=function(t){var e,i=t?t.ownerDocument||t:W,n=i.defaultView;return i!==O&&9===i.nodeType&&i.documentElement?(O=i,E=i.documentElement,D=!j(i),n&&n!==n.top&&(n.addEventListener?n.addEventListener("unload",function(){M()},!1):n.attachEvent&&n.attachEvent("onunload",function(){M()})),w.attributes=s(function(t){return t.className="i",!t.getAttribute("className")}),w.getElementsByTagName=s(function(t){return t.appendChild(i.createComment("")),!t.getElementsByTagName("*").length}),w.getElementsByClassName=ve.test(i.getElementsByClassName)&&s(function(t){return t.innerHTML="<div class='a'></div><div class='a i'></div>",t.firstChild.className="i",2===t.getElementsByClassName("i").length}),w.getById=s(function(t){return E.appendChild(t).id=F,!i.getElementsByName||!i.getElementsByName(F).length}),w.getById?(_.find.ID=function(t,e){if(typeof e.getElementById!==X&&D){var i=e.getElementById(t);return i&&i.parentNode?[i]:[]}},_.filter.ID=function(t){var e=t.replace(we,_e);return function(t){return t.getAttribute("id")===e}}):(delete _.find.ID,_.filter.ID=function(t){var e=t.replace(we,_e);return function(t){var i=typeof t.getAttributeNode!==X&&t.getAttributeNode("id");return i&&i.value===e}}),_.find.TAG=w.getElementsByTagName?function(t,e){return typeof e.getElementsByTagName!==X?e.getElementsByTagName(t):void 0}:function(t,e){var i,n=[],s=0,o=e.getElementsByTagName(t);if("*"===t){for(;i=o[s++];)1===i.nodeType&&n.push(i);return n}return o},_.find.CLASS=w.getElementsByClassName&&function(t,e){return typeof e.getElementsByClassName!==X&&D?e.getElementsByClassName(t):void 0},V=[],L=[],(w.qsa=ve.test(i.querySelectorAll))&&(s(function(t){t.innerHTML="<select msallowclip=''><option selected=''></option></select>",t.querySelectorAll("[msallowclip^='']").length&&L.push("[*^$]="+ne+"*(?:''|\"\")"),t.querySelectorAll("[selected]").length||L.push("\\["+ne+"*(?:value|"+ie+")"),t.querySelectorAll(":checked").length||L.push(":checked")}),s(function(t){var e=i.createElement("input");e.setAttribute("type","hidden"),t.appendChild(e).setAttribute("name","D"),t.querySelectorAll("[name=d]").length&&L.push("name"+ne+"*[*^$|!~]?="),t.querySelectorAll(":enabled").length||L.push(":enabled",":disabled"),t.querySelectorAll("*,:x"),L.push(",.*:")})),(w.matchesSelector=ve.test(q=E.matches||E.webkitMatchesSelector||E.mozMatchesSelector||E.oMatchesSelector||E.msMatchesSelector))&&s(function(t){w.disconnectedMatch=q.call(t,"div"),q.call(t,"[s!='']:x"),V.push("!=",ae)}),L=L.length&&new RegExp(L.join("|")),V=V.length&&new RegExp(V.join("|")),e=ve.test(E.compareDocumentPosition),R=e||ve.test(E.contains)?function(t,e){var i=9===t.nodeType?t.documentElement:t,n=e&&e.parentNode;return t===n||!(!n||1!==n.nodeType||!(i.contains?i.contains(n):t.compareDocumentPosition&&16&t.compareDocumentPosition(n)))}:function(t,e){if(e)for(;e=e.parentNode;)if(e===t)return!0;return!1},$=e?function(t,e){if(t===e)return P=!0,0;var n=!t.compareDocumentPosition-!e.compareDocumentPosition;return n?n:(n=(t.ownerDocument||t)===(e.ownerDocument||e)?t.compareDocumentPosition(e):1,1&n||!w.sortDetached&&e.compareDocumentPosition(t)===n?t===i||t.ownerDocument===W&&R(W,t)?-1:e===i||e.ownerDocument===W&&R(W,e)?1:A?ee.call(A,t)-ee.call(A,e):0:4&n?-1:1)}:function(t,e){if(t===e)return P=!0,0;var n,s=0,o=t.parentNode,a=e.parentNode,h=[t],u=[e];if(!o||!a)return t===i?-1:e===i?1:o?-1:a?1:A?ee.call(A,t)-ee.call(A,e):0;if(o===a)return r(t,e);for(n=t;n=n.parentNode;)h.unshift(n);for(n=e;n=n.parentNode;)u.unshift(n);for(;h[s]===u[s];)s++;return s?r(h[s],u[s]):h[s]===W?-1:u[s]===W?1:0},i):O},e.matches=function(t,i){return e(t,null,null,i)},e.matchesSelector=function(t,i){if((t.ownerDocument||t)!==O&&M(t),i=i.replace(le,"='$1']"),!(!w.matchesSelector||!D||V&&V.test(i)||L&&L.test(i)))try{var n=q.call(t,i);if(n||w.disconnectedMatch||t.document&&11!==t.document.nodeType)return n}catch(s){}return e(i,O,null,[t]).length>0},e.contains=function(t,e){return(t.ownerDocument||t)!==O&&M(t),R(t,e)},e.attr=function(t,e){(t.ownerDocument||t)!==O&&M(t);var i=_.attrHandle[e.toLowerCase()],n=i&&U.call(_.attrHandle,e.toLowerCase())?i(t,e,!D):void 0;return void 0!==n?n:w.attributes||!D?t.getAttribute(e):(n=t.getAttributeNode(e))&&n.specified?n.value:null},e.error=function(t){throw new Error("Syntax error, unrecognized expression: "+t)},e.uniqueSort=function(t){var e,i=[],n=0,s=0;if(P=!w.detectDuplicates,A=!w.sortStable&&t.slice(0),t.sort($),P){for(;e=t[s++];)e===t[s]&&(n=i.push(s));for(;n--;)t.splice(i[n],1)}return A=null,t},k=e.getText=function(t){var e,i="",n=0,s=t.nodeType;if(s){if(1===s||9===s||11===s){if("string"==typeof t.textContent)return t.textContent;for(t=t.firstChild;t;t=t.nextSibling)i+=k(t)}else if(3===s||4===s)return t.nodeValue}else for(;e=t[n++];)i+=k(e);return i},_=e.selectors={cacheLength:50,createPseudo:n,match:pe,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(t){return t[1]=t[1].replace(we,_e),t[3]=(t[3]||t[4]||t[5]||"").replace(we,_e),"~="===t[2]&&(t[3]=" "+t[3]+" "),t.slice(0,4)},CHILD:function(t){return t[1]=t[1].toLowerCase(),"nth"===t[1].slice(0,3)?(t[3]||e.error(t[0]),t[4]=+(t[4]?t[5]+(t[6]||1):2*("even"===t[3]||"odd"===t[3])),t[5]=+(t[7]+t[8]||"odd"===t[3])):t[3]&&e.error(t[0]),t},PSEUDO:function(t){var e,i=!t[6]&&t[2];return pe.CHILD.test(t[0])?null:(t[3]?t[2]=t[4]||t[5]||"":i&&fe.test(i)&&(e=T(i,!0))&&(e=i.indexOf(")",i.length-e)-i.length)&&(t[0]=t[0].slice(0,e),t[2]=i.slice(0,e)),t.slice(0,3))}},filter:{TAG:function(t){var e=t.replace(we,_e).toLowerCase();return"*"===t?function(){return!0}:function(t){return t.nodeName&&t.nodeName.toLowerCase()===e}},CLASS:function(t){var e=I[t+" "];return e||(e=new RegExp("(^|"+ne+")"+t+"("+ne+"|$)"))&&I(t,function(t){return e.test("string"==typeof t.className&&t.className||typeof t.getAttribute!==X&&t.getAttribute("class")||"")})},ATTR:function(t,i,n){return function(s){var o=e.attr(s,t);return null==o?"!="===i:i?(o+="","="===i?o===n:"!="===i?o!==n:"^="===i?n&&0===o.indexOf(n):"*="===i?n&&o.indexOf(n)>-1:"$="===i?n&&o.slice(-n.length)===n:"~="===i?(" "+o+" ").indexOf(n)>-1:"|="===i?o===n||o.slice(0,n.length+1)===n+"-":!1):!0}},CHILD:function(t,e,i,n,s){var o="nth"!==t.slice(0,3),r="last"!==t.slice(-4),a="of-type"===e;return 1===n&&0===s?function(t){return!!t.parentNode}:function(e,i,h){var u,c,l,f,d,p,g=o!==r?"nextSibling":"previousSibling",m=e.parentNode,v=a&&e.nodeName.toLowerCase(),y=!h&&!a;if(m){if(o){for(;g;){for(l=e;l=l[g];)if(a?l.nodeName.toLowerCase()===v:1===l.nodeType)return!1;p=g="only"===t&&!p&&"nextSibling"}return!0}if(p=[r?m.firstChild:m.lastChild],r&&y){for(c=m[F]||(m[F]={}),u=c[t]||[],d=u[0]===B&&u[1],f=u[0]===B&&u[2],l=d&&m.childNodes[d];l=++d&&l&&l[g]||(f=d=0)||p.pop();)if(1===l.nodeType&&++f&&l===e){c[t]=[B,d,f];break}}else if(y&&(u=(e[F]||(e[F]={}))[t])&&u[0]===B)f=u[1];else for(;(l=++d&&l&&l[g]||(f=d=0)||p.pop())&&((a?l.nodeName.toLowerCase()!==v:1!==l.nodeType)||!++f||(y&&((l[F]||(l[F]={}))[t]=[B,f]),l!==e)););return f-=s,f===n||f%n===0&&f/n>=0}}},PSEUDO:function(t,i){var s,o=_.pseudos[t]||_.setFilters[t.toLowerCase()]||e.error("unsupported pseudo: "+t);return o[F]?o(i):o.length>1?(s=[t,t,"",i],_.setFilters.hasOwnProperty(t.toLowerCase())?n(function(t,e){for(var n,s=o(t,i),r=s.length;r--;)n=ee.call(t,s[r]),t[n]=!(e[n]=s[r])}):function(t){return o(t,0,s)}):o}},pseudos:{not:n(function(t){var e=[],i=[],s=N(t.replace(he,"$1"));return s[F]?n(function(t,e,i,n){for(var o,r=s(t,null,n,[]),a=t.length;a--;)(o=r[a])&&(t[a]=!(e[a]=o))}):function(t,n,o){return e[0]=t,s(e,null,o,i),!i.pop()}}),has:n(function(t){return function(i){return e(t,i).length>0}}),contains:n(function(t){return function(e){return(e.textContent||e.innerText||k(e)).indexOf(t)>-1}}),lang:n(function(t){return de.test(t||"")||e.error("unsupported lang: "+t),t=t.replace(we,_e).toLowerCase(),function(e){var i;do if(i=D?e.lang:e.getAttribute("xml:lang")||e.getAttribute("lang"))return i=i.toLowerCase(),i===t||0===i.indexOf(t+"-");while((e=e.parentNode)&&1===e.nodeType);return!1}}),target:function(e){var i=t.location&&t.location.hash;return i&&i.slice(1)===e.id},root:function(t){return t===E},focus:function(t){return t===O.activeElement&&(!O.hasFocus||O.hasFocus())&&!!(t.type||t.href||~t.tabIndex)},enabled:function(t){return t.disabled===!1},disabled:function(t){return t.disabled===!0},checked:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&!!t.checked||"option"===e&&!!t.selected},selected:function(t){return t.parentNode&&t.parentNode.selectedIndex,t.selected===!0},empty:function(t){for(t=t.firstChild;t;t=t.nextSibling)if(t.nodeType<6)return!1;return!0},parent:function(t){return!_.pseudos.empty(t)},header:function(t){return me.test(t.nodeName)},input:function(t){return ge.test(t.nodeName)},button:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&"button"===t.type||"button"===e},text:function(t){var e;return"input"===t.nodeName.toLowerCase()&&"text"===t.type&&(null==(e=t.getAttribute("type"))||"text"===e.toLowerCase())},first:u(function(){return[0]}),last:u(function(t,e){return[e-1]}),eq:u(function(t,e,i){return[0>i?i+e:i]}),even:u(function(t,e){for(var i=0;e>i;i+=2)t.push(i);return t}),odd:u(function(t,e){for(var i=1;e>i;i+=2)t.push(i);return t}),lt:u(function(t,e,i){for(var n=0>i?i+e:i;--n>=0;)t.push(n);return t}),gt:u(function(t,e,i){for(var n=0>i?i+e:i;++n<e;)t.push(n);return t})}},_.pseudos.nth=_.pseudos.eq;for(b in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})_.pseudos[b]=a(b);for(b in{submit:!0,reset:!0})_.pseudos[b]=h(b);return l.prototype=_.filters=_.pseudos,_.setFilters=new l,T=e.tokenize=function(t,i){var n,s,o,r,a,h,u,c=z[t+" "];if(c)return i?0:c.slice(0);for(a=t,h=[],u=_.preFilter;a;){(!n||(s=ue.exec(a)))&&(s&&(a=a.slice(s[0].length)||a),h.push(o=[])),n=!1,(s=ce.exec(a))&&(n=s.shift(),o.push({value:n,type:s[0].replace(he," ")}),a=a.slice(n.length));for(r in _.filter)!(s=pe[r].exec(a))||u[r]&&!(s=u[r](s))||(n=s.shift(),o.push({value:n,type:r,matches:s}),a=a.slice(n.length));if(!n)break}return i?a.length:a?e.error(t):z(t,h).slice(0)},N=e.compile=function(t,e){var i,n=[],s=[],o=G[t+" "];if(!o){for(e||(e=T(t)),i=e.length;i--;)o=y(e[i]),o[F]?n.push(o):s.push(o);o=G(t,x(s,n)),o.selector=t}return o},C=e.select=function(t,e,i,n){var s,o,r,a,h,u="function"==typeof t&&t,l=!n&&T(t=u.selector||t);if(i=i||[],1===l.length){if(o=l[0]=l[0].slice(0),o.length>2&&"ID"===(r=o[0]).type&&w.getById&&9===e.nodeType&&D&&_.relative[o[1].type]){if(e=(_.find.ID(r.matches[0].replace(we,_e),e)||[])[0],!e)return i;u&&(e=e.parentNode),t=t.slice(o.shift().value.length)}for(s=pe.needsContext.test(t)?0:o.length;s--&&(r=o[s],!_.relative[a=r.type]);)if((h=_.find[a])&&(n=h(r.matches[0].replace(we,_e),xe.test(o[0].type)&&c(e.parentNode)||e))){if(o.splice(s,1),t=n.length&&f(o),!t)return Z.apply(i,n),i;break}}return(u||N(t,l))(n,e,!D,i,xe.test(t)&&c(e.parentNode)||e),i},w.sortStable=F.split("").sort($).join("")===F,w.detectDuplicates=!!P,M(),w.sortDetached=s(function(t){return 1&t.compareDocumentPosition(O.createElement("div"))}),s(function(t){return t.innerHTML="<a href='#'></a>","#"===t.firstChild.getAttribute("href")})||o("type|href|height|width",function(t,e,i){return i?void 0:t.getAttribute(e,"type"===e.toLowerCase()?1:2)}),w.attributes&&s(function(t){return t.innerHTML="<input/>",t.firstChild.setAttribute("value",""),""===t.firstChild.getAttribute("value")})||o("value",function(t,e,i){return i||"input"!==t.nodeName.toLowerCase()?void 0:t.defaultValue}),s(function(t){return null==t.getAttribute("disabled")})||o(ie,function(t,e,i){var n;return i?void 0:t[e]===!0?e.toLowerCase():(n=t.getAttributeNode(e))&&n.specified?n.value:null}),e}(t);Z.find=se,Z.expr=se.selectors,Z.expr[":"]=Z.expr.pseudos,Z.unique=se.uniqueSort,Z.text=se.getText,Z.isXMLDoc=se.isXML,Z.contains=se.contains;var oe=Z.expr.match.needsContext,re=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,ae=/^.[^:#\[\.,]*$/;Z.filter=function(t,e,i){var n=e[0];return i&&(t=":not("+t+")"),1===e.length&&1===n.nodeType?Z.find.matchesSelector(n,t)?[n]:[]:Z.find.matches(t,Z.grep(e,function(t){return 1===t.nodeType}))},Z.fn.extend({find:function(t){var e,i=this.length,n=[],s=this;if("string"!=typeof t)return this.pushStack(Z(t).filter(function(){for(e=0;i>e;e++)if(Z.contains(s[e],this))return!0}));for(e=0;i>e;e++)Z.find(t,s[e],n);return n=this.pushStack(i>1?Z.unique(n):n),n.selector=this.selector?this.selector+" "+t:t,n},filter:function(t){return this.pushStack(n(this,t||[],!1))},not:function(t){return this.pushStack(n(this,t||[],!0))},is:function(t){return!!n(this,"string"==typeof t&&oe.test(t)?Z(t):t||[],!1).length}});var he,ue=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,ce=Z.fn.init=function(t,e){var i,n;if(!t)return this;if("string"==typeof t){if(i="<"===t[0]&&">"===t[t.length-1]&&t.length>=3?[null,t,null]:ue.exec(t),!i||!i[1]&&e)return!e||e.jquery?(e||he).find(t):this.constructor(e).find(t);if(i[1]){if(e=e instanceof Z?e[0]:e,Z.merge(this,Z.parseHTML(i[1],e&&e.nodeType?e.ownerDocument||e:K,!0)),re.test(i[1])&&Z.isPlainObject(e))for(i in e)Z.isFunction(this[i])?this[i](e[i]):this.attr(i,e[i]);return this}return n=K.getElementById(i[2]),n&&n.parentNode&&(this.length=1,this[0]=n),this.context=K,this.selector=t,this}return t.nodeType?(this.context=this[0]=t,this.length=1,this):Z.isFunction(t)?"undefined"!=typeof he.ready?he.ready(t):t(Z):(void 0!==t.selector&&(this.selector=t.selector,this.context=t.context),Z.makeArray(t,this))};ce.prototype=Z.fn,he=Z(K);var le=/^(?:parents|prev(?:Until|All))/,fe={children:!0,contents:!0,next:!0,prev:!0};Z.extend({dir:function(t,e,i){for(var n=[],s=void 0!==i;(t=t[e])&&9!==t.nodeType;)if(1===t.nodeType){if(s&&Z(t).is(i))break;n.push(t)}return n},sibling:function(t,e){for(var i=[];t;t=t.nextSibling)1===t.nodeType&&t!==e&&i.push(t);return i}}),Z.fn.extend({has:function(t){var e=Z(t,this),i=e.length;return this.filter(function(){for(var t=0;i>t;t++)if(Z.contains(this,e[t]))return!0})},closest:function(t,e){for(var i,n=0,s=this.length,o=[],r=oe.test(t)||"string"!=typeof t?Z(t,e||this.context):0;s>n;n++)for(i=this[n];i&&i!==e;i=i.parentNode)if(i.nodeType<11&&(r?r.index(i)>-1:1===i.nodeType&&Z.find.matchesSelector(i,t))){o.push(i);break}return this.pushStack(o.length>1?Z.unique(o):o)},index:function(t){return t?"string"==typeof t?$.call(Z(t),this[0]):$.call(this,t.jquery?t[0]:t):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(t,e){return this.pushStack(Z.unique(Z.merge(this.get(),Z(t,e))))},addBack:function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}}),Z.each({parent:function(t){var e=t.parentNode;return e&&11!==e.nodeType?e:null},parents:function(t){return Z.dir(t,"parentNode")},parentsUntil:function(t,e,i){return Z.dir(t,"parentNode",i)},next:function(t){return s(t,"nextSibling")},prev:function(t){return s(t,"previousSibling")},nextAll:function(t){return Z.dir(t,"nextSibling")},prevAll:function(t){return Z.dir(t,"previousSibling")},nextUntil:function(t,e,i){return Z.dir(t,"nextSibling",i)},prevUntil:function(t,e,i){return Z.dir(t,"previousSibling",i)},siblings:function(t){return Z.sibling((t.parentNode||{}).firstChild,t)},children:function(t){return Z.sibling(t.firstChild)},contents:function(t){return t.contentDocument||Z.merge([],t.childNodes)}},function(t,e){Z.fn[t]=function(i,n){var s=Z.map(this,e,i);return"Until"!==t.slice(-5)&&(n=i),n&&"string"==typeof n&&(s=Z.filter(n,s)),this.length>1&&(fe[t]||Z.unique(s),le.test(t)&&s.reverse()),this.pushStack(s)}});var de=/\S+/g,pe={};Z.Callbacks=function(t){t="string"==typeof t?pe[t]||o(t):Z.extend({},t);var e,i,n,s,r,a,h=[],u=!t.once&&[],c=function(o){for(e=t.memory&&o,i=!0,a=s||0,s=0,r=h.length,n=!0;h&&r>a;a++)if(h[a].apply(o[0],o[1])===!1&&t.stopOnFalse){e=!1;break}n=!1,h&&(u?u.length&&c(u.shift()):e?h=[]:l.disable())},l={add:function(){if(h){var i=h.length;!function o(e){Z.each(e,function(e,i){var n=Z.type(i);"function"===n?t.unique&&l.has(i)||h.push(i):i&&i.length&&"string"!==n&&o(i)})}(arguments),n?r=h.length:e&&(s=i,c(e))}return this},remove:function(){return h&&Z.each(arguments,function(t,e){for(var i;(i=Z.inArray(e,h,i))>-1;)h.splice(i,1),n&&(r>=i&&r--,a>=i&&a--)}),this},has:function(t){return t?Z.inArray(t,h)>-1:!(!h||!h.length)},empty:function(){return h=[],r=0,this},disable:function(){return h=u=e=void 0,this},disabled:function(){return!h},lock:function(){return u=void 0,e||l.disable(),this},locked:function(){return!u},fireWith:function(t,e){return!h||i&&!u||(e=e||[],e=[t,e.slice?e.slice():e],n?u.push(e):c(e)),this},fire:function(){return l.fireWith(this,arguments),this},fired:function(){return!!i}};return l},Z.extend({Deferred:function(t){var e=[["resolve","done",Z.Callbacks("once memory"),"resolved"],["reject","fail",Z.Callbacks("once memory"),"rejected"],["notify","progress",Z.Callbacks("memory")]],i="pending",n={state:function(){return i},always:function(){return s.done(arguments).fail(arguments),this},then:function(){var t=arguments;return Z.Deferred(function(i){Z.each(e,function(e,o){var r=Z.isFunction(t[e])&&t[e];s[o[1]](function(){var t=r&&r.apply(this,arguments);t&&Z.isFunction(t.promise)?t.promise().done(i.resolve).fail(i.reject).progress(i.notify):i[o[0]+"With"](this===n?i.promise():this,r?[t]:arguments)})}),t=null}).promise()},promise:function(t){return null!=t?Z.extend(t,n):n}},s={};return n.pipe=n.then,Z.each(e,function(t,o){var r=o[2],a=o[3];n[o[1]]=r.add,a&&r.add(function(){i=a},e[1^t][2].disable,e[2][2].lock),s[o[0]]=function(){return s[o[0]+"With"](this===s?n:this,arguments),this},s[o[0]+"With"]=r.fireWith}),n.promise(s),t&&t.call(s,s),s},when:function(t){var e,i,n,s=0,o=I.call(arguments),r=o.length,a=1!==r||t&&Z.isFunction(t.promise)?r:0,h=1===a?t:Z.Deferred(),u=function(t,i,n){return function(s){i[t]=this,n[t]=arguments.length>1?I.call(arguments):s,n===e?h.notifyWith(i,n):--a||h.resolveWith(i,n)}};if(r>1)for(e=new Array(r),i=new Array(r),n=new Array(r);r>s;s++)o[s]&&Z.isFunction(o[s].promise)?o[s].promise().done(u(s,n,o)).fail(h.reject).progress(u(s,i,e)):--a;return a||h.resolveWith(n,o),h.promise()}});var ge;Z.fn.ready=function(t){return Z.ready.promise().done(t),this},Z.extend({isReady:!1,readyWait:1,holdReady:function(t){t?Z.readyWait++:Z.ready(!0)},ready:function(t){(t===!0?--Z.readyWait:Z.isReady)||(Z.isReady=!0,t!==!0&&--Z.readyWait>0||(ge.resolveWith(K,[Z]),Z.fn.triggerHandler&&(Z(K).triggerHandler("ready"),Z(K).off("ready"))))}}),Z.ready.promise=function(e){return ge||(ge=Z.Deferred(),"complete"===K.readyState?setTimeout(Z.ready):(K.addEventListener("DOMContentLoaded",r,!1),t.addEventListener("load",r,!1))),ge.promise(e)},Z.ready.promise();var me=Z.access=function(t,e,i,n,s,o,r){var a=0,h=t.length,u=null==i;if("object"===Z.type(i)){s=!0;for(a in i)Z.access(t,e,a,i[a],!0,o,r)}else if(void 0!==n&&(s=!0,Z.isFunction(n)||(r=!0),u&&(r?(e.call(t,n),e=null):(u=e,e=function(t,e,i){return u.call(Z(t),i)})),e))for(;h>a;a++)e(t[a],i,r?n:n.call(t[a],a,e(t[a],i)));return s?t:u?e.call(t):h?e(t[0],i):o};Z.acceptData=function(t){return 1===t.nodeType||9===t.nodeType||!+t.nodeType},a.uid=1,a.accepts=Z.acceptData,a.prototype={key:function(t){if(!a.accepts(t))return 0;var e={},i=t[this.expando];if(!i){i=a.uid++;try{e[this.expando]={value:i},Object.defineProperties(t,e)}catch(n){e[this.expando]=i,Z.extend(t,e)}}return this.cache[i]||(this.cache[i]={}),i},set:function(t,e,i){var n,s=this.key(t),o=this.cache[s];
if("string"==typeof e)o[e]=i;else if(Z.isEmptyObject(o))Z.extend(this.cache[s],e);else for(n in e)o[n]=e[n];return o},get:function(t,e){var i=this.cache[this.key(t)];return void 0===e?i:i[e]},access:function(t,e,i){var n;return void 0===e||e&&"string"==typeof e&&void 0===i?(n=this.get(t,e),void 0!==n?n:this.get(t,Z.camelCase(e))):(this.set(t,e,i),void 0!==i?i:e)},remove:function(t,e){var i,n,s,o=this.key(t),r=this.cache[o];if(void 0===e)this.cache[o]={};else{Z.isArray(e)?n=e.concat(e.map(Z.camelCase)):(s=Z.camelCase(e),e in r?n=[e,s]:(n=s,n=n in r?[n]:n.match(de)||[])),i=n.length;for(;i--;)delete r[n[i]]}},hasData:function(t){return!Z.isEmptyObject(this.cache[t[this.expando]]||{})},discard:function(t){t[this.expando]&&delete this.cache[t[this.expando]]}};var ve=new a,ye=new a,xe=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,be=/([A-Z])/g;Z.extend({hasData:function(t){return ye.hasData(t)||ve.hasData(t)},data:function(t,e,i){return ye.access(t,e,i)},removeData:function(t,e){ye.remove(t,e)},_data:function(t,e,i){return ve.access(t,e,i)},_removeData:function(t,e){ve.remove(t,e)}}),Z.fn.extend({data:function(t,e){var i,n,s,o=this[0],r=o&&o.attributes;if(void 0===t){if(this.length&&(s=ye.get(o),1===o.nodeType&&!ve.get(o,"hasDataAttrs"))){for(i=r.length;i--;)r[i]&&(n=r[i].name,0===n.indexOf("data-")&&(n=Z.camelCase(n.slice(5)),h(o,n,s[n])));ve.set(o,"hasDataAttrs",!0)}return s}return"object"==typeof t?this.each(function(){ye.set(this,t)}):me(this,function(e){var i,n=Z.camelCase(t);if(o&&void 0===e){if(i=ye.get(o,t),void 0!==i)return i;if(i=ye.get(o,n),void 0!==i)return i;if(i=h(o,n,void 0),void 0!==i)return i}else this.each(function(){var i=ye.get(this,n);ye.set(this,n,e),-1!==t.indexOf("-")&&void 0!==i&&ye.set(this,t,e)})},null,e,arguments.length>1,null,!0)},removeData:function(t){return this.each(function(){ye.remove(this,t)})}}),Z.extend({queue:function(t,e,i){var n;return t?(e=(e||"fx")+"queue",n=ve.get(t,e),i&&(!n||Z.isArray(i)?n=ve.access(t,e,Z.makeArray(i)):n.push(i)),n||[]):void 0},dequeue:function(t,e){e=e||"fx";var i=Z.queue(t,e),n=i.length,s=i.shift(),o=Z._queueHooks(t,e),r=function(){Z.dequeue(t,e)};"inprogress"===s&&(s=i.shift(),n--),s&&("fx"===e&&i.unshift("inprogress"),delete o.stop,s.call(t,r,o)),!n&&o&&o.empty.fire()},_queueHooks:function(t,e){var i=e+"queueHooks";return ve.get(t,i)||ve.access(t,i,{empty:Z.Callbacks("once memory").add(function(){ve.remove(t,[e+"queue",i])})})}}),Z.fn.extend({queue:function(t,e){var i=2;return"string"!=typeof t&&(e=t,t="fx",i--),arguments.length<i?Z.queue(this[0],t):void 0===e?this:this.each(function(){var i=Z.queue(this,t,e);Z._queueHooks(this,t),"fx"===t&&"inprogress"!==i[0]&&Z.dequeue(this,t)})},dequeue:function(t){return this.each(function(){Z.dequeue(this,t)})},clearQueue:function(t){return this.queue(t||"fx",[])},promise:function(t,e){var i,n=1,s=Z.Deferred(),o=this,r=this.length,a=function(){--n||s.resolveWith(o,[o])};for("string"!=typeof t&&(e=t,t=void 0),t=t||"fx";r--;)i=ve.get(o[r],t+"queueHooks"),i&&i.empty&&(n++,i.empty.add(a));return a(),s.promise(e)}});var we=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,_e=["Top","Right","Bottom","Left"],ke=function(t,e){return t=e||t,"none"===Z.css(t,"display")||!Z.contains(t.ownerDocument,t)},je=/^(?:checkbox|radio)$/i;!function(){var t=K.createDocumentFragment(),e=t.appendChild(K.createElement("div")),i=K.createElement("input");i.setAttribute("type","radio"),i.setAttribute("checked","checked"),i.setAttribute("name","t"),e.appendChild(i),J.checkClone=e.cloneNode(!0).cloneNode(!0).lastChild.checked,e.innerHTML="<textarea>x</textarea>",J.noCloneChecked=!!e.cloneNode(!0).lastChild.defaultValue}();var Te="undefined";J.focusinBubbles="onfocusin"in t;var Ne=/^key/,Ce=/^(?:mouse|pointer|contextmenu)|click/,Se=/^(?:focusinfocus|focusoutblur)$/,Ae=/^([^.]*)(?:\.(.+)|)$/;Z.event={global:{},add:function(t,e,i,n,s){var o,r,a,h,u,c,l,f,d,p,g,m=ve.get(t);if(m)for(i.handler&&(o=i,i=o.handler,s=o.selector),i.guid||(i.guid=Z.guid++),(h=m.events)||(h=m.events={}),(r=m.handle)||(r=m.handle=function(e){return typeof Z!==Te&&Z.event.triggered!==e.type?Z.event.dispatch.apply(t,arguments):void 0}),e=(e||"").match(de)||[""],u=e.length;u--;)a=Ae.exec(e[u])||[],d=g=a[1],p=(a[2]||"").split(".").sort(),d&&(l=Z.event.special[d]||{},d=(s?l.delegateType:l.bindType)||d,l=Z.event.special[d]||{},c=Z.extend({type:d,origType:g,data:n,handler:i,guid:i.guid,selector:s,needsContext:s&&Z.expr.match.needsContext.test(s),namespace:p.join(".")},o),(f=h[d])||(f=h[d]=[],f.delegateCount=0,l.setup&&l.setup.call(t,n,p,r)!==!1||t.addEventListener&&t.addEventListener(d,r,!1)),l.add&&(l.add.call(t,c),c.handler.guid||(c.handler.guid=i.guid)),s?f.splice(f.delegateCount++,0,c):f.push(c),Z.event.global[d]=!0)},remove:function(t,e,i,n,s){var o,r,a,h,u,c,l,f,d,p,g,m=ve.hasData(t)&&ve.get(t);if(m&&(h=m.events)){for(e=(e||"").match(de)||[""],u=e.length;u--;)if(a=Ae.exec(e[u])||[],d=g=a[1],p=(a[2]||"").split(".").sort(),d){for(l=Z.event.special[d]||{},d=(n?l.delegateType:l.bindType)||d,f=h[d]||[],a=a[2]&&new RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"),r=o=f.length;o--;)c=f[o],!s&&g!==c.origType||i&&i.guid!==c.guid||a&&!a.test(c.namespace)||n&&n!==c.selector&&("**"!==n||!c.selector)||(f.splice(o,1),c.selector&&f.delegateCount--,l.remove&&l.remove.call(t,c));r&&!f.length&&(l.teardown&&l.teardown.call(t,p,m.handle)!==!1||Z.removeEvent(t,d,m.handle),delete h[d])}else for(d in h)Z.event.remove(t,d+e[u],i,n,!0);Z.isEmptyObject(h)&&(delete m.handle,ve.remove(t,"events"))}},trigger:function(e,i,n,s){var o,r,a,h,u,c,l,f=[n||K],d=U.call(e,"type")?e.type:e,p=U.call(e,"namespace")?e.namespace.split("."):[];if(r=a=n=n||K,3!==n.nodeType&&8!==n.nodeType&&!Se.test(d+Z.event.triggered)&&(d.indexOf(".")>=0&&(p=d.split("."),d=p.shift(),p.sort()),u=d.indexOf(":")<0&&"on"+d,e=e[Z.expando]?e:new Z.Event(d,"object"==typeof e&&e),e.isTrigger=s?2:3,e.namespace=p.join("."),e.namespace_re=e.namespace?new RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,e.result=void 0,e.target||(e.target=n),i=null==i?[e]:Z.makeArray(i,[e]),l=Z.event.special[d]||{},s||!l.trigger||l.trigger.apply(n,i)!==!1)){if(!s&&!l.noBubble&&!Z.isWindow(n)){for(h=l.delegateType||d,Se.test(h+d)||(r=r.parentNode);r;r=r.parentNode)f.push(r),a=r;a===(n.ownerDocument||K)&&f.push(a.defaultView||a.parentWindow||t)}for(o=0;(r=f[o++])&&!e.isPropagationStopped();)e.type=o>1?h:l.bindType||d,c=(ve.get(r,"events")||{})[e.type]&&ve.get(r,"handle"),c&&c.apply(r,i),c=u&&r[u],c&&c.apply&&Z.acceptData(r)&&(e.result=c.apply(r,i),e.result===!1&&e.preventDefault());return e.type=d,s||e.isDefaultPrevented()||l._default&&l._default.apply(f.pop(),i)!==!1||!Z.acceptData(n)||u&&Z.isFunction(n[d])&&!Z.isWindow(n)&&(a=n[u],a&&(n[u]=null),Z.event.triggered=d,n[d](),Z.event.triggered=void 0,a&&(n[u]=a)),e.result}},dispatch:function(t){t=Z.event.fix(t);var e,i,n,s,o,r=[],a=I.call(arguments),h=(ve.get(this,"events")||{})[t.type]||[],u=Z.event.special[t.type]||{};if(a[0]=t,t.delegateTarget=this,!u.preDispatch||u.preDispatch.call(this,t)!==!1){for(r=Z.event.handlers.call(this,t,h),e=0;(s=r[e++])&&!t.isPropagationStopped();)for(t.currentTarget=s.elem,i=0;(o=s.handlers[i++])&&!t.isImmediatePropagationStopped();)(!t.namespace_re||t.namespace_re.test(o.namespace))&&(t.handleObj=o,t.data=o.data,n=((Z.event.special[o.origType]||{}).handle||o.handler).apply(s.elem,a),void 0!==n&&(t.result=n)===!1&&(t.preventDefault(),t.stopPropagation()));return u.postDispatch&&u.postDispatch.call(this,t),t.result}},handlers:function(t,e){var i,n,s,o,r=[],a=e.delegateCount,h=t.target;if(a&&h.nodeType&&(!t.button||"click"!==t.type))for(;h!==this;h=h.parentNode||this)if(h.disabled!==!0||"click"!==t.type){for(n=[],i=0;a>i;i++)o=e[i],s=o.selector+" ",void 0===n[s]&&(n[s]=o.needsContext?Z(s,this).index(h)>=0:Z.find(s,this,null,[h]).length),n[s]&&n.push(o);n.length&&r.push({elem:h,handlers:n})}return a<e.length&&r.push({elem:this,handlers:e.slice(a)}),r},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(t,e){return null==t.which&&(t.which=null!=e.charCode?e.charCode:e.keyCode),t}},mouseHooks:{props:"button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(t,e){var i,n,s,o=e.button;return null==t.pageX&&null!=e.clientX&&(i=t.target.ownerDocument||K,n=i.documentElement,s=i.body,t.pageX=e.clientX+(n&&n.scrollLeft||s&&s.scrollLeft||0)-(n&&n.clientLeft||s&&s.clientLeft||0),t.pageY=e.clientY+(n&&n.scrollTop||s&&s.scrollTop||0)-(n&&n.clientTop||s&&s.clientTop||0)),t.which||void 0===o||(t.which=1&o?1:2&o?3:4&o?2:0),t}},fix:function(t){if(t[Z.expando])return t;var e,i,n,s=t.type,o=t,r=this.fixHooks[s];for(r||(this.fixHooks[s]=r=Ce.test(s)?this.mouseHooks:Ne.test(s)?this.keyHooks:{}),n=r.props?this.props.concat(r.props):this.props,t=new Z.Event(o),e=n.length;e--;)i=n[e],t[i]=o[i];return t.target||(t.target=K),3===t.target.nodeType&&(t.target=t.target.parentNode),r.filter?r.filter(t,o):t},special:{load:{noBubble:!0},focus:{trigger:function(){return this!==l()&&this.focus?(this.focus(),!1):void 0},delegateType:"focusin"},blur:{trigger:function(){return this===l()&&this.blur?(this.blur(),!1):void 0},delegateType:"focusout"},click:{trigger:function(){return"checkbox"===this.type&&this.click&&Z.nodeName(this,"input")?(this.click(),!1):void 0},_default:function(t){return Z.nodeName(t.target,"a")}},beforeunload:{postDispatch:function(t){void 0!==t.result&&t.originalEvent&&(t.originalEvent.returnValue=t.result)}}},simulate:function(t,e,i,n){var s=Z.extend(new Z.Event,i,{type:t,isSimulated:!0,originalEvent:{}});n?Z.event.trigger(s,null,e):Z.event.dispatch.call(e,s),s.isDefaultPrevented()&&i.preventDefault()}},Z.removeEvent=function(t,e,i){t.removeEventListener&&t.removeEventListener(e,i,!1)},Z.Event=function(t,e){return this instanceof Z.Event?(t&&t.type?(this.originalEvent=t,this.type=t.type,this.isDefaultPrevented=t.defaultPrevented||void 0===t.defaultPrevented&&t.returnValue===!1?u:c):this.type=t,e&&Z.extend(this,e),this.timeStamp=t&&t.timeStamp||Z.now(),this[Z.expando]=!0,void 0):new Z.Event(t,e)},Z.Event.prototype={isDefaultPrevented:c,isPropagationStopped:c,isImmediatePropagationStopped:c,preventDefault:function(){var t=this.originalEvent;this.isDefaultPrevented=u,t&&t.preventDefault&&t.preventDefault()},stopPropagation:function(){var t=this.originalEvent;this.isPropagationStopped=u,t&&t.stopPropagation&&t.stopPropagation()},stopImmediatePropagation:function(){var t=this.originalEvent;this.isImmediatePropagationStopped=u,t&&t.stopImmediatePropagation&&t.stopImmediatePropagation(),this.stopPropagation()}},Z.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(t,e){Z.event.special[t]={delegateType:e,bindType:e,handle:function(t){var i,n=this,s=t.relatedTarget,o=t.handleObj;return(!s||s!==n&&!Z.contains(n,s))&&(t.type=o.origType,i=o.handler.apply(this,arguments),t.type=e),i}}}),J.focusinBubbles||Z.each({focus:"focusin",blur:"focusout"},function(t,e){var i=function(t){Z.event.simulate(e,t.target,Z.event.fix(t),!0)};Z.event.special[e]={setup:function(){var n=this.ownerDocument||this,s=ve.access(n,e);s||n.addEventListener(t,i,!0),ve.access(n,e,(s||0)+1)},teardown:function(){var n=this.ownerDocument||this,s=ve.access(n,e)-1;s?ve.access(n,e,s):(n.removeEventListener(t,i,!0),ve.remove(n,e))}}}),Z.fn.extend({on:function(t,e,i,n,s){var o,r;if("object"==typeof t){"string"!=typeof e&&(i=i||e,e=void 0);for(r in t)this.on(r,e,i,t[r],s);return this}if(null==i&&null==n?(n=e,i=e=void 0):null==n&&("string"==typeof e?(n=i,i=void 0):(n=i,i=e,e=void 0)),n===!1)n=c;else if(!n)return this;return 1===s&&(o=n,n=function(t){return Z().off(t),o.apply(this,arguments)},n.guid=o.guid||(o.guid=Z.guid++)),this.each(function(){Z.event.add(this,t,n,i,e)})},one:function(t,e,i,n){return this.on(t,e,i,n,1)},off:function(t,e,i){var n,s;if(t&&t.preventDefault&&t.handleObj)return n=t.handleObj,Z(t.delegateTarget).off(n.namespace?n.origType+"."+n.namespace:n.origType,n.selector,n.handler),this;if("object"==typeof t){for(s in t)this.off(s,e,t[s]);return this}return(e===!1||"function"==typeof e)&&(i=e,e=void 0),i===!1&&(i=c),this.each(function(){Z.event.remove(this,t,i,e)})},trigger:function(t,e){return this.each(function(){Z.event.trigger(t,e,this)})},triggerHandler:function(t,e){var i=this[0];return i?Z.event.trigger(t,e,i,!0):void 0}});var Pe=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,Me=/<([\w:]+)/,Oe=/<|&#?\w+;/,Ee=/<(?:script|style|link)/i,De=/checked\s*(?:[^=]|=\s*.checked.)/i,Le=/^$|\/(?:java|ecma)script/i,Ve=/^true\/(.*)/,qe=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,Re={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};Re.optgroup=Re.option,Re.tbody=Re.tfoot=Re.colgroup=Re.caption=Re.thead,Re.th=Re.td,Z.extend({clone:function(t,e,i){var n,s,o,r,a=t.cloneNode(!0),h=Z.contains(t.ownerDocument,t);if(!(J.noCloneChecked||1!==t.nodeType&&11!==t.nodeType||Z.isXMLDoc(t)))for(r=v(a),o=v(t),n=0,s=o.length;s>n;n++)y(o[n],r[n]);if(e)if(i)for(o=o||v(t),r=r||v(a),n=0,s=o.length;s>n;n++)m(o[n],r[n]);else m(t,a);return r=v(a,"script"),r.length>0&&g(r,!h&&v(t,"script")),a},buildFragment:function(t,e,i,n){for(var s,o,r,a,h,u,c=e.createDocumentFragment(),l=[],f=0,d=t.length;d>f;f++)if(s=t[f],s||0===s)if("object"===Z.type(s))Z.merge(l,s.nodeType?[s]:s);else if(Oe.test(s)){for(o=o||c.appendChild(e.createElement("div")),r=(Me.exec(s)||["",""])[1].toLowerCase(),a=Re[r]||Re._default,o.innerHTML=a[1]+s.replace(Pe,"<$1></$2>")+a[2],u=a[0];u--;)o=o.lastChild;Z.merge(l,o.childNodes),o=c.firstChild,o.textContent=""}else l.push(e.createTextNode(s));for(c.textContent="",f=0;s=l[f++];)if((!n||-1===Z.inArray(s,n))&&(h=Z.contains(s.ownerDocument,s),o=v(c.appendChild(s),"script"),h&&g(o),i))for(u=0;s=o[u++];)Le.test(s.type||"")&&i.push(s);return c},cleanData:function(t){for(var e,i,n,s,o=Z.event.special,r=0;void 0!==(i=t[r]);r++){if(Z.acceptData(i)&&(s=i[ve.expando],s&&(e=ve.cache[s]))){if(e.events)for(n in e.events)o[n]?Z.event.remove(i,n):Z.removeEvent(i,n,e.handle);ve.cache[s]&&delete ve.cache[s]}delete ye.cache[i[ye.expando]]}}}),Z.fn.extend({text:function(t){return me(this,function(t){return void 0===t?Z.text(this):this.empty().each(function(){(1===this.nodeType||11===this.nodeType||9===this.nodeType)&&(this.textContent=t)})},null,t,arguments.length)},append:function(){return this.domManip(arguments,function(t){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var e=f(this,t);e.appendChild(t)}})},prepend:function(){return this.domManip(arguments,function(t){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var e=f(this,t);e.insertBefore(t,e.firstChild)}})},before:function(){return this.domManip(arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this)})},after:function(){return this.domManip(arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this.nextSibling)})},remove:function(t,e){for(var i,n=t?Z.filter(t,this):this,s=0;null!=(i=n[s]);s++)e||1!==i.nodeType||Z.cleanData(v(i)),i.parentNode&&(e&&Z.contains(i.ownerDocument,i)&&g(v(i,"script")),i.parentNode.removeChild(i));return this},empty:function(){for(var t,e=0;null!=(t=this[e]);e++)1===t.nodeType&&(Z.cleanData(v(t,!1)),t.textContent="");return this},clone:function(t,e){return t=null==t?!1:t,e=null==e?t:e,this.map(function(){return Z.clone(this,t,e)})},html:function(t){return me(this,function(t){var e=this[0]||{},i=0,n=this.length;if(void 0===t&&1===e.nodeType)return e.innerHTML;if("string"==typeof t&&!Ee.test(t)&&!Re[(Me.exec(t)||["",""])[1].toLowerCase()]){t=t.replace(Pe,"<$1></$2>");try{for(;n>i;i++)e=this[i]||{},1===e.nodeType&&(Z.cleanData(v(e,!1)),e.innerHTML=t);e=0}catch(s){}}e&&this.empty().append(t)},null,t,arguments.length)},replaceWith:function(){var t=arguments[0];return this.domManip(arguments,function(e){t=this.parentNode,Z.cleanData(v(this)),t&&t.replaceChild(e,this)}),t&&(t.length||t.nodeType)?this:this.remove()},detach:function(t){return this.remove(t,!0)},domManip:function(t,e){t=z.apply([],t);var i,n,s,o,r,a,h=0,u=this.length,c=this,l=u-1,f=t[0],g=Z.isFunction(f);if(g||u>1&&"string"==typeof f&&!J.checkClone&&De.test(f))return this.each(function(i){var n=c.eq(i);g&&(t[0]=f.call(this,i,n.html())),n.domManip(t,e)});if(u&&(i=Z.buildFragment(t,this[0].ownerDocument,!1,this),n=i.firstChild,1===i.childNodes.length&&(i=n),n)){for(s=Z.map(v(i,"script"),d),o=s.length;u>h;h++)r=i,h!==l&&(r=Z.clone(r,!0,!0),o&&Z.merge(s,v(r,"script"))),e.call(this[h],r,h);if(o)for(a=s[s.length-1].ownerDocument,Z.map(s,p),h=0;o>h;h++)r=s[h],Le.test(r.type||"")&&!ve.access(r,"globalEval")&&Z.contains(a,r)&&(r.src?Z._evalUrl&&Z._evalUrl(r.src):Z.globalEval(r.textContent.replace(qe,"")))}return this}}),Z.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(t,e){Z.fn[t]=function(t){for(var i,n=[],s=Z(t),o=s.length-1,r=0;o>=r;r++)i=r===o?this:this.clone(!0),Z(s[r])[e](i),G.apply(n,i.get());return this.pushStack(n)}});var Fe,We={},Be=/^margin/,He=new RegExp("^("+we+")(?!px)[a-z%]+$","i"),Ie=function(t){return t.ownerDocument.defaultView.getComputedStyle(t,null)};!function(){function e(){r.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;display:block;margin-top:1%;top:1%;border:1px;padding:1px;width:4px;position:absolute",r.innerHTML="",s.appendChild(o);var e=t.getComputedStyle(r,null);i="1%"!==e.top,n="4px"===e.width,s.removeChild(o)}var i,n,s=K.documentElement,o=K.createElement("div"),r=K.createElement("div");r.style&&(r.style.backgroundClip="content-box",r.cloneNode(!0).style.backgroundClip="",J.clearCloneStyle="content-box"===r.style.backgroundClip,o.style.cssText="border:0;width:0;height:0;top:0;left:-9999px;margin-top:1px;position:absolute",o.appendChild(r),t.getComputedStyle&&Z.extend(J,{pixelPosition:function(){return e(),i},boxSizingReliable:function(){return null==n&&e(),n},reliableMarginRight:function(){var e,i=r.appendChild(K.createElement("div"));return i.style.cssText=r.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",i.style.marginRight=i.style.width="0",r.style.width="1px",s.appendChild(o),e=!parseFloat(t.getComputedStyle(i,null).marginRight),s.removeChild(o),e}}))}(),Z.swap=function(t,e,i,n){var s,o,r={};for(o in e)r[o]=t.style[o],t.style[o]=e[o];s=i.apply(t,n||[]);for(o in e)t.style[o]=r[o];return s};var ze=/^(none|table(?!-c[ea]).+)/,Ge=new RegExp("^("+we+")(.*)$","i"),$e=new RegExp("^([+-])=("+we+")","i"),Xe={position:"absolute",visibility:"hidden",display:"block"},Ye={letterSpacing:"0",fontWeight:"400"},Ue=["Webkit","O","Moz","ms"];Z.extend({cssHooks:{opacity:{get:function(t,e){if(e){var i=w(t,"opacity");return""===i?"1":i}}}},cssNumber:{columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":"cssFloat"},style:function(t,e,i,n){if(t&&3!==t.nodeType&&8!==t.nodeType&&t.style){var s,o,r,a=Z.camelCase(e),h=t.style;return e=Z.cssProps[a]||(Z.cssProps[a]=k(h,a)),r=Z.cssHooks[e]||Z.cssHooks[a],void 0===i?r&&"get"in r&&void 0!==(s=r.get(t,!1,n))?s:h[e]:(o=typeof i,"string"===o&&(s=$e.exec(i))&&(i=(s[1]+1)*s[2]+parseFloat(Z.css(t,e)),o="number"),null!=i&&i===i&&("number"!==o||Z.cssNumber[a]||(i+="px"),J.clearCloneStyle||""!==i||0!==e.indexOf("background")||(h[e]="inherit"),r&&"set"in r&&void 0===(i=r.set(t,i,n))||(h[e]=i)),void 0)}},css:function(t,e,i,n){var s,o,r,a=Z.camelCase(e);return e=Z.cssProps[a]||(Z.cssProps[a]=k(t.style,a)),r=Z.cssHooks[e]||Z.cssHooks[a],r&&"get"in r&&(s=r.get(t,!0,i)),void 0===s&&(s=w(t,e,n)),"normal"===s&&e in Ye&&(s=Ye[e]),""===i||i?(o=parseFloat(s),i===!0||Z.isNumeric(o)?o||0:s):s}}),Z.each(["height","width"],function(t,e){Z.cssHooks[e]={get:function(t,i,n){return i?ze.test(Z.css(t,"display"))&&0===t.offsetWidth?Z.swap(t,Xe,function(){return N(t,e,n)}):N(t,e,n):void 0},set:function(t,i,n){var s=n&&Ie(t);return j(t,i,n?T(t,e,n,"border-box"===Z.css(t,"boxSizing",!1,s),s):0)}}}),Z.cssHooks.marginRight=_(J.reliableMarginRight,function(t,e){return e?Z.swap(t,{display:"inline-block"},w,[t,"marginRight"]):void 0}),Z.each({margin:"",padding:"",border:"Width"},function(t,e){Z.cssHooks[t+e]={expand:function(i){for(var n=0,s={},o="string"==typeof i?i.split(" "):[i];4>n;n++)s[t+_e[n]+e]=o[n]||o[n-2]||o[0];return s}},Be.test(t)||(Z.cssHooks[t+e].set=j)}),Z.fn.extend({css:function(t,e){return me(this,function(t,e,i){var n,s,o={},r=0;if(Z.isArray(e)){for(n=Ie(t),s=e.length;s>r;r++)o[e[r]]=Z.css(t,e[r],!1,n);return o}return void 0!==i?Z.style(t,e,i):Z.css(t,e)},t,e,arguments.length>1)},show:function(){return C(this,!0)},hide:function(){return C(this)},toggle:function(t){return"boolean"==typeof t?t?this.show():this.hide():this.each(function(){ke(this)?Z(this).show():Z(this).hide()})}}),Z.Tween=S,S.prototype={constructor:S,init:function(t,e,i,n,s,o){this.elem=t,this.prop=i,this.easing=s||"swing",this.options=e,this.start=this.now=this.cur(),this.end=n,this.unit=o||(Z.cssNumber[i]?"":"px")},cur:function(){var t=S.propHooks[this.prop];return t&&t.get?t.get(this):S.propHooks._default.get(this)},run:function(t){var e,i=S.propHooks[this.prop];return this.pos=e=this.options.duration?Z.easing[this.easing](t,this.options.duration*t,0,1,this.options.duration):t,this.now=(this.end-this.start)*e+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),i&&i.set?i.set(this):S.propHooks._default.set(this),this}},S.prototype.init.prototype=S.prototype,S.propHooks={_default:{get:function(t){var e;return null==t.elem[t.prop]||t.elem.style&&null!=t.elem.style[t.prop]?(e=Z.css(t.elem,t.prop,""),e&&"auto"!==e?e:0):t.elem[t.prop]},set:function(t){Z.fx.step[t.prop]?Z.fx.step[t.prop](t):t.elem.style&&(null!=t.elem.style[Z.cssProps[t.prop]]||Z.cssHooks[t.prop])?Z.style(t.elem,t.prop,t.now+t.unit):t.elem[t.prop]=t.now}}},S.propHooks.scrollTop=S.propHooks.scrollLeft={set:function(t){t.elem.nodeType&&t.elem.parentNode&&(t.elem[t.prop]=t.now)}},Z.easing={linear:function(t){return t},swing:function(t){return.5-Math.cos(t*Math.PI)/2}},Z.fx=S.prototype.init,Z.fx.step={};var Je,Ke,Qe=/^(?:toggle|show|hide)$/,Ze=new RegExp("^(?:([+-])=|)("+we+")([a-z%]*)$","i"),ti=/queueHooks$/,ei=[O],ii={"*":[function(t,e){var i=this.createTween(t,e),n=i.cur(),s=Ze.exec(e),o=s&&s[3]||(Z.cssNumber[t]?"":"px"),r=(Z.cssNumber[t]||"px"!==o&&+n)&&Ze.exec(Z.css(i.elem,t)),a=1,h=20;if(r&&r[3]!==o){o=o||r[3],s=s||[],r=+n||1;do a=a||".5",r/=a,Z.style(i.elem,t,r+o);while(a!==(a=i.cur()/n)&&1!==a&&--h)}return s&&(r=i.start=+r||+n||0,i.unit=o,i.end=s[1]?r+(s[1]+1)*s[2]:+s[2]),i}]};Z.Animation=Z.extend(D,{tweener:function(t,e){Z.isFunction(t)?(e=t,t=["*"]):t=t.split(" ");for(var i,n=0,s=t.length;s>n;n++)i=t[n],ii[i]=ii[i]||[],ii[i].unshift(e)},prefilter:function(t,e){e?ei.unshift(t):ei.push(t)}}),Z.speed=function(t,e,i){var n=t&&"object"==typeof t?Z.extend({},t):{complete:i||!i&&e||Z.isFunction(t)&&t,duration:t,easing:i&&e||e&&!Z.isFunction(e)&&e};return n.duration=Z.fx.off?0:"number"==typeof n.duration?n.duration:n.duration in Z.fx.speeds?Z.fx.speeds[n.duration]:Z.fx.speeds._default,(null==n.queue||n.queue===!0)&&(n.queue="fx"),n.old=n.complete,n.complete=function(){Z.isFunction(n.old)&&n.old.call(this),n.queue&&Z.dequeue(this,n.queue)},n},Z.fn.extend({fadeTo:function(t,e,i,n){return this.filter(ke).css("opacity",0).show().end().animate({opacity:e},t,i,n)},animate:function(t,e,i,n){var s=Z.isEmptyObject(t),o=Z.speed(e,i,n),r=function(){var e=D(this,Z.extend({},t),o);(s||ve.get(this,"finish"))&&e.stop(!0)};return r.finish=r,s||o.queue===!1?this.each(r):this.queue(o.queue,r)},stop:function(t,e,i){var n=function(t){var e=t.stop;delete t.stop,e(i)};return"string"!=typeof t&&(i=e,e=t,t=void 0),e&&t!==!1&&this.queue(t||"fx",[]),this.each(function(){var e=!0,s=null!=t&&t+"queueHooks",o=Z.timers,r=ve.get(this);if(s)r[s]&&r[s].stop&&n(r[s]);else for(s in r)r[s]&&r[s].stop&&ti.test(s)&&n(r[s]);for(s=o.length;s--;)o[s].elem!==this||null!=t&&o[s].queue!==t||(o[s].anim.stop(i),e=!1,o.splice(s,1));(e||!i)&&Z.dequeue(this,t)})},finish:function(t){return t!==!1&&(t=t||"fx"),this.each(function(){var e,i=ve.get(this),n=i[t+"queue"],s=i[t+"queueHooks"],o=Z.timers,r=n?n.length:0;for(i.finish=!0,Z.queue(this,t,[]),s&&s.stop&&s.stop.call(this,!0),e=o.length;e--;)o[e].elem===this&&o[e].queue===t&&(o[e].anim.stop(!0),o.splice(e,1));for(e=0;r>e;e++)n[e]&&n[e].finish&&n[e].finish.call(this);delete i.finish})}}),Z.each(["toggle","show","hide"],function(t,e){var i=Z.fn[e];Z.fn[e]=function(t,n,s){return null==t||"boolean"==typeof t?i.apply(this,arguments):this.animate(P(e,!0),t,n,s)}}),Z.each({slideDown:P("show"),slideUp:P("hide"),slideToggle:P("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(t,e){Z.fn[t]=function(t,i,n){return this.animate(e,t,i,n)}}),Z.timers=[],Z.fx.tick=function(){var t,e=0,i=Z.timers;for(Je=Z.now();e<i.length;e++)t=i[e],t()||i[e]!==t||i.splice(e--,1);i.length||Z.fx.stop(),Je=void 0},Z.fx.timer=function(t){Z.timers.push(t),t()?Z.fx.start():Z.timers.pop()},Z.fx.interval=13,Z.fx.start=function(){Ke||(Ke=setInterval(Z.fx.tick,Z.fx.interval))},Z.fx.stop=function(){clearInterval(Ke),Ke=null},Z.fx.speeds={slow:600,fast:200,_default:400},Z.fn.delay=function(t,e){return t=Z.fx?Z.fx.speeds[t]||t:t,e=e||"fx",this.queue(e,function(e,i){var n=setTimeout(e,t);i.stop=function(){clearTimeout(n)}})},function(){var t=K.createElement("input"),e=K.createElement("select"),i=e.appendChild(K.createElement("option"));t.type="checkbox",J.checkOn=""!==t.value,J.optSelected=i.selected,e.disabled=!0,J.optDisabled=!i.disabled,t=K.createElement("input"),t.value="t",t.type="radio",J.radioValue="t"===t.value}();var ni,si,oi=Z.expr.attrHandle;Z.fn.extend({attr:function(t,e){return me(this,Z.attr,t,e,arguments.length>1)},removeAttr:function(t){return this.each(function(){Z.removeAttr(this,t)})}}),Z.extend({attr:function(t,e,i){var n,s,o=t.nodeType;if(t&&3!==o&&8!==o&&2!==o)return typeof t.getAttribute===Te?Z.prop(t,e,i):(1===o&&Z.isXMLDoc(t)||(e=e.toLowerCase(),n=Z.attrHooks[e]||(Z.expr.match.bool.test(e)?si:ni)),void 0===i?n&&"get"in n&&null!==(s=n.get(t,e))?s:(s=Z.find.attr(t,e),null==s?void 0:s):null!==i?n&&"set"in n&&void 0!==(s=n.set(t,i,e))?s:(t.setAttribute(e,i+""),i):(Z.removeAttr(t,e),void 0))},removeAttr:function(t,e){var i,n,s=0,o=e&&e.match(de);if(o&&1===t.nodeType)for(;i=o[s++];)n=Z.propFix[i]||i,Z.expr.match.bool.test(i)&&(t[n]=!1),t.removeAttribute(i)},attrHooks:{type:{set:function(t,e){if(!J.radioValue&&"radio"===e&&Z.nodeName(t,"input")){var i=t.value;return t.setAttribute("type",e),i&&(t.value=i),e}}}}}),si={set:function(t,e,i){return e===!1?Z.removeAttr(t,i):t.setAttribute(i,i),i}},Z.each(Z.expr.match.bool.source.match(/\w+/g),function(t,e){var i=oi[e]||Z.find.attr;oi[e]=function(t,e,n){var s,o;return n||(o=oi[e],oi[e]=s,s=null!=i(t,e,n)?e.toLowerCase():null,oi[e]=o),s}});var ri=/^(?:input|select|textarea|button)$/i;Z.fn.extend({prop:function(t,e){return me(this,Z.prop,t,e,arguments.length>1)},removeProp:function(t){return this.each(function(){delete this[Z.propFix[t]||t]})}}),Z.extend({propFix:{"for":"htmlFor","class":"className"},prop:function(t,e,i){var n,s,o,r=t.nodeType;if(t&&3!==r&&8!==r&&2!==r)return o=1!==r||!Z.isXMLDoc(t),o&&(e=Z.propFix[e]||e,s=Z.propHooks[e]),void 0!==i?s&&"set"in s&&void 0!==(n=s.set(t,i,e))?n:t[e]=i:s&&"get"in s&&null!==(n=s.get(t,e))?n:t[e]},propHooks:{tabIndex:{get:function(t){return t.hasAttribute("tabindex")||ri.test(t.nodeName)||t.href?t.tabIndex:-1}}}}),J.optSelected||(Z.propHooks.selected={get:function(t){var e=t.parentNode;return e&&e.parentNode&&e.parentNode.selectedIndex,null}}),Z.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){Z.propFix[this.toLowerCase()]=this});var ai=/[\t\r\n\f]/g;Z.fn.extend({addClass:function(t){var e,i,n,s,o,r,a="string"==typeof t&&t,h=0,u=this.length;if(Z.isFunction(t))return this.each(function(e){Z(this).addClass(t.call(this,e,this.className))});if(a)for(e=(t||"").match(de)||[];u>h;h++)if(i=this[h],n=1===i.nodeType&&(i.className?(" "+i.className+" ").replace(ai," "):" ")){for(o=0;s=e[o++];)n.indexOf(" "+s+" ")<0&&(n+=s+" ");r=Z.trim(n),i.className!==r&&(i.className=r)}return this},removeClass:function(t){var e,i,n,s,o,r,a=0===arguments.length||"string"==typeof t&&t,h=0,u=this.length;if(Z.isFunction(t))return this.each(function(e){Z(this).removeClass(t.call(this,e,this.className))});if(a)for(e=(t||"").match(de)||[];u>h;h++)if(i=this[h],n=1===i.nodeType&&(i.className?(" "+i.className+" ").replace(ai," "):"")){for(o=0;s=e[o++];)for(;n.indexOf(" "+s+" ")>=0;)n=n.replace(" "+s+" "," ");r=t?Z.trim(n):"",i.className!==r&&(i.className=r)}return this},toggleClass:function(t,e){var i=typeof t;return"boolean"==typeof e&&"string"===i?e?this.addClass(t):this.removeClass(t):Z.isFunction(t)?this.each(function(i){Z(this).toggleClass(t.call(this,i,this.className,e),e)}):this.each(function(){if("string"===i)for(var e,n=0,s=Z(this),o=t.match(de)||[];e=o[n++];)s.hasClass(e)?s.removeClass(e):s.addClass(e);else(i===Te||"boolean"===i)&&(this.className&&ve.set(this,"__className__",this.className),this.className=this.className||t===!1?"":ve.get(this,"__className__")||"")})},hasClass:function(t){for(var e=" "+t+" ",i=0,n=this.length;n>i;i++)if(1===this[i].nodeType&&(" "+this[i].className+" ").replace(ai," ").indexOf(e)>=0)return!0;return!1}});var hi=/\r/g;Z.fn.extend({val:function(t){var e,i,n,s=this[0];{if(arguments.length)return n=Z.isFunction(t),this.each(function(i){var s;1===this.nodeType&&(s=n?t.call(this,i,Z(this).val()):t,null==s?s="":"number"==typeof s?s+="":Z.isArray(s)&&(s=Z.map(s,function(t){return null==t?"":t+""})),e=Z.valHooks[this.type]||Z.valHooks[this.nodeName.toLowerCase()],e&&"set"in e&&void 0!==e.set(this,s,"value")||(this.value=s))});if(s)return e=Z.valHooks[s.type]||Z.valHooks[s.nodeName.toLowerCase()],e&&"get"in e&&void 0!==(i=e.get(s,"value"))?i:(i=s.value,"string"==typeof i?i.replace(hi,""):null==i?"":i)}}}),Z.extend({valHooks:{option:{get:function(t){var e=Z.find.attr(t,"value");return null!=e?e:Z.trim(Z.text(t))}},select:{get:function(t){for(var e,i,n=t.options,s=t.selectedIndex,o="select-one"===t.type||0>s,r=o?null:[],a=o?s+1:n.length,h=0>s?a:o?s:0;a>h;h++)if(i=n[h],!(!i.selected&&h!==s||(J.optDisabled?i.disabled:null!==i.getAttribute("disabled"))||i.parentNode.disabled&&Z.nodeName(i.parentNode,"optgroup"))){if(e=Z(i).val(),o)return e;r.push(e)}return r},set:function(t,e){for(var i,n,s=t.options,o=Z.makeArray(e),r=s.length;r--;)n=s[r],(n.selected=Z.inArray(n.value,o)>=0)&&(i=!0);return i||(t.selectedIndex=-1),o}}}}),Z.each(["radio","checkbox"],function(){Z.valHooks[this]={set:function(t,e){return Z.isArray(e)?t.checked=Z.inArray(Z(t).val(),e)>=0:void 0}},J.checkOn||(Z.valHooks[this].get=function(t){return null===t.getAttribute("value")?"on":t.value})}),Z.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(t,e){Z.fn[e]=function(t,i){return arguments.length>0?this.on(e,null,t,i):this.trigger(e)}}),Z.fn.extend({hover:function(t,e){return this.mouseenter(t).mouseleave(e||t)},bind:function(t,e,i){return this.on(t,null,e,i)},unbind:function(t,e){return this.off(t,null,e)},delegate:function(t,e,i,n){return this.on(e,t,i,n)},undelegate:function(t,e,i){return 1===arguments.length?this.off(t,"**"):this.off(e,t||"**",i)
}});var ui=Z.now(),ci=/\?/;Z.parseJSON=function(t){return JSON.parse(t+"")},Z.parseXML=function(t){var e,i;if(!t||"string"!=typeof t)return null;try{i=new DOMParser,e=i.parseFromString(t,"text/xml")}catch(n){e=void 0}return(!e||e.getElementsByTagName("parsererror").length)&&Z.error("Invalid XML: "+t),e};var li,fi,di=/#.*$/,pi=/([?&])_=[^&]*/,gi=/^(.*?):[ \t]*([^\r\n]*)$/gm,mi=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,vi=/^(?:GET|HEAD)$/,yi=/^\/\//,xi=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,bi={},wi={},_i="*/".concat("*");try{fi=location.href}catch(ki){fi=K.createElement("a"),fi.href="",fi=fi.href}li=xi.exec(fi.toLowerCase())||[],Z.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:fi,type:"GET",isLocal:mi.test(li[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":_i,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":Z.parseJSON,"text xml":Z.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(t,e){return e?q(q(t,Z.ajaxSettings),e):q(Z.ajaxSettings,t)},ajaxPrefilter:L(bi),ajaxTransport:L(wi),ajax:function(t,e){function i(t,e,i,r){var h,c,v,y,b,_=e;2!==x&&(x=2,a&&clearTimeout(a),n=void 0,o=r||"",w.readyState=t>0?4:0,h=t>=200&&300>t||304===t,i&&(y=R(l,w,i)),y=F(l,y,w,h),h?(l.ifModified&&(b=w.getResponseHeader("Last-Modified"),b&&(Z.lastModified[s]=b),b=w.getResponseHeader("etag"),b&&(Z.etag[s]=b)),204===t||"HEAD"===l.type?_="nocontent":304===t?_="notmodified":(_=y.state,c=y.data,v=y.error,h=!v)):(v=_,(t||!_)&&(_="error",0>t&&(t=0))),w.status=t,w.statusText=(e||_)+"",h?p.resolveWith(f,[c,_,w]):p.rejectWith(f,[w,_,v]),w.statusCode(m),m=void 0,u&&d.trigger(h?"ajaxSuccess":"ajaxError",[w,l,h?c:v]),g.fireWith(f,[w,_]),u&&(d.trigger("ajaxComplete",[w,l]),--Z.active||Z.event.trigger("ajaxStop")))}"object"==typeof t&&(e=t,t=void 0),e=e||{};var n,s,o,r,a,h,u,c,l=Z.ajaxSetup({},e),f=l.context||l,d=l.context&&(f.nodeType||f.jquery)?Z(f):Z.event,p=Z.Deferred(),g=Z.Callbacks("once memory"),m=l.statusCode||{},v={},y={},x=0,b="canceled",w={readyState:0,getResponseHeader:function(t){var e;if(2===x){if(!r)for(r={};e=gi.exec(o);)r[e[1].toLowerCase()]=e[2];e=r[t.toLowerCase()]}return null==e?null:e},getAllResponseHeaders:function(){return 2===x?o:null},setRequestHeader:function(t,e){var i=t.toLowerCase();return x||(t=y[i]=y[i]||t,v[t]=e),this},overrideMimeType:function(t){return x||(l.mimeType=t),this},statusCode:function(t){var e;if(t)if(2>x)for(e in t)m[e]=[m[e],t[e]];else w.always(t[w.status]);return this},abort:function(t){var e=t||b;return n&&n.abort(e),i(0,e),this}};if(p.promise(w).complete=g.add,w.success=w.done,w.error=w.fail,l.url=((t||l.url||fi)+"").replace(di,"").replace(yi,li[1]+"//"),l.type=e.method||e.type||l.method||l.type,l.dataTypes=Z.trim(l.dataType||"*").toLowerCase().match(de)||[""],null==l.crossDomain&&(h=xi.exec(l.url.toLowerCase()),l.crossDomain=!(!h||h[1]===li[1]&&h[2]===li[2]&&(h[3]||("http:"===h[1]?"80":"443"))===(li[3]||("http:"===li[1]?"80":"443")))),l.data&&l.processData&&"string"!=typeof l.data&&(l.data=Z.param(l.data,l.traditional)),V(bi,l,e,w),2===x)return w;u=l.global,u&&0===Z.active++&&Z.event.trigger("ajaxStart"),l.type=l.type.toUpperCase(),l.hasContent=!vi.test(l.type),s=l.url,l.hasContent||(l.data&&(s=l.url+=(ci.test(s)?"&":"?")+l.data,delete l.data),l.cache===!1&&(l.url=pi.test(s)?s.replace(pi,"$1_="+ui++):s+(ci.test(s)?"&":"?")+"_="+ui++)),l.ifModified&&(Z.lastModified[s]&&w.setRequestHeader("If-Modified-Since",Z.lastModified[s]),Z.etag[s]&&w.setRequestHeader("If-None-Match",Z.etag[s])),(l.data&&l.hasContent&&l.contentType!==!1||e.contentType)&&w.setRequestHeader("Content-Type",l.contentType),w.setRequestHeader("Accept",l.dataTypes[0]&&l.accepts[l.dataTypes[0]]?l.accepts[l.dataTypes[0]]+("*"!==l.dataTypes[0]?", "+_i+"; q=0.01":""):l.accepts["*"]);for(c in l.headers)w.setRequestHeader(c,l.headers[c]);if(l.beforeSend&&(l.beforeSend.call(f,w,l)===!1||2===x))return w.abort();b="abort";for(c in{success:1,error:1,complete:1})w[c](l[c]);if(n=V(wi,l,e,w)){w.readyState=1,u&&d.trigger("ajaxSend",[w,l]),l.async&&l.timeout>0&&(a=setTimeout(function(){w.abort("timeout")},l.timeout));try{x=1,n.send(v,i)}catch(_){if(!(2>x))throw _;i(-1,_)}}else i(-1,"No Transport");return w},getJSON:function(t,e,i){return Z.get(t,e,i,"json")},getScript:function(t,e){return Z.get(t,void 0,e,"script")}}),Z.each(["get","post"],function(t,e){Z[e]=function(t,i,n,s){return Z.isFunction(i)&&(s=s||n,n=i,i=void 0),Z.ajax({url:t,type:e,dataType:s,data:i,success:n})}}),Z.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(t,e){Z.fn[e]=function(t){return this.on(e,t)}}),Z._evalUrl=function(t){return Z.ajax({url:t,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0})},Z.fn.extend({wrapAll:function(t){var e;return Z.isFunction(t)?this.each(function(e){Z(this).wrapAll(t.call(this,e))}):(this[0]&&(e=Z(t,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&e.insertBefore(this[0]),e.map(function(){for(var t=this;t.firstElementChild;)t=t.firstElementChild;return t}).append(this)),this)},wrapInner:function(t){return Z.isFunction(t)?this.each(function(e){Z(this).wrapInner(t.call(this,e))}):this.each(function(){var e=Z(this),i=e.contents();i.length?i.wrapAll(t):e.append(t)})},wrap:function(t){var e=Z.isFunction(t);return this.each(function(i){Z(this).wrapAll(e?t.call(this,i):t)})},unwrap:function(){return this.parent().each(function(){Z.nodeName(this,"body")||Z(this).replaceWith(this.childNodes)}).end()}}),Z.expr.filters.hidden=function(t){return t.offsetWidth<=0&&t.offsetHeight<=0},Z.expr.filters.visible=function(t){return!Z.expr.filters.hidden(t)};var ji=/%20/g,Ti=/\[\]$/,Ni=/\r?\n/g,Ci=/^(?:submit|button|image|reset|file)$/i,Si=/^(?:input|select|textarea|keygen)/i;Z.param=function(t,e){var i,n=[],s=function(t,e){e=Z.isFunction(e)?e():null==e?"":e,n[n.length]=encodeURIComponent(t)+"="+encodeURIComponent(e)};if(void 0===e&&(e=Z.ajaxSettings&&Z.ajaxSettings.traditional),Z.isArray(t)||t.jquery&&!Z.isPlainObject(t))Z.each(t,function(){s(this.name,this.value)});else for(i in t)W(i,t[i],e,s);return n.join("&").replace(ji,"+")},Z.fn.extend({serialize:function(){return Z.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var t=Z.prop(this,"elements");return t?Z.makeArray(t):this}).filter(function(){var t=this.type;return this.name&&!Z(this).is(":disabled")&&Si.test(this.nodeName)&&!Ci.test(t)&&(this.checked||!je.test(t))}).map(function(t,e){var i=Z(this).val();return null==i?null:Z.isArray(i)?Z.map(i,function(t){return{name:e.name,value:t.replace(Ni,"\r\n")}}):{name:e.name,value:i.replace(Ni,"\r\n")}}).get()}}),Z.ajaxSettings.xhr=function(){try{return new XMLHttpRequest}catch(t){}};var Ai=0,Pi={},Mi={0:200,1223:204},Oi=Z.ajaxSettings.xhr();t.ActiveXObject&&Z(t).on("unload",function(){for(var t in Pi)Pi[t]()}),J.cors=!!Oi&&"withCredentials"in Oi,J.ajax=Oi=!!Oi,Z.ajaxTransport(function(t){var e;return J.cors||Oi&&!t.crossDomain?{send:function(i,n){var s,o=t.xhr(),r=++Ai;if(o.open(t.type,t.url,t.async,t.username,t.password),t.xhrFields)for(s in t.xhrFields)o[s]=t.xhrFields[s];t.mimeType&&o.overrideMimeType&&o.overrideMimeType(t.mimeType),t.crossDomain||i["X-Requested-With"]||(i["X-Requested-With"]="XMLHttpRequest");for(s in i)o.setRequestHeader(s,i[s]);e=function(t){return function(){e&&(delete Pi[r],e=o.onload=o.onerror=null,"abort"===t?o.abort():"error"===t?n(o.status,o.statusText):n(Mi[o.status]||o.status,o.statusText,"string"==typeof o.responseText?{text:o.responseText}:void 0,o.getAllResponseHeaders()))}},o.onload=e(),o.onerror=e("error"),e=Pi[r]=e("abort");try{o.send(t.hasContent&&t.data||null)}catch(a){if(e)throw a}},abort:function(){e&&e()}}:void 0}),Z.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(t){return Z.globalEval(t),t}}}),Z.ajaxPrefilter("script",function(t){void 0===t.cache&&(t.cache=!1),t.crossDomain&&(t.type="GET")}),Z.ajaxTransport("script",function(t){if(t.crossDomain){var e,i;return{send:function(n,s){e=Z("<script>").prop({async:!0,charset:t.scriptCharset,src:t.url}).on("load error",i=function(t){e.remove(),i=null,t&&s("error"===t.type?404:200,t.type)}),K.head.appendChild(e[0])},abort:function(){i&&i()}}}});var Ei=[],Di=/(=)\?(?=&|$)|\?\?/;Z.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var t=Ei.pop()||Z.expando+"_"+ui++;return this[t]=!0,t}}),Z.ajaxPrefilter("json jsonp",function(e,i,n){var s,o,r,a=e.jsonp!==!1&&(Di.test(e.url)?"url":"string"==typeof e.data&&!(e.contentType||"").indexOf("application/x-www-form-urlencoded")&&Di.test(e.data)&&"data");return a||"jsonp"===e.dataTypes[0]?(s=e.jsonpCallback=Z.isFunction(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback,a?e[a]=e[a].replace(Di,"$1"+s):e.jsonp!==!1&&(e.url+=(ci.test(e.url)?"&":"?")+e.jsonp+"="+s),e.converters["script json"]=function(){return r||Z.error(s+" was not called"),r[0]},e.dataTypes[0]="json",o=t[s],t[s]=function(){r=arguments},n.always(function(){t[s]=o,e[s]&&(e.jsonpCallback=i.jsonpCallback,Ei.push(s)),r&&Z.isFunction(o)&&o(r[0]),r=o=void 0}),"script"):void 0}),Z.parseHTML=function(t,e,i){if(!t||"string"!=typeof t)return null;"boolean"==typeof e&&(i=e,e=!1),e=e||K;var n=re.exec(t),s=!i&&[];return n?[e.createElement(n[1])]:(n=Z.buildFragment([t],e,s),s&&s.length&&Z(s).remove(),Z.merge([],n.childNodes))};var Li=Z.fn.load;Z.fn.load=function(t,e,i){if("string"!=typeof t&&Li)return Li.apply(this,arguments);var n,s,o,r=this,a=t.indexOf(" ");return a>=0&&(n=Z.trim(t.slice(a)),t=t.slice(0,a)),Z.isFunction(e)?(i=e,e=void 0):e&&"object"==typeof e&&(s="POST"),r.length>0&&Z.ajax({url:t,type:s,dataType:"html",data:e}).done(function(t){o=arguments,r.html(n?Z("<div>").append(Z.parseHTML(t)).find(n):t)}).complete(i&&function(t,e){r.each(i,o||[t.responseText,e,t])}),this},Z.expr.filters.animated=function(t){return Z.grep(Z.timers,function(e){return t===e.elem}).length};var Vi=t.document.documentElement;Z.offset={setOffset:function(t,e,i){var n,s,o,r,a,h,u,c=Z.css(t,"position"),l=Z(t),f={};"static"===c&&(t.style.position="relative"),a=l.offset(),o=Z.css(t,"top"),h=Z.css(t,"left"),u=("absolute"===c||"fixed"===c)&&(o+h).indexOf("auto")>-1,u?(n=l.position(),r=n.top,s=n.left):(r=parseFloat(o)||0,s=parseFloat(h)||0),Z.isFunction(e)&&(e=e.call(t,i,a)),null!=e.top&&(f.top=e.top-a.top+r),null!=e.left&&(f.left=e.left-a.left+s),"using"in e?e.using.call(t,f):l.css(f)}},Z.fn.extend({offset:function(t){if(arguments.length)return void 0===t?this:this.each(function(e){Z.offset.setOffset(this,t,e)});var e,i,n=this[0],s={top:0,left:0},o=n&&n.ownerDocument;if(o)return e=o.documentElement,Z.contains(e,n)?(typeof n.getBoundingClientRect!==Te&&(s=n.getBoundingClientRect()),i=B(o),{top:s.top+i.pageYOffset-e.clientTop,left:s.left+i.pageXOffset-e.clientLeft}):s},position:function(){if(this[0]){var t,e,i=this[0],n={top:0,left:0};return"fixed"===Z.css(i,"position")?e=i.getBoundingClientRect():(t=this.offsetParent(),e=this.offset(),Z.nodeName(t[0],"html")||(n=t.offset()),n.top+=Z.css(t[0],"borderTopWidth",!0),n.left+=Z.css(t[0],"borderLeftWidth",!0)),{top:e.top-n.top-Z.css(i,"marginTop",!0),left:e.left-n.left-Z.css(i,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var t=this.offsetParent||Vi;t&&!Z.nodeName(t,"html")&&"static"===Z.css(t,"position");)t=t.offsetParent;return t||Vi})}}),Z.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,i){var n="pageYOffset"===i;Z.fn[e]=function(s){return me(this,function(e,s,o){var r=B(e);return void 0===o?r?r[i]:e[s]:(r?r.scrollTo(n?t.pageXOffset:o,n?o:t.pageYOffset):e[s]=o,void 0)},e,s,arguments.length,null)}}),Z.each(["top","left"],function(t,e){Z.cssHooks[e]=_(J.pixelPosition,function(t,i){return i?(i=w(t,e),He.test(i)?Z(t).position()[e]+"px":i):void 0})}),Z.each({Height:"height",Width:"width"},function(t,e){Z.each({padding:"inner"+t,content:e,"":"outer"+t},function(i,n){Z.fn[n]=function(n,s){var o=arguments.length&&(i||"boolean"!=typeof n),r=i||(n===!0||s===!0?"margin":"border");return me(this,function(e,i,n){var s;return Z.isWindow(e)?e.document.documentElement["client"+t]:9===e.nodeType?(s=e.documentElement,Math.max(e.body["scroll"+t],s["scroll"+t],e.body["offset"+t],s["offset"+t],s["client"+t])):void 0===n?Z.css(e,i,r):Z.style(e,i,n,r)},e,o?n:void 0,o,null)}})}),Z.fn.size=function(){return this.length},Z.fn.andSelf=Z.fn.addBack,"function"==typeof define&&define.amd&&define("jquery",[],function(){return Z});var qi=t.jQuery,Ri=t.$;return Z.noConflict=function(e){return t.$===Z&&(t.$=Ri),e&&t.jQuery===Z&&(t.jQuery=qi),Z},typeof e===Te&&(t.jQuery=t.$=Z),Z})},{}],7:[function(t,e){e.exports=function(t){var e=t.Interface,i={hasPageButtons:!1,layout:{bounds:[0,0,1,1],widget:null,sacrosanct:!1,parent:null,id:0,children:[]},getBestChildForNewWidget:function(t){function e(t){if(0===t.children.length)null===t.widget?t.bounds[2]+t.bounds[3]>i&&(n=t,i=t.bounds[2]+t.bounds[3]):(t.bounds[2]+t.bounds[3])/2>i&&(n=t,i=(t.bounds[2]+t.bounds[3])/2);else for(var s=0;s<t.children.length;s++){var o=t.children[s];e(o,i)}}var i=0;t=0;var n=this.layout;return e(n),n},placeWidget:function(t,e){null===t&&console.log("ALERT ALERT ALERT ALERT ALERT ALERT ALERT ALERT ALERT ALERT ALERT ALERT");var i=null;if(i=this.getBestChildForNewWidget(0),null===i.widget)i.widget=t,t.bounds=i.bounds,t.div=i;else{var n,s,o=i.widget,r=i.bounds[2]>i.bounds[3]?0:1;n=0==r?i.bounds[2]/2:i.bounds[2],s=1==r?i.bounds[3]/2:i.bounds[3];var a={bounds:[i.bounds[0],i.bounds[1],n,s],widget:o,sacrosanct:!1,parent:i,children:[]},h=0==r?i.bounds[0]+n:i.bounds[0],u=1==r?i.bounds[1]+s:i.bounds[1],c={bounds:[h,u,n,s],widget:t,sacrosanct:e,parent:i,children:[]};a.widget.div=a,a.widget.bounds=a.bounds,c.widget.bounds=c.bounds,c.widget.div=c,i.children.push(a),i.children.push(c),i.widget=null}},removeWidget:function(t){t.div.widget=null;var e=t.div.parent;if(null!==e){var i=jQuery.inArray(t.div,e.children),n=1===i?0:1;null===e.children[n].widget&&(e.children=[],e.widget=null)}else t.div.children=[];this.redoLayout()},reset:function(){this.layout={bounds:[0,0,1,1],widget:null,sacrosanct:!1,parent:null,id:0,children:[]}},redoLayout:function(){this.layout={bounds:[0,0,1,1],widget:null,sacrosanct:!1,parent:null,id:0,children:[]};for(var t=0;t<e.panel.children.length;t++){var i=e.panel.children[t];i.useAutogui&&this.placeWidget(i)}}};return i}},{}],8:[function(t,e){!function(){var i=t("gibber.core.lib");i.Interface=t("./interface.js")(i),i.isInstrument=!0,e.exports=i}()},{"./interface.js":9,"gibber.core.lib":2}],9:[function(t,e){e.exports=function(e){var i=e.dollar,n={value:{min:0,max:1,output:e.LINEAR,wrap:!1,timescale:"interface"}},s=0,o=t("interface.js"),r={autogui:t("./autogui")(e),mode:"local",client:0,panel:null,socket:null,callbacks:{},newPanel:function(t){"undefined"==typeof t?t=e.isInstrument?{bodyElement:document.querySelector("body")}:Layout.addColumn():t.bodyElement.innerHTML="",t.bodyElement.length&&(t.bodyElement=t.bodyElement[0]);var n=new o.Panel({container:t.bodyElement,useRelativeSizesAndPositions:!0,font:"normal 16px Helvetica"});return n.canvas.style.position="relative",n.canvas.style.width=t.bodyElement.style.width,n.canvas.style.height=t.bodyElement.style.height,this.panel=n,this.panel.column=t,t.onresize=this.onresize.bind(n),r.autogui.reset(),t.onclose=function(){r.panel=null},i.subscribe("/gibber/clear",function(){t.close()}),n},onresize:function(){i(this.canvas).css({position:"relative",width:i(this.column.bodyElement).width(),height:i(this.column.bodyElement).height()}),this.redoBoundaries()},initializers:{Accelerometer:function(t){var i={x:{min:0,max:1,output:e.LINEAR,wrap:!1,timescale:"interface"},y:{min:0,max:1,output:e.LINEAR,wrap:!1,timescale:"interface"},z:{min:0,max:1,output:e.LINEAR,wrap:!1,timescale:"interface"}};return delete t.x,delete t.y,delete t.z,e.createProxyProperties(t,i,!1),t.onvaluechange=function(e,i,n){console.log(e,i,n),t.x(e),t.y(i),t.z(n)},t.start(),t},Orientation:function(t){var i={x:{min:0,max:1,output:e.LINEAR,wrap:!1,timescale:"interface"},y:{min:0,max:1,output:e.LINEAR,wrap:!1,timescale:"interface"},z:{min:0,max:1,output:e.LINEAR,wrap:!1,timescale:"interface"}};return delete t.x,delete t.y,delete t.z,e.createProxyProperties(t,i,!1),t.onvaluechange=function(e,i,n){t.x(e),t.y(i),t.z(n)},t.start(),t},XY:function(t){for(var i={x:{min:0,max:1,output:e.LINEAR,wrap:!1,timescale:"interface"},y:{min:0,max:1,output:e.LINEAR,wrap:!1,timescale:"interface"}},n=0;n<t.values.length;n++)!function(){var s=n,o=t.values[s],r=0,a=0;Object.defineProperties(o,{x:{configurable:!0,get:function(){return r},set:function(t){r=t}},y:{configurable:!0,get:function(){return a},set:function(t){a=t}}}),e.createProxyProperties(o,i,!1),t[s]=o}()},HBox:function(t){for(var e=0;e<t.children.length;e++)!function(){var i=t.children[e];i.kill(),i.panel=t.proxyPanel,Object.defineProperty(t,e,{configurable:!0,get:function(){return i},set:function(){}})}();var i=t.add;t.add=function(){var e=Array.prototype.slice.call(arguments,0);e=e.map(function(t){return t.kill()});for(var n=t.children.length,s=0;s<e.length;s++)!function(){var i=e[s];Object.defineProperty(t,n++,{configurable:!0,get:function(){return i},set:function(){}})}();return i.apply(t,e)},t.layout(),t.draw()},VBox:function(t){for(var e=0;e<t.children.length;e++)!function(){var i=t.children[e];i.kill(),i.panel=t.proxyPanel,Object.defineProperty(t,e,{configurable:!0,get:function(){return i},set:function(){}})}();var i=t.add;t.add=function(){var e=Array.prototype.slice.call(arguments,0);return e=e.map(function(t){return t.kill()}),i.apply(t,e)},t.layout(),t.draw()},MultiSlider:function(t){var i={value:{min:0,max:1,output:e.LINEAR,wrap:!1,timescale:"interface"}};t.children=[];for(var n=0;n<t.count;n++)!function(){var s=n,o={},r=t.values[n];Object.defineProperties(o,{value:{configurable:!0,get:function(){return r},set:function(t){r=t}}}),e.createProxyProperties(o,i,!1),t[s]=o,t.children.push(o),o.valueOf=function(){return this.value()},o.index=s}();t.length=t.count,t.onvaluechange=function(e,i){t[e].value=i}},Patchbay:function(t){t.onconnection=function(t,e){e.object[e.name]=t.object[t.Name]},t.ondisconnection=function(t,e){e.object[e.Name].mapping.remove()},t._createConnection=t.createConnection,t.createConnection=function(e){var i=(this.points[e[0]],this.points[e[1]]);return"Out"===i.Name?(console.log("You can't feed input to an Out patch point"),void 0):(t._createConnection(e),void 0)}},Paint:function(t){var i={x:{min:0,max:1,output:e.LINEAR,wrap:!1,timescale:"interface"},y:{min:0,max:1,output:e.LINEAR,wrap:!1,timescale:"interface"}},n=t.value,s=0,o=0;Object.defineProperties(n,{x:{get:function(){return s},set:function(t){s=t}},y:{get:function(){return o},set:function(t){o=t}}}),e.createProxyProperties(n,i,!1)},Piano:function(t){var e=t.target;Object.defineProperty(t,"target",{get:function(){return e},set:function(i){e=i;for(var n=0;n<t.children.length;n++)t.children[n].target=e,t.children[n].key="undefined"!=typeof e.note?"note":"frequency",t.children[n].sendTargetMessage=function(){this.target&&this.target.note&&this.target.note(this.frequency,this.value)}}}),t.onboundschange=function(){this._initialized&&this.placeKeys(),this.target=this.target}}},defaults:{XY:{childWidth:40,fill:"rgba(255,255,255,.1)",stroke:"#aaa",numChildren:2,usePhysics:!1},Piano:{startletter:"C",startoctave:3,endletter:"C",endoctave:4,background:"white",fill:"black"}},nonGraphical:["Accelerometer","Orientation"],widget:function(t,a){var h=-1!==r.nonGraphical.indexOf(a);if("local"===this.mode){null!==r.panel||h||r.newPanel(),"undefined"==typeof t&&(t={mode:"toggle"}),r.defaults[a]&&(t=i.extend(r.defaults[a],t));var u=new o[a](t);if(u.type="mapping","undefined"==typeof u.bounds[0]&&(h||(r.autogui.placeWidget(u,!1),u.useAutogui=!0)),h||e.Interface.panel.add(u),r.initializers[a])r.initializers[a](u,t);else{var c="value",l=n[c],f=i.extend({},l,{Name:c.charAt(0).toUpperCase()+c.slice(1),name:c,type:"mapping",value:1,object:u,targets:[]});Object.defineProperty(f.object,f.Name,{get:function(){return f},set:function(t){"object"==typeof t&&"mapping"===t.type&&e.createMappingObject(f,t)}}),u.mappingObjects=[f],u.mappingProperties=n,u.replaceWith=function(t){u.target&&(t.target=u.target),u.key&&(t.key=u.key),r.panel.remove(u),r.panel.add(t),t.setValue(u.value);for(var e=0;e<this.mappingObjects.length;e++){var i=this.mappingObjects[e];if(i.targets.length>0)for(var n=0;n<i.targets.length;n++){var s=i.targets[n];t.mappingProperties[i.name]?s[0].mapping.replace(t,i.name,i.Name):s[0].mapping.remove()}}}}return"number"==typeof u.value&&(u.valueOf=function(){return u.value}),u.mappings=[],u.kill=u.remove=function(){for(var t=0;t<u.mappings.length;t++)u.mappings[t].remove();return u.clearMarks&&u.clearMarks(),h||(u.useAutogui?(r.autogui.removeWidget(u),u.panel.remove(u)):u.panel.remove(u)),u},Object.defineProperty(u,"_",{get:function(){return u.kill()},set:function(){}}),u}t=t||{};var u={value:0,type:"mapping",min:0,max:1,client:this.client,remoteID:"/"+(t.name||s++),mappings:[],setValue:function(t){this.value=t;var e={address:"/clients/"+this.client+this.remoteID,parameters:[t]};r.socket.send(JSON.stringify(e))},kill:function(){var t={address:"/clients/"+this.client+"/interface/removeWidget",parameters:[u.remoteID]};r.socket.send(JSON.stringify(t));for(var e=0;e<u.mappings.length;e++)u.mappings[e].remove();u.clearMarks&&u.clearMarks(),u.useAutogui&&r.autogui.removeWidget(u)},replaceWith:function(){this.kill()}};Object.defineProperty(u,"_",{get:function(){u.kill()},set:function(){}});var c="value",l=n[c],f=i.extend({},l);i.extend(f,{Name:c.charAt(0).toUpperCase()+c.slice(1),name:c,type:"mapping",value:1,object:u,targets:[]}),Object.defineProperty(f.object,f.Name,{get:function(){return f},set:function(t){"object"==typeof t&&"mapping"===t.type&&e.createMappingObject(f,t)}});var d="";Object.defineProperty(u,"label",{get:function(){return d},set:function(t){d=t;var e={address:"/clients/"+this.client+"/interface/setLabel",parameters:[u.remoteID,d]};r.socket.send(JSON.stringify(e))}}),u.mappingObjects=[f],u.mappingProperties=n,this.callbacks[u.remoteID]=function(t){u.value=t.parameters[0],u.onvaluechange&&u.onvaluechange()};var p={address:"/clients/"+this.client+"/interface/addWidget",parameters:[{type:a,target:"OSC",key:u.remoteID,name:u.remoteID}]};return this.socket.send(JSON.stringify(p)),u},use:function(t,i){if("remote"===t){if(null===r.socket||3===r.socket.readyState){var n=JSON.stringify({address:"/createLivecodeServer",parameters:[]}),s=r.socket=new WebSocket("ws://127.0.0.1:10001");r.socket.onopen=function(){s.send(n)},r.socket.onmessage=function(t){var e;try{e=JSON.parse(t.data)}catch(i){return console.error("ERROR on parsing JSON",i),void 0}r.callbacks[e.address]&&r.callbacks[e.address](e)},window.OSC=e.Interface.socket,window.OSC.callbacks=e.Interface.callbacks}r.mode="remote",r.client=i}else r.mode="local"},clear:function(t){var e=isNaN(t)?r.client:t;if("*"===t&&(e="*"),"remote"===r.mode){var i={address:"/clients/"+e+"/interface/clear",parameters:[]};r.socket.send(JSON.stringify(i))}},button:function(t){return r.widget(t,"Button")},slider:function(t){return r.widget(t,"Slider")},multislider:function(t){return r.widget(t,"MultiSlider")},knob:function(t){return r.widget(t,"Knob")},xy:function(t){return r.widget(t,"XY")},piano:function(t){return r.widget(t,"Piano")},paint:function(t){return r.widget(t,"Paint")},patchbay:function(t){return r.widget(t,"Patchbay")},crossfader:function(t){return r.widget(t,"Crossfader")},accelerometer:function(t){return r.widget(t,"Accelerometer")},orientation:function(t){return r.widget(t,"Orientation")},patchbay:function(t){if(arguments.length>1||t.name){var e={points:Array.prototype.slice.call(arguments,0)};t=e}return r.widget(t,"Patchbay")},hbox:function(t){if(arguments.length>1||t.name){var e={children:Array.prototype.slice.call(arguments,0)};t=e}return r.widget(t,"HBox")},vbox:function(t){if(arguments.length>1||t.name){var e={children:Array.prototype.slice.call(arguments,0)};t=e}return r.widget(t,"VBox")},"export":function(t){t.Button=r.button,t.Slider=r.slider,t.MultiSlider=r.multislider,t.Knob=r.knob,t.XY=r.xy,t.Keyboard=r.piano,t.Paint=r.paint,t.Panel=r.newPanel.bind(r),t.Patchbay=r.patchbay,t.HBox=r.hbox,t.VBox=r.vbox,t.Crossfader=r.crossfader,t.Accelerometer=r.accelerometer,t.Orientation=r.orientation}};return r.use=o.use,r.clear=o.clear,r}},{"./autogui":7,"interface.js":5}]},{},[8])(8)});